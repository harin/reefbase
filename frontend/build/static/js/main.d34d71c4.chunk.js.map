{"version":3,"sources":["diverflag.png","AppContext.tsx","api.ts","Navbar.tsx","DestinationCard.tsx","components/DiveFlag.tsx","components/DiveMap.tsx","Destination.tsx","DestinationList.tsx","Login.js","About.tsx","distance.js","MapPage.tsx","App.tsx","serviceWorker.js","index.js"],"names":["module","exports","DEFAULT_STATE","user","undefined","AppContext","React","createContext","loadJson","_x","_loadJson","apply","this","arguments","_callee7","path","options","resp","data","error","errorData","_args7","regenerator_default","a","wrap","_context7","prev","next","length","headers","fetch","sent","ok","json","abrupt","t0","statusText","Error","stop","loadAuthJson","_callee8","accessToken","_args8","_context8","concat","getCountries","_getCountries","_callee9","params","paramsObj","_args9","_context9","limit","URLSearchParams","toString","getCities","_getCities","_callee10","_args10","_context10","country_name","results","map","datum","getDestination","_x4","_x5","_getDestination","_callee11","city_name","_context11","include_divesites","result","divesite_set","getDiveSites","_x6","_getDiveSites","_callee12","query","queryObj","_context12","Note","updateNote","_updateNote","Object","asyncToGenerator","mark","_callee","_ref","diveSiteId","content","body","_context","Content-Type","Authorization","access_token","JSON","stringify","id","method","_x7","getNote","_getNote","_callee2","_ref2","_context2","methods","_x8","auth","register","_register","_callee3","_ref3","username","email","password","_context3","console","log","login","_x9","_login","_callee4","_context4","_x10","_x11","logout","_logout","_callee5","_context5","_x12","isTokenValid","_isTokenValid","_callee6","_ref4","valid","_context6","_x13","Navbar","state","active","_this","context","updateUser","closeMenu","setState","_this2","react_default","createElement","className","role","aria-label","style","paddingLeft","paddingRight","href","aria-expanded","data-target","onClick","e","preventDefault","aria-hidden","backgroundColor","react_router_dom","to","Component","contextType","DestinationCard","_textarea","props","site","value","prevProps","event","textarea","autoFocus","placeholder","ref","c","onNoteSave","bind","disabled","name","DiveFlag","_ref$clickHandler","lat","lng","clickHandler","src","diveflag","alt","data-tooltip","boxShadow","cursor","DiveMap","diveSites","centerCoord","activeSite","setActiveSite","activeSiteCountry","activeSiteCity","onGoogleApiLoaded","defaultZoom","autoZoom","height","width","position","top","lib_default","bootstrapURLKeys","key","defaultCenter","yesIWantToUseGoogleMapApiInternals","maps","bounds","LatLngBounds","forEach","diveSite","extend","fitBounds","components_DiveFlag","right","color","src_DestinationCard","country","city","isLoggedIn","Destination","_useState","useState","_useState2","slicedToArray","setDiveSites","_useState3","_useState4","destination","setDestination","_useState5","_useState6","_props$match$params","match","useEffect","window","innerWidth","breadcrumb","Fragment","crumb","idx","zIndex","padding","components_DiveMap","Level","children","Countries","dest","margin","background","verticalAlign","num_divesite","Cities","Dest","_ref5","locationType","DestinationList_Countries","DestinationList_Cities","DestinationList_","_ref6","isLoading","destinations","hasMore","loadMoreHandler","DestinationList_Level","flexWrap","Array","fill","_","DestinationList_Dest","DestinationList","setIsLoading","setDestinations","setNext","push","String","alert","DestinationList_DestinationList_","urlObj","url","newList","URL","replace","origin","Login","setEmail","setPassword","setError","_submitHandler","history","message","onSubmit","type","onChange","target","class","withRouter","Consumer","Login_Login","assign","About","rel","distance","lat1","lon1","lat2","lon2","unit","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","MapPage","radius","searchCircle","setSearchCircle","setSearchCircleFromMap","center","getCenter","toJSON","bound","getBounds","latDist","west","east","lngDist","north","south","min","updateDiveSites","_updateDiveSites","page_size","include_location","border","addListener","DestinationPage","src_Destination","DestinationListPage","location","pathname","src_DestinationList","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","localStorage","setItem","getItem","tempUser","parse","then","isValid","Provider","objectSpread","src_Navbar","react_router","exact","render","component","Boolean","hostname","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d34d71c4.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEXSURBVHgBvZSBCYJAFIZ/j6goqDYoaoMGKGiRRgjawAYIWiBokIIGcAcdIDCCLAKtZxyked2d3fmBKMfzPT/f4znJC3xw3+0QrVaIfR+2iAGX5Q8b8zk6+316twkrPBwM0N5u04ueKyvMsWnPpAGW7NllNkMcBNJA0/bscTziPB7jttnIgw3ap786CUNcl0tUaZ/pcZX2X8NVlb1wqrl95LqQJilh75wYS1QSdw4HsH5fFpquWlq5tHqFMUUrU5QsHA6N2isZ5xOr2tO8kH1+WJWNMy9p2Du9Hlrr9ftDc/bahTlkEo5GSpNfm07R9Tw0F4v/CxNl7euTiX6PRej0HmV6LELHnjBWmKPae+OFCRV7K4U5v+yfW0isVFYNLj4AAAAASUVORK5CYII=\"","import React from 'react';\r\nimport { IUser } from './api'\r\n\r\nexport const DEFAULT_STATE = {\r\n    user: undefined\r\n}\r\nexport const AppContext = React.createContext<{ user?: IUser }>(DEFAULT_STATE)\r\n","// import { number } from \"prop-types\";\r\n\r\nexport interface IUser {\r\n  id: number;\r\n  username: string;\r\n  access_token: string;\r\n}\r\n\r\nexport interface ICity {\r\n  id: number;\r\n  lat: number;\r\n  lng: number;\r\n  divesite_set?: IDiveSite[];\r\n  zoom_level: number;\r\n  country_name?: string;\r\n}\r\n\r\nexport interface IDiveSite {\r\n  id: number;\r\n  lat: number;\r\n  lng: number;\r\n  name: string;\r\n  country_name?: string;\r\n  city_name?: string;\r\n}\r\n\r\nexport interface INote {\r\n  id: number;\r\n  content: string;\r\n}\r\n\r\nexport interface IUser {\r\n  id: number;\r\n  access_token: string;\r\n  username: string;\r\n}\r\n\r\nexport interface APIResults<T> {\r\n  count: number;\r\n  next: string | null;\r\n  previous: string | null;\r\n  results: T[];\r\n}\r\n\r\n\r\n// export enum LocationTypeEnum {\r\n//   cities = 'cities',\r\n//   countries = 'countries'\r\n// }\r\n\r\nexport async function loadJson(path: string, options:any = {}) {\r\n  \r\n  if (options.headers == null) {\r\n    options.headers = {}\r\n  }\r\n\r\n  options.headers['Content-Type'] = 'application/json'\r\n\r\n  const resp = await fetch(path, options)\r\n  if (resp.ok) {\r\n    const data = await resp.json()\r\n    return data\r\n  }\r\n\r\n  let error = ''\r\n  try {\r\n    const errorData = await resp.json() \r\n    error = errorData.error\r\n  } catch (e) {\r\n    error = resp.statusText\r\n  }\r\n  throw new Error(error)\r\n}\r\n\r\nasync function loadAuthJson(path:string , accessToken: string, options:any = {}) {\r\n  if (options.headers == null) {\r\n    options.headers = {}\r\n  }\r\n  options.headers['Authorization'] = `Bearer ${accessToken}` \r\n  return loadJson(path, options)\r\n}\r\n\r\nexport async function getCountries(params:{ limit: string } = { limit: '10' }): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams(params)\r\n  return loadJson(`/api/countries?${paramsObj.toString()}`)\r\n}\r\n\r\nexport async function getCities(params:{ country_name: string, limit: string } = { country_name: 'Thailand', limit: '10' }): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams(params)\r\n  const data = await loadJson(`/api/cities?${paramsObj.toString()}`)\r\n  data.results = data.results.map((datum: ICity) => {\r\n    datum.country_name = params.country_name\r\n    return datum\r\n  })\r\n  return data\r\n}\r\n\r\nexport async function getDestination(country_name:string, city_name:string): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams({ country_name, city_name, include_divesites: 'true' })\r\n  const data = await loadJson(`/api/cities?${paramsObj.toString()}`)\r\n  if (data.results.length > 0) {\r\n    data.results = data.results.map((result: ICity) => {\r\n      if (result.divesite_set == null) return result\r\n      result.divesite_set = result.divesite_set.map((datum: IDiveSite) => {\r\n        datum.country_name = country_name\r\n        datum.city_name = city_name\r\n        return datum\r\n      })\r\n      return result\r\n    })\r\n  }\r\n\r\n  return data\r\n}\r\n\r\nexport async function getDiveSites(query?:any) {\r\n  const queryObj = new URLSearchParams(query)\r\n  return loadJson('/api/divesites?' + queryObj.toString())\r\n}\r\n\r\nexport const Note = {\r\n  async updateNote({ diveSiteId, user, content }: { diveSiteId: number, user: IUser, content:string}): Promise<void> {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${user.access_token}`\r\n    }\r\n    const body = JSON.stringify({ content })\r\n    const data = await loadJson(`/api/notes/divesites/${diveSiteId}/users/${user.id}`, {\r\n      method: 'POST', \r\n      headers, \r\n      body\r\n    })\r\n    return data\r\n  },\r\n  async getNote({ diveSiteId, user }: { diveSiteId: number, user: IUser }): Promise<string> {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${user.access_token}`\r\n    }\r\n    const data = await loadJson(\r\n      `/api/notes/divesites/${diveSiteId}/users/${user.id}`, \r\n      { headers, methods: 'POST'}\r\n    )\r\n    if (data == null) {\r\n      return ''\r\n    }\r\n    return data.content\r\n  }\r\n}\r\n\r\nexport const auth = {\r\n  async register({ username, email, password }: { username: string, email: string, password: string}) {\r\n    const options = {\r\n      method: 'POST',\r\n      body: JSON.stringify({ username, email, password }),\r\n      headers: { 'Content-Type': 'application/json' }\r\n    }\r\n    const data = await loadJson('/auth/api-register', options)\r\n    console.log('data', data)\r\n    return this.login(email, password)\r\n  },\r\n  async login(email: string, password: string) {\r\n    const options = {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password }),\r\n      headers: { 'Content-Type': 'application/json' }\r\n    }\r\n    const data = await loadJson('/auth/api-login', options)\r\n    return data\r\n  },\r\n  async logout(accessToken: string) {\r\n    const options = {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${accessToken}`\r\n      }\r\n    }\r\n    const data = await loadJson('/auth/api-logout', options)\r\n    return data\r\n  },\r\n  async isTokenValid(accessToken: string): Promise<boolean> {\r\n    const { valid } = await loadAuthJson('/auth/check-token', accessToken)\r\n    return valid\r\n  }\r\n};","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AppContext } from \"./AppContext\";\r\nimport { auth } from \"./api\";\r\n\r\nclass Navbar extends React.Component {\r\n  static contextType = AppContext;\r\n  state = {\r\n    active: false\r\n  };\r\n\r\n  logout = async () => {\r\n    await auth.logout(this.context.user.access_token);\r\n    this.context.updateUser(null);\r\n  };\r\n\r\n  closeMenu = () => {\r\n    this.setState({ active: false });\r\n  };\r\n\r\n  render() {\r\n    // const { user } = this.context\r\n    return (\r\n      <nav\r\n        className=\"navbar is-dark\"\r\n        id=\"nav\"\r\n        role=\"navigation\"\r\n        aria-label=\"main navigation\"\r\n        style={{ paddingLeft: 10, paddingRight: 10 }}\r\n      >\r\n        <div className=\"navbar-brand\">\r\n          <a href=\"/\" className=\"navbar-item\">\r\n            <div className=\"title\" style={{ paddingRight: 20 }}>\r\n              Reefbase\r\n            </div>\r\n          </a>\r\n          <a\r\n            href=\"/\"\r\n            role=\"button\"\r\n            className={`navbar-burger burger ${\r\n              this.state.active ? \"is-active\" : \"\"\r\n            }`}\r\n            aria-label=\"menu\"\r\n            aria-expanded=\"false\"\r\n            data-target=\"navbarBasicExample\"\r\n            onClick={e => {\r\n              e.preventDefault();\r\n              this.setState({ active: !this.state.active });\r\n            }}\r\n          >\r\n            <span aria-hidden=\"true\" />\r\n            <span aria-hidden=\"true\" />\r\n            <span aria-hidden=\"true\" />\r\n          </a>\r\n        </div>\r\n        <div\r\n          className={`navbar-menu ${this.state.active ? \"is-active\" : \"\"}`}\r\n          style={{\r\n            backgroundColor: \"rgba(0,0,0,0)\"\r\n          }}\r\n        >\r\n          <div className=\"navbar-start\">\r\n            <Link className=\"navbar-item\" onClick={this.closeMenu} to=\"/about\">\r\n              About\r\n            </Link>\r\n            <Link\r\n              className=\"navbar-item\"\r\n              onClick={this.closeMenu}\r\n              to=\"/destinations\"\r\n            >\r\n              Destinations\r\n            </Link>\r\n            <Link\r\n              className=\"navbar-item\"\r\n              onClick={this.closeMenu}\r\n              to=\"/destinations/map\"\r\n            >\r\n              Map\r\n            </Link>\r\n          </div>\r\n          {/* {user != null ?\r\n                        <div className=\"navbar-end\">\r\n                            <a href=\"/\" className=\"navbar-item\">{user.username}</a>\r\n                            <a className=\"navbar-item\" onClick={this.logout}>Logout</a>\r\n                        </div>\r\n                        :\r\n                        <div className=\"navbar-end\">\r\n                            <Link className=\"navbar-item\" to=\"/login\">Login</Link>\r\n                        </div>\r\n                    } */}\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\nimport { IDiveSite, Note } from './api'\r\nimport { AppContext } from './AppContext'\r\n\r\ninterface IDestinationCardProps {\r\n    site: IDiveSite;\r\n    isLoggedIn: boolean;\r\n    country: string;\r\n    city: string;\r\n}\r\n\r\nclass DestinationCard extends React.Component<IDestinationCardProps, any> {\r\n    static contextType = AppContext\r\n    _textarea: any\r\n\r\n    async syncNote() {\r\n        const diveSiteId = this.props.site.id\r\n        const content = await Note.getNote({ diveSiteId, user: this.context.user })\r\n        this._textarea.value = content\r\n    }\r\n\r\n    async componentWillMount() {\r\n        if (this.context.user == null) return\r\n        // await this.syncNote()\r\n    }\r\n\r\n    async componentDidUpdate(prevProps: any) {\r\n        if (this.props.site.id !== prevProps.site.id) {\r\n            this._textarea.value = ''\r\n            // this.syncNote()\r\n        }\r\n    }\r\n\r\n    async onNoteSave(event: any) {\r\n        const diveSiteId = this.props.site.id\r\n        // TODO: check result and feedback UI\r\n        await Note.updateNote({ \r\n            diveSiteId, \r\n            user: this.context.user,\r\n            content: this._textarea.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {site} = this.props\r\n        if (site == null) {\r\n            return (\r\n                <div>\r\n                    <h2 className=\"title is-two\">No Dive Site Selected!</h2>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        let textarea\r\n        if (this.context.user != null) {\r\n            textarea = (\r\n                <div className='full-height'>\r\n                    <textarea \r\n                        autoFocus={true}\r\n                        className=\"textarea\" \r\n                        placeholder=\"Take notes here.\"\r\n                        ref={c => this._textarea = c}\r\n                    >\r\n                    </textarea>\r\n                    <button className='button' \r\n                        onClick={this.onNoteSave.bind(this)}>submit</button>\r\n                </div>\r\n            )\r\n        } else {\r\n            textarea = (\r\n                <div>\r\n                    <textarea \r\n                        className=\"textarea\" \r\n                        placeholder=\"Notes coming soon!\"\r\n                        // placeholder=\"Please login to take notes\" \r\n                        ref={c => this._textarea = c}\r\n                        disabled></textarea>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n        <div>\r\n            <h2 className=\"title is-two\">{site.name}</h2>\r\n            <h3 className=\"subtitle is-four\">{site.city_name}, {site.country_name}</h3>\r\n            { textarea }\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DestinationCard","import React from 'react';\r\nimport diveflag from '../diverflag.png'\r\nimport { IDiveSite } from '../api'\r\n\r\n\r\nconst DiveFlag = ({ site, lat, lng, clickHandler = () => { } }: { site: IDiveSite, lat: number, lng: number, clickHandler?: (site: IDiveSite) => void }) => {\r\n\r\n    return (\r\n        <img\r\n            className=\"tooltip\"\r\n            onClick={() => clickHandler(site)}\r\n            src={diveflag}\r\n            alt='Diver Down Flag'\r\n            data-tooltip={site.name}\r\n            style={{\r\n                boxShadow: '0px 4px 4px rgba(0, 0, 0, 0.25)',\r\n                cursor: 'pointer'\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nexport default DiveFlag","import React, { useState, useEffect } from 'react';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport DestinationCard from '../DestinationCard';\r\nimport {getDestination, IDiveSite, ICity} from '../api'\r\nimport DiveFlag from './DiveFlag'\r\n\r\n\r\n\r\nfunction DiveMap({ \r\n        diveSites, \r\n        centerCoord,\r\n        activeSite,\r\n        setActiveSite,\r\n        activeSiteCountry,\r\n        activeSiteCity,\r\n        onGoogleApiLoaded,\r\n        defaultZoom,\r\n        autoZoom\r\n    } : \r\n    { \r\n        diveSites: IDiveSite[], \r\n        centerCoord: { lat: number, lng: number},\r\n        activeSite?: IDiveSite,\r\n        setActiveSite?: (site?: IDiveSite)=>void,\r\n        activeSiteCountry?: string,\r\n        activeSiteCity?: string,\r\n        onGoogleApiLoaded?: ({ map , maps }: { map: any, maps: any }) => void\r\n        defaultZoom: number,\r\n        autoZoom?: boolean\r\n    } ) {\r\n\r\n    return (\r\n        <div>\r\n           <div style={{ height: '100vh', width: '100%', position: 'fixed', top: 0 }}>\r\n           {diveSites != null ?\r\n                <GoogleMapReact\r\n                    bootstrapURLKeys={{ key: 'AIzaSyCaxeoUHkl2GK3sKFaNvLfoRWMTm0EbzK0' }}\r\n                    defaultCenter={centerCoord}\r\n                    defaultZoom={defaultZoom}\r\n                    yesIWantToUseGoogleMapApiInternals\r\n                    onGoogleApiLoaded={({map, maps}) => {\r\n                        if (autoZoom === true) {\r\n                            const bounds = new maps.LatLngBounds()\r\n                            diveSites.forEach((diveSite) => {\r\n                                bounds.extend({ lat: diveSite.lat, lng: diveSite.lng })\r\n                            })\r\n                            map.fitBounds(bounds)\r\n                        }\r\n\r\n                        if (onGoogleApiLoaded != null) \r\n                            onGoogleApiLoaded({ map, maps })\r\n                    }}\r\n                >\r\n                {\r\n                    diveSites.map(site => <DiveFlag \r\n                        key={site.id} \r\n                        lat={site.lat} \r\n                        lng={site.lng} \r\n                        site={site} \r\n                        clickHandler={setActiveSite}/>\r\n                    )\r\n                }\r\n                </GoogleMapReact>\r\n           :false}\r\n            </div>\r\n            <div id=\"content\">\r\n            \r\n            {activeSite != null && activeSiteCountry != null && activeSiteCity != null &&\r\n            <section className=\"section\">\r\n                <div className=\"container is-fluid\">\r\n                    <div className=\"columns\">\r\n                        <div className=\"column is-three-quarters\"></div>\r\n                        <div className=\"column\">\r\n                            <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                                <span className=\"icon\"\r\n                                    style={{\r\n                                        position: 'absolute',\r\n                                        right: 15,\r\n                                        cursor: 'pointer',\r\n                                        color: '#363636'\r\n                                    }}\r\n                                    onClick={() => {\r\n                                        if (setActiveSite != null) setActiveSite(undefined)\r\n                                    }}\r\n                                >\r\n                                    <i className=\"far fa-times-circle\"></i>\r\n                                </span>\r\n                               <DestinationCard \r\n                                    country={activeSiteCountry}\r\n                                    city={activeSiteCity}\r\n                                    site={activeSite} \r\n                                    isLoggedIn={true} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DiveMap\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport GoogleMapReact from \"google-map-react\";\r\nimport diveflag from \"./diverflag.png\";\r\nimport DestinationCard from \"./DestinationCard\";\r\nimport { getDestination, IDiveSite, ICity } from \"./api\";\r\nimport DiveMap from \"./components/DiveMap\";\r\n\r\nconst Flag = ({\r\n  site,\r\n  lat,\r\n  lng,\r\n  clickHandler = () => {}\r\n}: {\r\n  site: IDiveSite;\r\n  lat: number;\r\n  lng: number;\r\n  clickHandler?: () => void;\r\n}) => {\r\n  return (\r\n    <img\r\n      className=\"tooltip\"\r\n      onClick={clickHandler}\r\n      src={diveflag}\r\n      alt=\"Diver Down Flag\"\r\n      data-tooltip={site.name}\r\n      style={{\r\n        boxShadow: \"0px 4px 4px rgba(0, 0, 0, 0.25)\",\r\n        cursor: \"pointer\"\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nfunction Destination(props: any) {\r\n  const [diveSites, setDiveSites] = useState<IDiveSite[]>([]);\r\n  const [destination, setDestination] = useState<ICity | null>(null);\r\n  const [activeSite, setActiveSite] = useState<any>(null);\r\n\r\n  const { country, city } = props.match.params\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      const data = await getDestination(country, city)\r\n      const result = data.results[0];\r\n      setDestination(result);\r\n      const diveSites = result.divesite_set || [];\r\n      setDiveSites(diveSites);\r\n      // only show on desktop\r\n      if (diveSites.length > 0 && window.innerWidth > 768) {\r\n        setActiveSite(diveSites[0]);\r\n      }\r\n    })();\r\n  }, [props.match.params.country, props.match.params.city]);\r\n\r\n  const breadcrumb = [\r\n      {\r\n          href: `/destinations`,\r\n          name: 'Country'\r\n      },\r\n    {\r\n        href: `/destinations/${country}`,\r\n        name: country\r\n    },\r\n    {\r\n        href:`/destinations/${country}/${city}`,\r\n        name: city\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <div className=\"level\">\r\n        <nav className=\"breadcrumb\" aria-label=\"breadcrumbs\">\r\n          <ul>\r\n            {breadcrumb.map((crumb, idx) => (\r\n              <li\r\n                style={{zIndex: 10}}\r\n                key={idx}\r\n                className={` ${idx === breadcrumb.length - 1 ? \"is-active\" : \"\"}`}\r\n              >\r\n                <Link\r\n                  to={crumb.href}\r\n                  className=\"title is-5\"\r\n                  style={{ padding: \"10px\" }}\r\n                >\r\n                  {crumb.name}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n      <div>\r\n        {destination != null && diveSites != null && (\r\n          <DiveMap\r\n            diveSites={diveSites}\r\n            activeSite={activeSite}\r\n            centerCoord={{ lat: destination.lat, lng: destination.lng }}\r\n            activeSiteCountry={\"\"}\r\n            activeSiteCity={\"\"}\r\n            setActiveSite={(activeSite: any) => setActiveSite(activeSite)}\r\n            autoZoom={true}\r\n            defaultZoom={8}\r\n          />\r\n        )}\r\n\r\n        {/* <div style={{ height: '100vh', width: '100%', position: 'fixed', top: 0 }}>\r\n           {destination != null ?\r\n                <GoogleMapReact\r\n                    bootstrapURLKeys={{ key: 'AIzaSyCaxeoUHkl2GK3sKFaNvLfoRWMTm0EbzK0' }}\r\n                    defaultCenter={destination}\r\n                    defaultZoom={destination.zoom_level}\r\n                >\r\n                {\r\n                    diveSites.map(site => <Flag \r\n                        key={site.id} \r\n                        lat={site.lat} \r\n                        lng={site.lng} \r\n                        site={site} \r\n                        clickHandler={() => {setActiveSite(site)}}/>\r\n                    )\r\n                }\r\n                </GoogleMapReact>\r\n           :false}\r\n            </div>\r\n            <div id=\"content\">\r\n            \r\n            {activeSite != null ?\r\n            <section className=\"section\">\r\n                <div className=\"container is-fluid\">\r\n                    <div className=\"columns\">\r\n                        <div className=\"column is-three-quarters\"></div>\r\n                        <div className=\"column\">\r\n                            <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                               <DestinationCard \r\n                                    country={props.match.params.country}\r\n                                    city={props.match.params.city}\r\n                                    site={activeSite} \r\n                                    isLoggedIn={true} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            :null}\r\n            </div> */}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Destination;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom'\r\nimport { getCountries, getCities, ICity, loadJson } from './api'\r\n\r\n\r\nconst Level = (props: any) => <div className=\"level\">{props.children}</div>\r\n\r\nfunction DestinationList(props: { locationType: string, country?: string }) {\r\n    const { locationType, country } = props\r\n    const [isLoading, setIsLoading] = useState(true)\r\n    const [destinations, setDestinations] = useState<ICity[]>([])\r\n    const [next, setNext] = useState(null as string | null)\r\n\r\n    let breadcrumb = [{ name: 'Countries', href: '/destinations' }]\r\n    if (country != null) {\r\n        breadcrumb.push({\r\n            name: country,\r\n            href: `/destinations/${country}`\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        (async function () {\r\n            try {\r\n                let data = null\r\n                if (locationType === 'countries') {\r\n\r\n                    data = await getCountries()\r\n                } else {\r\n                    data = await getCities({ country_name: String(props.country), limit: '10' })\r\n                }\r\n                setNext(data.next)\r\n                setDestinations(data.results)\r\n                setIsLoading(false)\r\n            } catch (error) {\r\n                alert(error)\r\n            }\r\n        })()\r\n    }, [locationType, props.country])\r\n\r\n    return (\r\n        <DestinationList_ \r\n            breadcrumb={breadcrumb}\r\n            isLoading={isLoading} \r\n            destinations={destinations} \r\n            locationType={locationType}\r\n            hasMore={next != null}\r\n            loadMoreHandler={async () => {\r\n                if (next == null) return\r\n                const urlObj = new URL(next)\r\n                // fix different host in development\r\n                const url = urlObj.href.replace(urlObj.origin, '')\r\n\r\n                const data = await loadJson(url)\r\n                data.results = data.results.map((datum: ICity) => {\r\n                    datum.country_name = country\r\n                    return datum\r\n                })\r\n\r\n                const newList = destinations.concat(data.results)\r\n                setDestinations(newList)\r\n                setNext(data.next)\r\n            }}\r\n        />\r\n    );\r\n}\r\n// TODO: better abstraction of list\r\n\r\nconst Countries = ({ dest }: { dest: any }) => (\r\n    <Link className=\"box\"\r\n        to={`/destinations/${dest.name}`}\r\n        style={{ margin: 10, height: 250, width: 250, background: '#102D54' }}\r\n    >\r\n        <div className=\"title is-4\"\r\n            style={{ color: 'white', height: '100%', verticalAlign: 'center' }}>\r\n            {dest.name} <span className=\"tag is-dark\">{dest.num_divesite} divesites</span>\r\n        </div>\r\n    </Link>\r\n)\r\n\r\nconst Cities = ({ dest }: { dest: any }) => (\r\n    <Link className=\"box\"\r\n        to={`/destinations/${dest.country_name}/${dest.name}`}\r\n        style={{ margin: 10, height: 250, width: 250, background: '#102D54' }}\r\n    >\r\n        <div className=\"title is-4\"\r\n            style={{ color: 'white', height: '100%', verticalAlign: 'center' }}>\r\n            {dest.name} <span className=\"tag is-dark\">{dest.num_divesite} divesites</span>\r\n\r\n        </div>\r\n    </Link>\r\n)\r\n\r\nconst Dest = ({ dest, locationType }: { dest: any, locationType: string }) => {\r\n    if (locationType === 'countries') return <Countries dest={dest} />\r\n    return <Cities dest={dest} />\r\n}\r\n\r\ninterface IBreadcrumb {\r\n    href: string;\r\n    name: string;\r\n}\r\n\r\nexport const DestinationList_ = ({ breadcrumb, isLoading, destinations, locationType, hasMore, loadMoreHandler } : \r\n    {\r\n        breadcrumb: IBreadcrumb[],\r\n        isLoading: boolean, \r\n        destinations: ICity[], \r\n        locationType: string,\r\n        hasMore: boolean,\r\n        loadMoreHandler: Function \r\n    }) => (\r\n    <div className=\"section\">\r\n        <div className=\"container\">\r\n            <Level>\r\n                <nav className=\"breadcrumb\" aria-label=\"breadcrumbs\">\r\n                    <ul>\r\n                    {\r\n                        breadcrumb.map((crumb, idx) =>\r\n                            <li key={idx} className={idx === (breadcrumb.length - 1) ? 'is-active': ''}>\r\n                                <Link to={crumb.href} className='title is-3' style={{ padding: '10px'}}>{ crumb.name }</Link>\r\n                            </li>\r\n                        )\r\n                    }\r\n                    </ul>\r\n                </nav>\r\n            </Level>\r\n            <Level>\r\n                <div className=\"tile is-parent\" style={{ flexWrap: 'wrap' }}>\r\n                    { isLoading ?\r\n                        Array(10).fill(null).map((_) =>\r\n                            <div className=\"box is-loading\"\r\n                                style={{ margin: 10, height: 250, width: 250, background: '#102D54' }}\r\n                            >\r\n                                <div className=\"title is-4\"\r\n                                    style={{ color: 'white', height: '100%', verticalAlign: 'center' }}>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                        :\r\n                        destinations.map(dest => <Dest dest={dest} key={dest.id} locationType={locationType}/>)\r\n                    }\r\n                    { hasMore ?\r\n                    <button className=\"box\"\r\n                            style={{ margin: 10, height: 250, width: 250, background: '#487fca', cursor: 'pointer' }}\r\n                            onClick={() =>  loadMoreHandler()}\r\n                        >\r\n                            <div className=\"title is-4\" style={{ color: 'white' }}>More</div>\r\n                        </button>\r\n                    : null\r\n                    }\r\n \r\n                </div>\r\n            </Level>\r\n        </div>\r\n    </div>\r\n)\r\n\r\n\r\n\r\nexport default DestinationList;\r\n","import React, { useState } from 'react';\r\nimport { auth } from './api.ts'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { AppContext } from './AppContext.tsx'\r\n\r\nconst Login = (props) => {\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [error, setError] = useState(null)\r\n\r\n    function handleEmailChange(event) {\r\n        setEmail(event.target.value)\r\n    }\r\n\r\n    function handlePasswordChange(event) { \r\n        setPassword(event.target.value)\r\n    }\r\n\r\n    async function submitHandler(e) {\r\n        e.preventDefault()\r\n        try {\r\n            const user = await auth.login(email, password)\r\n            props.context.updateUser(user)\r\n            props.history.push('/')\r\n        } catch (error) {\r\n            setError(error.message)\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={submitHandler}>\r\n            <h3 className=\"title has-text-grey\">Login</h3>\r\n            <div className=\"box\">\r\n                <div className=\"field\">\r\n                    <p className=\"control has-icons-left\">\r\n                        <input className=\"input\" type=\"email\" placeholder=\"Email\"\r\n                            value={email}\r\n                            onChange={handleEmailChange}\r\n                        />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-envelope\"></i>\r\n                        </span>\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"field\">\r\n                    <div className=\"control has-icons-left\">\r\n                        <input className=\"input\" type=\"password\" \r\n                        placeholder=\"Password\" value={password} onChange={handlePasswordChange}/>\r\n                        <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-lock\"></i>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <button className=\"button is-block is-info is-fullwidth\" type='submit' >\r\n                    Login</button>\r\n                {error != null ?\r\n                <p class=\"help is-danger\">{error}</p>\r\n                :null}\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\n\r\n// const Register = (props) => {\r\n//     const [email, setEmail] = useState('')\r\n//     const [password, setPassword] = useState('')\r\n//     const [username, setUsername] = useState('')\r\n//     const [error, setError] = useState(null)\r\n\r\n//     function handleEmailChange(event) {\r\n//         setEmail(event.target.value)\r\n//     }\r\n\r\n//     function handlePasswordChange(event) { \r\n//         setPassword(event.target.value)\r\n//     }\r\n\r\n//     function handleUsernameChange(event) { \r\n//         setUsername(event.target.value)\r\n//     }\r\n//     async function submitHandler(e) {\r\n//         e.preventDefault()\r\n//         try {\r\n//             const user = await auth.register({ username, email, password })\r\n//             props.context.updateUser(user)\r\n//             props.history.push('/')\r\n//         } catch (error) {\r\n//             setError(error.message)\r\n//         }\r\n\r\n//         return false\r\n//     }\r\n\r\n\r\n//     return (\r\n//         <form onSubmit={submitHandler}>\r\n//             <h3 className=\"title has-text-grey\">Register</h3>\r\n//             <div className=\"box\">\r\n//                 <div className=\"field\">\r\n//                     <p className=\"control has-icons-left\">\r\n//                         <input className=\"input\" type=\"text\" placeholder=\"Username\"\r\n//                             value={username}\r\n//                             onChange={handleUsernameChange}\r\n//                         />\r\n//                         <span className=\"icon is-small is-left\">\r\n//                             <i className=\"fas fa-user\"></i>\r\n//                         </span>\r\n//                     </p>\r\n//                 </div>\r\n//                 <div className=\"field\">\r\n//                     <p className=\"control has-icons-left\">\r\n//                         <input className=\"input\" type=\"email\" placeholder=\"Email\"\r\n//                             value={email}\r\n//                             onChange={handleEmailChange}\r\n//                         />\r\n//                         <span className=\"icon is-small is-left\">\r\n//                             <i className=\"fas fa-envelope\"></i>\r\n//                         </span>\r\n//                     </p>\r\n//                 </div>\r\n\r\n//                 <div className=\"field\">\r\n//                     <div className=\"control has-icons-left\">\r\n//                         <input className=\"input\"\r\n//                             type=\"password\" \r\n//                             placeholder=\"Password\" \r\n//                             value={password} \r\n//                             onChange={handlePasswordChange}\r\n//                         />\r\n//                         <span className=\"icon is-small is-left\">\r\n//                         <i className=\"fas fa-lock\"></i>\r\n//                         </span>\r\n//                     </div>\r\n//                 </div>\r\n//                 <button \r\n//                     className=\"button is-block is-info is-fullwidth\" \r\n//                     submit='submit' \r\n//                     >Register</button>\r\n//             </div>\r\n//             {error != null ?\r\n//                 <p class=\"help is-danger\">{error}</p>\r\n//                 :null}\r\n//         </form>\r\n//     )\r\n// }\r\n\r\n            \r\nconst LoginPage = (props) => {\r\n    return (\r\n        <AppContext.Consumer>\r\n            {context => \r\n                <section className=\"hero is-fullheight\">\r\n                <div className=\"hero-body\">\r\n                    <div className=\"container has-text-centered\">\r\n                        <div className=\"column is-4 is-offset-4\">\r\n                            <Login {...props} context={context}/>\r\n                        </div>\r\n                        {/* <div className=\"column is-4 is-offset-4\">\r\n                            <Register {...props} context={context} />\r\n                        </div> */}\r\n                    </div>\r\n                </div>\r\n            </section>}\r\n        </AppContext.Consumer>\r\n\r\n    )\r\n}\r\n\r\nexport default withRouter(LoginPage)\r\n\r\n","import React from 'react'\r\n\r\nconst About = () =>\r\n    <div className=\"section\">\r\n        <div className=\"container\">\r\n            <div className=\"columns\">\r\n                <div className=\"column is-half is-offset-one-quarter\">\r\n                    <h2 className=\"title is-2\">About</h2>\r\n                    <p>The goal of <a href=\"/\" className=\"has-text-weight-bold\">Reefbase</a> is to be a place where scuba divers can collect information about a dive site before, during, and after a diving trip.</p><br />\r\n                    <p>Currently, the application is in development mode, so things will change and data could get lost.</p><br />\r\n                    <p>The dive site geo GPS coordinate are from <a href=\"http://divesites.com\" target=\"_blank\" rel=\"noopener noreferrer\">divesites.com</a></p><br />\r\n                    <p>Created by <a href=\"https://harinsang.com\" target=\"_blank\" rel=\"noopener noreferrer\">Harin Sanghirun</a>.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\nexport default About\r\n","//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n//:::                                                                         :::\r\n//:::  This routine calculates the distance between two points (given the     :::\r\n//:::  latitude/longitude of those points). It is being used to calculate     :::\r\n//:::  the distance between two locations using GeoDataSource (TM) prodducts  :::\r\n//:::                                                                         :::\r\n//:::  Definitions:                                                           :::\r\n//:::    South latitudes are negative, east longitudes are positive           :::\r\n//:::                                                                         :::\r\n//:::  Passed to function:                                                    :::\r\n//:::    lat1, lon1 = Latitude and Longitude of point 1 (in decimal degrees)  :::\r\n//:::    lat2, lon2 = Latitude and Longitude of point 2 (in decimal degrees)  :::\r\n//:::    unit = the unit you desire for results                               :::\r\n//:::           where: 'M' is statute miles (default)                         :::\r\n//:::                  'K' is kilometers                                      :::\r\n//:::                  'N' is nautical miles                                  :::\r\n//:::                                                                         :::\r\n//:::  Worldwide cities and other features databases with latitude longitude  :::\r\n//:::  are available at https://www.geodatasource.com                         :::\r\n//:::                                                                         :::\r\n//:::  For enquiries, please contact sales@geodatasource.com                  :::\r\n//:::                                                                         :::\r\n//:::  Official Web site: https://www.geodatasource.com                       :::\r\n//:::                                                                         :::\r\n//:::               GeoDataSource.com (C) All Rights Reserved 2018            :::\r\n//:::                                                                         :::\r\n//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n\r\nfunction distance(lat1, lon1, lat2, lon2, unit) {\r\n\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\treturn 0;\r\n\t}\r\n\telse {\r\n\t\tvar radlat1 = Math.PI * lat1/180;\r\n\t\tvar radlat2 = Math.PI * lat2/180;\r\n\t\tvar theta = lon1-lon2;\r\n\t\tvar radtheta = Math.PI * theta/180;\r\n\t\tvar dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\tif (dist > 1) {\r\n\t\t\tdist = 1;\r\n\t\t}\r\n\t\tdist = Math.acos(dist);\r\n\t\tdist = dist * 180/Math.PI;\r\n\t\tdist = dist * 60 * 1.1515;\r\n\t\tif (unit==\"K\") { dist = dist * 1.609344 }\r\n\t\tif (unit==\"N\") { dist = dist * 0.8684 }\r\n\t\treturn dist;\r\n\t}\r\n}\r\n\r\nexport default distance","import React, { useState, useEffect } from \"react\";\r\nimport DiveMap from \"./components/DiveMap\";\r\nimport distance from \"./distance\";\r\nimport { getDiveSites, IDiveSite } from \"./api\";\r\n\r\nconst MapPage = function(props: any) {\r\n  const [activeSite, setActiveSite] = useState(null as any)\r\n  const [searchCircle, setSearchCircle] = useState({\r\n    lat: 26.5293775, //florida\r\n    lng: -82.8939276,\r\n    radius: 240\r\n  });\r\n  const [diveSites, setDiveSites] = useState([] as IDiveSite[]);\r\n\r\n  function setSearchCircleFromMap(map: any) {\r\n    const center = map.getCenter().toJSON();\r\n    const bound = map.getBounds().toJSON();\r\n    const latDist = distance(bound.west, 0, bound.east, 0, \"K\");\r\n    const lngDist = distance(0, bound.north, 0, bound.south, \"K\");\r\n    const radius = Math.min(latDist, lngDist);\r\n    center.radius = radius;\r\n    // console.log('set circle to', center)\r\n    setSearchCircle(center);\r\n  }\r\n\r\n  function onLoad({ map, maps }: { map: any; maps: any }) {\r\n    setSearchCircleFromMap(map);\r\n\r\n    map.addListener(\"dragend\", () => setSearchCircleFromMap(map));\r\n    map.addListener(\"zoom_changed\", () => setSearchCircleFromMap(map));\r\n  }\r\n\r\n  async function updateDiveSites() {\r\n    const query = Object.assign({}, searchCircle) as any;\r\n    query.page_size = 100;\r\n    query.include_location = \"true\";\r\n\r\n    const data = await getDiveSites(query);\r\n    // console.log('new dive sites', data)\r\n\r\n    // const center: IDiveSite = {\r\n    //     id: 1,\r\n    //     lat: searchCircle.lat,\r\n    //     lng: searchCircle.lng,\r\n    //     name: 'center',\r\n    //     destination: '',\r\n    //     country: ''\r\n    // }\r\n\r\n    setDiveSites(data.results);\r\n    // setDiveSites([center])\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      updateDiveSites();\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container is-fluid\">\r\n          <div className=\"columns\">\r\n              <div className=\"column is-two-fifths\"></div>\r\n              <div className=\"column is-one-fifths\">\r\n                  <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                  <button\r\n                      className=\"button\"\r\n                      style={{zIndex:10, border: 'none', background: 'rgba(21,60,106,0.9)', color: 'white'}}\r\n                      onClick={() => updateDiveSites()}\r\n                  >\r\n                      Redo Search Current Area\r\n                  </button>\r\n                  </div>\r\n              </div>\r\n              <div className=\"column is-two-fifths\"></div>\r\n          </div>\r\n      </div>\r\n      <DiveMap\r\n        diveSites={diveSites}\r\n        activeSite={activeSite}\r\n        centerCoord={{ lat: searchCircle.lat, lng: searchCircle.lng }}\r\n        activeSiteCountry={\"\"}\r\n        activeSiteCity={\"\"}\r\n        setActiveSite={(activeSite: any) => setActiveSite(activeSite)}\r\n        onGoogleApiLoaded={onLoad}\r\n        defaultZoom={8}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MapPage;\r\n","import React from \"react\";\nimport \"./App.scss\";\nimport Navbar from \"./Navbar\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect,\n  Switch\n} from \"react-router-dom\";\nimport Destination from \"./Destination\";\nimport DestinationList from \"./DestinationList\";\nimport Login from \"./Login\";\nimport About from \"./About\";\nimport MapPage from \"./MapPage\";\nimport { AppContext, DEFAULT_STATE } from \"./AppContext\";\nimport { IUser, auth } from \"./api\";\n\nfunction DestinationPage(props: any) {\n  return <Destination {...props} />;\n}\n\nfunction DestinationListPage(props: any) {\n  const pathname = props.location.pathname;\n  if (pathname === \"/destinations\") {\n    return <DestinationList locationType=\"countries\" />;\n  }\n  return (\n    <DestinationList\n      locationType=\"cities\"\n      country={props.match.params.country}\n    />\n  );\n}\n\nclass App extends React.Component {\n  state = DEFAULT_STATE;\n  constructor(props: any) {\n    super(props);\n    let user = localStorage.getItem(\"user\");\n    if (user != null) {\n      let tempUser = JSON.parse(user) || {};\n      if (tempUser.access_token != null) {\n        this.state.user = tempUser;\n        auth.isTokenValid(tempUser.access_token).then(isValid => {\n          if (isValid === false) {\n            this.updateUser(null);\n          }\n        });\n      }\n    }\n  }\n\n  updateUser = (user: IUser | null) => {\n    this.setState({ user });\n    localStorage.setItem(\"user\", JSON.stringify(user));\n  };\n\n  render() {\n    return (\n      <AppContext.Provider\n        value={{\n          ...this.state,\n          updateUser: this.updateUser\n        }}\n      >\n        <Router>\n          <div>\n            <Navbar />\n            <Route\n              exact\n              path=\"/\"\n              render={() => <Redirect to=\"/destinations\" />}\n            />\n            <Route path=\"/login/\" component={Login} />\n            <Route path=\"/about/\" component={About} />\n            <Route\n              path=\"/destinations/\"\n              exact\n              component={DestinationListPage}\n            />\n            <Switch>\n              <Route path=\"/destinations/map\" exact component={MapPage} />\n              <Route\n                path=\"/destinations/:country\"\n                exact\n                component={DestinationListPage}\n              />\n              <Route\n                path=\"/destinations/:country/:city\"\n                exact\n                component={DestinationPage}\n              />\n            </Switch>\n          </div>\n        </Router>\n      </AppContext.Provider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('page'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}