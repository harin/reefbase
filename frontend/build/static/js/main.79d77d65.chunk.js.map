{"version":3,"sources":["diverflag.png","AppContext.tsx","Navbar.tsx","api.ts","DestinationCard.tsx","components/DiveMarker.tsx","components/DiveMap.tsx","components/ErrorBoundary.js","Destination.tsx","DestinationList.tsx","About.tsx","distance.js","MapPage.tsx","components/DiveSiteSelect.tsx","components/DiveLogForm.tsx","components/DiveLogsList.tsx","components/CardRight.tsx","DiveLogsPage.tsx","components/ErrorView.tsx","App.tsx","serviceWorker.js","index.js"],"names":["module","exports","DEFAULT_STATE","user","undefined","hasError","AppContext","React","createContext","Navbar","state","active","logout","_callee","regenerator_default","a","wrap","_context","prev","next","_this","context","updateUser","stop","closeMenu","setState","_this2","this","react_default","createElement","className","id","role","aria-label","style","paddingLeft","paddingRight","href","concat","aria-expanded","data-target","onClick","e","preventDefault","aria-hidden","backgroundColor","react_router_dom","to","Component","contextType","loadJson","_x","_loadJson","apply","arguments","_callee3","path","options","resp","data","error","errorData","_args3","_context3","length","headers","fetch","sent","ok","json","abrupt","t0","statusText","Error","getCountries","_getCountries","_callee5","params","paramsObj","_args5","_context5","page_size","URLSearchParams","toString","getCities","_getCities","_callee6","_args6","_context6","country_name","results","map","datum","getDestination","_x4","_x5","_getDestination","_callee7","city_name","_context7","include_divesites","result","divesite_set","diveSiteParser","divesite","min_temp_by_month","JSON","parse","max_temp_by_month","meta","getDiveSites","_x6","_getDiveSites","_callee8","query","queryObj","_context8","getDiveLogs","_getDiveLogs","_callee10","_context10","getCookie","name","cookieValue","document","cookie","cookies","split","i","trim","substring","decodeURIComponent","createDiveLog","_x8","_createDiveLog","_callee11","diveLog","csrftoken","errors","formikError","_context11","Headers","append","method","body","stringify","status","Object","keys","forEach","key","Note","updateNote","_updateNote","asyncToGenerator","mark","_ref","diveSiteId","content","Content-Type","Authorization","access_token","_x9","getNote","_getNote","_callee2","_ref2","_context2","methods","_x10","DestinationCard","_textarea","props","site","value","prevProps","event","console","log","autoFocus","placeholder","ref","c","onNoteSave","bind","disabled","tempData","minTemp","maxTemp","push","es6","width","height","margin","left","type","dataKey","calculateMarkerSize","zoom","size","timeout","DiveFlag","lat","lng","_ref$clickHandler","clickHandler","data-tooltip","borderRadius","display","cursor","boxShadow","border","googleMapStyle","mapStyle","withRouter","locations","centerCoord","setActiveLocation","activeSite","onGoogleApiLoaded","activeSiteCountry","activeSiteCity","defaultZoom","autoZoom","children","location","history","onClickUpdate","meanBy","hasLocationQuery","_querystring$parse","querystring","search","Number","Fragment","zIndex","background","color","position","top","lib_default","styles","bootstrapURLKeys","defaultCenter","hoverDistance","yesIWantToUseGoogleMapApiInternals","maps","bounds","LatLngBounds","setCenter","setZoom","diveSite","extend","fitBounds","getZoom","addListener","clearTimeout","setTimeout","_map$getCenter","getCenter","replace","pathname","DiveMarker","ErrorBoundary","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","info","Destination","_useState","useState","_useState2","slicedToArray","diveSites","setDiveSites","_useState3","_useState4","destination","setDestination","_useState5","_useState6","setActiveSite","_props$match$params","match","country","city","useEffect","window","innerWidth","breadcrumb","crumb","idx","padding","components_DiveMap","right","components_ErrorBoundary","src_DestinationCard","DestinationList_","_ref3","isLoading","destinations","locationType","hasMore","loadMoreHandler","DestinationList","setIsLoading","setDestinations","setNext","String","alert","DestinationList_DestinationList_","urlObj","url","newList","URL","origin","About","target","rel","distance","lat1","lon1","lat2","lon2","unit","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","MapPage","_useState7","radius","_useState8","searchCircle","setSearchCircle","_useState9","_useState10","setSearchCircleFromMap","center","toJSON","bound","getBounds","latDist","west","east","lngDist","north","south","min","updateDiveSites","_updateDiveSites","assign","include_location","DiveSiteSelect","handleChange","searchTimeout","setSearchTimeout","onChange","newTimeout","keyword","d","DiveLogForm","onSubmitted","onCanceled","formik_esm","initialValues","date","Date","toISOString","divesite_id","rating","notes","onSubmit","values","setErrors","setSubmitting","_x2","data-display-mode","data-is-range","data-close-on-select","htmlFor","components_DiveSiteSelect","DiveLogsList","diveLogs","flexGrow","CardRight","DiveLogsPage","setDiveLogs","isCreate","setIsCreate","components_CardRight","components_DiveLogForm","reload","components_DiveLogsList","ErrorView","DestinationPage","src_Destination","DestinationListPage","src_DestinationList","App","localStorage","setItem","src_Navbar","components_ErrorView","Provider","objectSpread","react_router","exact","render","component","Boolean","hostname","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.79d77d65.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEXSURBVHgBvZSBCYJAFIZ/j6goqDYoaoMGKGiRRgjawAYIWiBokIIGcAcdIDCCLAKtZxyked2d3fmBKMfzPT/f4znJC3xw3+0QrVaIfR+2iAGX5Q8b8zk6+316twkrPBwM0N5u04ueKyvMsWnPpAGW7NllNkMcBNJA0/bscTziPB7jttnIgw3ap786CUNcl0tUaZ/pcZX2X8NVlb1wqrl95LqQJilh75wYS1QSdw4HsH5fFpquWlq5tHqFMUUrU5QsHA6N2isZ5xOr2tO8kH1+WJWNMy9p2Du9Hlrr9ftDc/bahTlkEo5GSpNfm07R9Tw0F4v/CxNl7euTiX6PRej0HmV6LELHnjBWmKPae+OFCRV7K4U5v+yfW0isVFYNLj4AAAAASUVORK5CYII=\"","import React from 'react';\r\nimport { IUser } from './api'\r\n\r\nexport const DEFAULT_STATE = {\r\n    user: undefined,\r\n    hasError: false\r\n}\r\nexport const AppContext = React.createContext<{ user?: IUser }>(DEFAULT_STATE)\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AppContext } from \"./AppContext\";\r\n\r\nclass Navbar extends React.Component {\r\n  static contextType = AppContext;\r\n  state = {\r\n    active: false\r\n  };\r\n\r\n  logout = async () => {\r\n    // await auth.logout(this.context.user.access_token);\r\n    this.context.updateUser(null);\r\n  };\r\n\r\n  closeMenu = () => {\r\n    this.setState({ active: false });\r\n  };\r\n\r\n  render() {\r\n    // const { user } = this.context\r\n    return (\r\n      <nav\r\n        className=\"navbar is-dark\"\r\n        id=\"nav\"\r\n        role=\"navigation\"\r\n        aria-label=\"main navigation\"\r\n        style={{ paddingLeft: 10, paddingRight: 10 }}\r\n      >\r\n        <div className=\"navbar-brand\">\r\n          <a href=\"/\" className=\"navbar-item\">\r\n            <div className=\"title tooltip\" style={{ paddingRight: 20 }}>\r\n              Reefbase\r\n            </div>\r\n          </a>\r\n          <a\r\n            href=\"/\"\r\n            role=\"button\"\r\n            className={`navbar-burger burger ${\r\n              this.state.active ? \"is-active\" : \"\"\r\n            }`}\r\n            aria-label=\"menu\"\r\n            aria-expanded=\"false\"\r\n            data-target=\"navbarBasicExample\"\r\n            onClick={e => {\r\n              e.preventDefault();\r\n              this.setState({ active: !this.state.active });\r\n            }}\r\n          >\r\n            <span aria-hidden=\"true\" />\r\n            <span aria-hidden=\"true\" />\r\n            <span aria-hidden=\"true\" />\r\n          </a>\r\n        </div>\r\n        <div\r\n          className={`navbar-menu ${this.state.active ? \"is-active\" : \"\"}`}\r\n          style={{\r\n            backgroundColor: \"rgba(0,0,0,0)\"\r\n          }}\r\n        >\r\n          <div className=\"navbar-start\">\r\n            <Link className=\"navbar-item\" onClick={this.closeMenu} to=\"/about\">\r\n              About\r\n            </Link>\r\n            <Link\r\n              className=\"navbar-item\"\r\n              onClick={this.closeMenu}\r\n              to=\"/destinations\"\r\n            >\r\n              Destinations\r\n            </Link>\r\n            <Link\r\n              className=\"navbar-item\"\r\n              onClick={this.closeMenu}\r\n              to=\"/destinations/map\"\r\n            >\r\n              Map\r\n            </Link>\r\n          </div>\r\n          {/* {user != null ?\r\n                        <div className=\"navbar-end\">\r\n                            <a href=\"/\" className=\"navbar-item\">{user.username}</a>\r\n                            <a className=\"navbar-item\" onClick={this.logout}>Logout</a>\r\n                        </div>\r\n                        :\r\n                        <div className=\"navbar-end\">\r\n                            <Link className=\"navbar-item\" to=\"/login\">Login</Link>\r\n                        </div>\r\n                    } */}\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navbar;\r\n","import { Primitive } from \"lodash\";\r\n\r\n// import { number } from \"prop-types\";\r\n\r\nexport interface IUser {\r\n  id: number;\r\n  username: string;\r\n  access_token: string;\r\n}\r\n\r\nexport interface ILocation {\r\n  id: number;\r\n  name: string;\r\n  lat: number;\r\n  lng: number;\r\n}\r\n\r\nexport interface ICity extends ILocation {\r\n  divesite_set?: IDiveSite[];\r\n  zoom_level: number;\r\n  country_name?: string;\r\n}\r\n\r\nexport interface IDiveSite extends ILocation {\r\n  id: number;\r\n  lat: number;\r\n  lng: number;\r\n  name: string;\r\n  country_name?: string;\r\n  city_name?: string;\r\n  min_temp?: number;\r\n  max_temp?: number;\r\n  min_temp_by_month?: number[];\r\n  max_temp_by_month?: number[];\r\n}\r\n\r\nexport interface INote {\r\n  id: number;\r\n  content: string;\r\n}\r\n\r\nexport interface IUser {\r\n  id: number;\r\n  access_token: string;\r\n  username: string;\r\n}\r\n\r\nexport interface APIResults<T> {\r\n  count: number;\r\n  next: string | null;\r\n  previous: string | null;\r\n  results: T[];\r\n}\r\n\r\nexport interface IDiveLog {\r\n  date: string;\r\n  user_id?: number; // some times can use session instead\r\n  divesite_id: number;\r\n  time?: string;\r\n  observations?: string;\r\n  meta?: string;\r\n  rating?: number\r\n}\r\n\r\n// export enum LocationTypeEnum {\r\n//   cities = 'cities',\r\n//   countries = 'countries'\r\n// }\r\n\r\nexport async function loadJson(path: string, options: any = {}) {\r\n  if (options.headers == null) {\r\n    options.headers = {};\r\n  }\r\n\r\n  options.headers[\"Content-Type\"] = \"application/json\";\r\n\r\n  const resp = await fetch(path, options);\r\n  if (resp.ok) {\r\n    const data = await resp.json();\r\n    return data;\r\n  }\r\n\r\n  let error = \"\";\r\n  try {\r\n    const errorData = await resp.json();\r\n    error = errorData.error;\r\n  } catch (e) {\r\n    error = resp.statusText;\r\n  }\r\n  throw new Error(error);\r\n}\r\n\r\nasync function loadAuthJson(\r\n  path: string,\r\n  accessToken: string,\r\n  options: any = {}\r\n) {\r\n  if (options.headers == null) {\r\n    options.headers = {};\r\n  }\r\n  options.headers[\"Authorization\"] = `Bearer ${accessToken}`;\r\n  return loadJson(path, options);\r\n}\r\n\r\nexport async function getCountries(\r\n  params: { page_size: string } = { page_size: \"200\" }\r\n): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams(params);\r\n  return loadJson(`/api/countries?${paramsObj.toString()}`);\r\n}\r\n\r\nexport async function getCities(\r\n  params: { country_name: string; page_size: string } = {\r\n    country_name: \"Thailand\",\r\n    page_size: \"10\"\r\n  }\r\n): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams(params);\r\n  const data = await loadJson(`/api/cities?${paramsObj.toString()}`);\r\n  data.results = data.results.map((datum: ICity) => {\r\n    datum.country_name = params.country_name;\r\n    return datum;\r\n  });\r\n  return data;\r\n}\r\n\r\nexport async function getDestination(\r\n  country_name: string,\r\n  city_name: string\r\n): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams({\r\n    country_name,\r\n    city_name,\r\n    include_divesites: \"true\"\r\n  });\r\n  const data = await loadJson(`/api/cities?${paramsObj.toString()}`);\r\n  if (data.results.length > 0) {\r\n    data.results = data.results.map((result: ICity) => {\r\n      if (result.divesite_set == null) return result;\r\n      result.divesite_set = result.divesite_set.map((datum: IDiveSite) => {\r\n        datum = diveSiteParser(datum)\r\n        datum.country_name = country_name;\r\n        datum.city_name = city_name;\r\n        return datum;\r\n      });\r\n      return result;\r\n    });\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction diveSiteParser(divesite: any) {\r\n  divesite.min_temp_by_month = JSON.parse(divesite.min_temp_by_month)\r\n  divesite.max_temp_by_month = JSON.parse(divesite.max_temp_by_month)\r\n  divesite.meta = JSON.parse(divesite.meta)\r\n  return divesite\r\n}\r\n\r\nexport async function getDiveSites(query?: any): Promise<APIResults<IDiveSite>> {\r\n  const queryObj = new URLSearchParams(query);\r\n  const results = await loadJson(\"/api/divesites?\" + queryObj.toString());\r\n  results.results = results.results.map(diveSiteParser)\r\n  return results\r\n}\r\n\r\nexport async function getDiveSite(id: number | string): Promise<IDiveSite> {\r\n  const diveSite = await loadJson('/api/divesites/' + id)\r\n  return diveSiteParser(diveSite)\r\n}\r\n\r\nexport async function getDiveLogs(){\r\n  return loadJson('/api/divelogs')\r\n}\r\n\r\n\r\n\r\nfunction getCookie(name: string) {\r\n  var cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n      var cookies = document.cookie.split(';');\r\n      for (var i = 0; i < cookies.length; i++) {\r\n          var cookie = cookies[i].trim();\r\n          // Does this cookie string begin with the name we want?\r\n          if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n              break;\r\n          }\r\n      }\r\n  }\r\n  return cookieValue;\r\n}\r\nexport async function createDiveLog(diveLog: IDiveLog) {\r\n  const csrftoken = getCookie('csrftoken') || ''\r\n  const headers = new Headers()\r\n  headers.append('Content-Type', 'application/json')\r\n  headers.append('X-CSRFToken', csrftoken)\r\n  const options: RequestInit = { \r\n    method: 'POST',\r\n    body: JSON.stringify(diveLog),\r\n    headers\r\n  }\r\n  const resp = await fetch('/api/divelogs/', options)\r\n\r\n  if (resp.ok) {\r\n    const data = await resp.json()\r\n    return data\r\n  }\r\n\r\n  if (resp.status == 400) {\r\n    const errors = await resp.json()\r\n    const formikError:any = {}\r\n    Object.keys(errors).forEach((key) => {\r\n      formikError[key] = errors[key][0]\r\n    })\r\n    return { errors: formikError }\r\n  }\r\n  // handle other errors\r\n}\r\n\r\nexport const Note = {\r\n  async updateNote({\r\n    diveSiteId,\r\n    user,\r\n    content\r\n  }: {\r\n    diveSiteId: number;\r\n    user: IUser;\r\n    content: string;\r\n  }): Promise<void> {\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${user.access_token}`\r\n    };\r\n    const body = JSON.stringify({ content });\r\n    const data = await loadJson(\r\n      `/api/notes/divesites/${diveSiteId}/users/${user.id}`,\r\n      {\r\n        method: \"POST\",\r\n        headers,\r\n        body\r\n      }\r\n    );\r\n    return data;\r\n  },\r\n  async getNote({\r\n    diveSiteId,\r\n    user\r\n  }: {\r\n    diveSiteId: number;\r\n    user: IUser;\r\n  }): Promise<string> {\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${user.access_token}`\r\n    };\r\n    const data = await loadJson(\r\n      `/api/notes/divesites/${diveSiteId}/users/${user.id}`,\r\n      { headers, methods: \"POST\" }\r\n    );\r\n    if (data == null) {\r\n      return \"\";\r\n    }\r\n    return data.content;\r\n  }\r\n};\r\n\r\n\r\n","import React from 'react';\r\nimport { IDiveSite, Note } from './api'\r\nimport { AppContext } from './AppContext'\r\nimport {\r\n    LineChart, Line, XAxis, YAxis\r\n  } from 'recharts';\r\n\r\ninterface IDestinationCardProps {\r\n    site: IDiveSite;\r\n}\r\n\r\nclass DestinationCard extends React.Component<IDestinationCardProps, any> {\r\n    static contextType = AppContext\r\n    _textarea: any\r\n\r\n    async syncNote() {\r\n        const diveSiteId = this.props.site.id\r\n        const content = await Note.getNote({ diveSiteId, user: this.context.user })\r\n        this._textarea.value = content\r\n    }\r\n\r\n    async componentWillMount() {\r\n        if (this.context.user == null) return\r\n        // await this.syncNote()\r\n    }\r\n\r\n    async componentDidUpdate(prevProps: any) {\r\n        if (this.props.site != null && prevProps.site != null && (this.props.site.id !== prevProps.site.id)) {\r\n            this._textarea.value = ''\r\n            // this.syncNote()\r\n        }\r\n    }\r\n\r\n    async onNoteSave(event: any) {\r\n        const diveSiteId = this.props.site.id\r\n        // TODO: check result and feedback UI\r\n        await Note.updateNote({ \r\n            diveSiteId, \r\n            user: this.context.user,\r\n            content: this._textarea.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {site} = this.props\r\n        console.log(site)\r\n        if (site == null) {\r\n            return (\r\n                <div>\r\n                    <h2 className=\"title is-two\">No Dive Site Selected!</h2>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        let textarea\r\n        if (this.context.user != null) {\r\n            textarea = (\r\n                <div className='full-height'>\r\n                    <textarea \r\n                        autoFocus={true}\r\n                        className=\"textarea borderless\" \r\n                        placeholder=\"Take notes here.\"\r\n                        ref={c => this._textarea = c}\r\n                    >\r\n                    </textarea>\r\n                    <button className='button' \r\n                        onClick={this.onNoteSave.bind(this)}>submit</button>\r\n                </div>\r\n            )\r\n        } else {\r\n            textarea = (\r\n                <div>\r\n                    <textarea \r\n                        className=\"textarea borderless\" \r\n                        placeholder=\"Notes coming soon!\"\r\n                        // placeholder=\"Please login to take notes\" \r\n                        ref={c => this._textarea = c}\r\n                        disabled></textarea>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        const tempData: any[] = []\r\n        if (site.min_temp_by_month != null && site.max_temp_by_month != null) {\r\n            site.min_temp_by_month.forEach((minTemp, i) => {\r\n                // @ts-ignore\r\n                const maxTemp = site.max_temp_by_month[i]\r\n                tempData.push({ minTemp, maxTemp })\r\n            })\r\n        }\r\n\r\n        return (\r\n        <div>\r\n            <h2 className=\"title is-two\">{site.name}</h2>\r\n            <h3 className=\"subtitle is-four\">{site.city_name}, {site.country_name}</h3>\r\n            <LineChart\r\n                width={200}\r\n                height={100}\r\n                data={tempData}\r\n                margin={{ left: 0 }}\r\n            >\r\n                <Line type=\"monotone\" dataKey=\"maxTemp\" />\r\n                <Line type=\"monotone\" dataKey=\"minTemp\" />\r\n                <XAxis />\r\n                <YAxis />\r\n            </LineChart>\r\n            {/* { textarea } */}\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DestinationCard","import React from 'react';\r\nimport diveflag from '../diverflag.png'\r\nimport { IDiveSite } from '../api'\r\n\r\nfunction calculateMarkerSize(zoom: any) {\r\n    // return 10\r\n    if (zoom == null) return 5;\r\n    // console.log(5*zoom/9)\r\n    let size = 10 * zoom/10 + 1;\r\n    if (size > 20) size = 20\r\n    return size\r\n}\r\n\r\nconst DiveFlag = ({\r\n  site,\r\n  lat,\r\n  lng,\r\n  zoom,\r\n  clickHandler = () => {}\r\n}: {\r\n  site: IDiveSite;\r\n  lat: number;\r\n  lng: number;\r\n  zoom?: any;\r\n  clickHandler?: (site: IDiveSite) => void;\r\n}) => {\r\n  return (\r\n    <div className=\"tooltip\" data-tooltip={site.name}\r\n      style={{\r\n        height: calculateMarkerSize(zoom),\r\n        width: calculateMarkerSize(zoom),\r\n        backgroundColor: \"red\",\r\n        borderRadius: \"50%\",\r\n        display: \"inline-block\",\r\n        cursor: 'pointer',\r\n        boxShadow: '0px 4px 4px rgba(0, 0, 0, 0.25)',\r\n        border: '1px solid white'\r\n      }}\r\n      onClick={() => clickHandler(site)}\r\n    />\r\n  );\r\n  return (\r\n    <div className=\"tooltip\" data-tooltip={site.name}>\r\n      <img\r\n        onClick={() => clickHandler(site)}\r\n        src={diveflag}\r\n        alt=\"Diver Down Flag\"\r\n        style={{\r\n          boxShadow: \"0px 4px 4px rgba(0, 0, 0, 0.25)\",\r\n          cursor: \"pointer\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DiveFlag","import React, { useState, useEffect } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport GoogleMapReact, { ClickEventValue } from 'google-map-react';\r\nimport {getDestination, ILocation, ICity} from '../api'\r\nimport DiveMarker from './DiveMarker'\r\nimport { meanBy } from 'lodash-es';\r\nimport mapStyle from './google_map_style.json'\r\nimport * as H from 'history'\r\nimport * as querystring from 'query-string'\r\n\r\n\r\ninterface Props {\r\n    locations: ILocation[], \r\n    centerCoord?: { lat: number, lng: number},\r\n    activeSite?: ILocation,\r\n    setActiveLocation?: (site?: ILocation)=>void,\r\n    activeSiteCountry?: string,\r\n    activeSiteCity?: string,\r\n    onClickUpdate?: () => void;\r\n    onGoogleApiLoaded?: ({ map , maps }: { map: any, maps: any }) => void\r\n    defaultZoom?: number,\r\n    autoZoom?: boolean,\r\n    children?: React.ReactNode,\r\n    location: H.Location,\r\n    history: H.History\r\n\r\n}\r\n\r\nconst googleMapStyle = mapStyle\r\n\r\nvar timeout: any;\r\nfunction DiveMap({ \r\n        locations, \r\n        centerCoord,\r\n        activeSite,\r\n        setActiveLocation,\r\n        activeSiteCountry,\r\n        activeSiteCity,\r\n        onGoogleApiLoaded,\r\n        defaultZoom,\r\n        autoZoom,\r\n        children,\r\n        location,\r\n        history,\r\n        onClickUpdate\r\n    } : Props ) {\r\n\r\n    if (centerCoord == null) centerCoord = { lat: 0, lng: 0 }\r\n\r\n    if (autoZoom === true && locations.length > 0) {\r\n        const lat = meanBy(locations, 'lat')\r\n        const lng = meanBy(locations, 'lng')\r\n        centerCoord = { lat, lng }\r\n    }\r\n\r\n    var hasLocationQuery = false\r\n    const { lat, lng, zoom } = querystring.parse(location.search)\r\n    if (lat != null && lng != null && zoom != null)  {\r\n        centerCoord.lat = Number(lat)\r\n        centerCoord.lng = Number(lng)\r\n        hasLocationQuery = true\r\n    }\r\n\r\n    return (\r\n      <>\r\n      { onClickUpdate != null &&\r\n        <div className=\"container is-fluid\">\r\n          <div className=\"columns\">\r\n            <div className=\"column is-two-fifths\" />\r\n            <div className=\"column is-one-fifths\">\r\n              <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                <button\r\n                  className=\"button\"\r\n                  style={{\r\n                    zIndex: 10,\r\n                    border: \"none\",\r\n                    background: \"rgba(21,60,106,0.9)\",\r\n                    color: \"white\"\r\n                  }}\r\n                  onClick={() => onClickUpdate()}\r\n                >\r\n                  Redo Search Current Area\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"column is-two-fifths\" />\r\n          </div>\r\n        </div>\r\n      }\r\n        <div>\r\n          <div\r\n            style={{\r\n              height: \"100vh\",\r\n              width: \"100%\",\r\n              position: \"fixed\",\r\n              top: 0\r\n            }}\r\n          >\r\n            {locations != null && (\r\n              <GoogleMapReact\r\n                options={{ styles: googleMapStyle }}\r\n                bootstrapURLKeys={{\r\n                  key: \"AIzaSyCaxeoUHkl2GK3sKFaNvLfoRWMTm0EbzK0\"\r\n                }}\r\n                defaultCenter={centerCoord}\r\n                defaultZoom={(zoom && Number(zoom)) || defaultZoom}\r\n                hoverDistance={5}\r\n                yesIWantToUseGoogleMapApiInternals\r\n                onGoogleApiLoaded={({ map, maps }) => {\r\n                  if (autoZoom === true && hasLocationQuery === false) {\r\n                    const bounds = new maps.LatLngBounds();\r\n\r\n                    if (locations.length == 1) {\r\n                        map.setCenter(locations[0])\r\n                        map.setZoom(8)\r\n                    } else {\r\n                        locations.forEach(diveSite => {\r\n                        bounds.extend({\r\n                            lat: diveSite.lat,\r\n                            lng: diveSite.lng\r\n                        });\r\n                        });\r\n                        map.fitBounds(bounds);\r\n                        const zoom = map.getZoom()\r\n                        if (zoom > 12) map.setZoom(8)\r\n                    }\r\n                  }\r\n\r\n                  if (onGoogleApiLoaded != null) {\r\n                    onGoogleApiLoaded({ map, maps });\r\n                  }\r\n\r\n                  map.addListener(\"bounds_changed\", () => {\r\n                    // @ts-ignore\r\n                    clearTimeout(timeout);\r\n                    timeout = setTimeout(() => {\r\n                      const { lat, lng } = map.getCenter();\r\n                      const zoom = map.getZoom();\r\n                      const search = querystring.stringify({\r\n                        zoom,\r\n                        lat: lat(),\r\n                        lng: lng()\r\n                      });\r\n                      history.replace(location.pathname + \"?\" + search);\r\n                    }, 500);\r\n                  });\r\n                }}\r\n              >\r\n                {locations.map(site => (\r\n                  <DiveMarker\r\n                    zoom={zoom}\r\n                    key={site.id}\r\n                    lat={site.lat}\r\n                    lng={site.lng}\r\n                    site={site}\r\n                    clickHandler={() => {\r\n                      if (setActiveLocation != null)\r\n                        setActiveLocation(site)\r\n                    }}\r\n                  />\r\n                ))}\r\n                  {children}\r\n              </GoogleMapReact>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n}\r\n\r\n//@ts-ignore\r\nexport default withRouter(DiveMap);\r\n","import React from 'react';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = { hasError: false };\r\n    }\r\n  \r\n    static getDerivedStateFromError(error) {\r\n      // Update state so the next render will show the fallback UI.\r\n      return { hasError: true };\r\n    }\r\n  \r\n    componentDidCatch(error, info) {\r\n      // You can also log the error to an error reporting service\r\n      console.log(error, info);\r\n    }\r\n  \r\n    render() {\r\n      if (this.state.hasError) {\r\n        // You can render any custom fallback UI\r\n        return <h1>Something went wrong.</h1>;\r\n      }\r\n  \r\n      return this.props.children; \r\n    }\r\n  }\r\n\r\nexport default ErrorBoundary","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DestinationCard from \"./DestinationCard\";\r\nimport { getDestination, IDiveSite, ICity } from \"./api\";\r\nimport DiveMap from \"./components/DiveMap\";\r\nimport ErrorBoundary from \"./components/ErrorBoundary\";\r\n\r\nfunction Destination(props: any) {\r\n  const [diveSites, setDiveSites] = useState<IDiveSite[]>([]);\r\n  const [destination, setDestination] = useState<ICity | null>(null);\r\n  const [activeSite, setActiveSite] = useState<any>(null);\r\n\r\n  const { country, city } = props.match.params;\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      const data = await getDestination(country, city);\r\n      const result = data.results[0];\r\n      setDestination(result);\r\n      const diveSites = result.divesite_set || [];\r\n      setDiveSites(diveSites);\r\n      // only show on desktop\r\n      if (diveSites.length > 0 && window.innerWidth > 768) {\r\n        setActiveSite(diveSites[0]);\r\n      }\r\n    })();\r\n  }, [props.match.params.country, props.match.params.city]);\r\n\r\n  const breadcrumb = [\r\n    {\r\n      href: `/destinations`,\r\n      name: \"Country\"\r\n    },\r\n    {\r\n      href: `/destinations/${country}`,\r\n      name: country\r\n    },\r\n    {\r\n      href: `/destinations/${country}/${city}`,\r\n      name: city\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <div className=\"level\">\r\n        <nav className=\"breadcrumb\" aria-label=\"breadcrumbs\">\r\n          <ul>\r\n            {breadcrumb.map((crumb, idx) => (\r\n              <li\r\n                style={{ zIndex: 10 }}\r\n                key={idx}\r\n                className={` ${\r\n                  idx === breadcrumb.length - 1 ? \"is-active\" : \"\"\r\n                }`}\r\n              >\r\n                <Link\r\n                  to={crumb.href}\r\n                  className=\"title is-5\"\r\n                  style={{ padding: \"10px\" }}\r\n                >\r\n                  {crumb.name}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n      <div>\r\n        {destination != null && diveSites != null && (\r\n          <DiveMap\r\n            onClickUpdate={() => {\r\n              const search = props.location.search;\r\n              props.history.push(\"/destinations/map\" + search);\r\n            }}\r\n            locations={diveSites}\r\n            activeSite={activeSite}\r\n            centerCoord={{ lat: destination.lat, lng: destination.lng }}\r\n            activeSiteCountry={\"\"}\r\n            activeSiteCity={\"\"}\r\n            setActiveLocation={(activeSite: any) => {\r\n              console.log(\"setting active Site\");\r\n              setActiveSite(activeSite);\r\n            }}\r\n            autoZoom={true}\r\n            defaultZoom={8}\r\n            onGoogleApiLoaded={({ map, maps }: { map: any; maps: any }) => {\r\n              map.addListener(\"click\", () => {\r\n                setActiveSite(undefined);\r\n              });\r\n            }}\r\n          />\r\n        )}\r\n        {activeSite != null && (\r\n          <section className=\"section\" id=\"content\">\r\n            <div className=\"container is-fluid\">\r\n              <div className=\"columns\">\r\n                <div className=\"column is-three-quarters\" />\r\n                <div className=\"column\">\r\n                  <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                    <span\r\n                      className=\"icon\"\r\n                      style={{\r\n                        position: \"absolute\",\r\n                        right: 15,\r\n                        cursor: \"pointer\",\r\n                        color: \"#363636\"\r\n                      }}\r\n                      onClick={() => setActiveSite(undefined)}\r\n                    >\r\n                      <i className=\"far fa-times-circle\" />\r\n                    </span>\r\n                    <ErrorBoundary>\r\n                      <DestinationCard site={activeSite} />\r\n                    </ErrorBoundary>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Destination;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getCountries, getCities, ICity, loadJson } from \"./api\";\r\nimport DiveMap from \"./components/DiveMap\";\r\n\r\nconst Level = (props: any) => <div className=\"level\">{props.children}</div>;\r\n\r\nfunction DestinationList(props: {\r\n  locationType: string;\r\n  country?: string;\r\n  history: any;\r\n}) {\r\n  const { locationType, country, history } = props;\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [destinations, setDestinations] = useState<ICity[]>([]);\r\n  const [next, setNext] = useState(null as string | null);\r\n\r\n  let breadcrumb = [{ name: \"Countries\", href: \"/destinations\" }];\r\n  if (country != null) {\r\n    breadcrumb.push({\r\n      name: country,\r\n      href: `/destinations/${country}`\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      try {\r\n        let data = null;\r\n        if (locationType === \"countries\") {\r\n          data = await getCountries();\r\n        } else {\r\n          data = await getCities({\r\n            country_name: String(props.country),\r\n            page_size: \"200\"\r\n          });\r\n        }\r\n        setNext(data.next);\r\n        setDestinations(data.results);\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        alert(error);\r\n      }\r\n    })();\r\n  }, [locationType, props.country]);\r\n\r\n  return (\r\n    <DestinationList_\r\n      history={history}\r\n      breadcrumb={breadcrumb}\r\n      isLoading={isLoading}\r\n      destinations={destinations}\r\n      locationType={locationType}\r\n      hasMore={next != null}\r\n      loadMoreHandler={async () => {\r\n        if (next == null) return;\r\n        const urlObj = new URL(next);\r\n        // fix different host in development\r\n        const url = urlObj.href.replace(urlObj.origin, \"\");\r\n\r\n        const data = await loadJson(url);\r\n        data.results = data.results.map((datum: ICity) => {\r\n          datum.country_name = country;\r\n          return datum;\r\n        });\r\n\r\n        const newList = destinations.concat(data.results);\r\n        setDestinations(newList);\r\n        setNext(data.next);\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\n\r\n\r\ninterface IBreadcrumb {\r\n  href: string;\r\n  name: string;\r\n}\r\n\r\nexport const DestinationList_ = ({\r\n  breadcrumb,\r\n  isLoading,\r\n  destinations,\r\n  locationType,\r\n  hasMore,\r\n  loadMoreHandler,\r\n  history\r\n}: {\r\n  breadcrumb: IBreadcrumb[];\r\n  isLoading: boolean;\r\n  destinations: ICity[];\r\n  locationType: string;\r\n  hasMore: boolean;\r\n  loadMoreHandler: Function;\r\n  history: any\r\n}) => {\r\n  return (\r\n    <div>\r\n      {destinations.length > 0 && (\r\n        <DiveMap\r\n          locations={destinations}\r\n          activeSite={undefined}\r\n          activeSiteCountry={\"\"}\r\n          activeSiteCity={\"\"}\r\n          setActiveLocation={(location: any) => {\r\n              if (locationType == 'countries') {\r\n                  history.push(`/destinations/${location.name}`)\r\n              } else {\r\n                  history.push(`/destinations/${location.country_name}/${location.name}`)\r\n              }\r\n          }}\r\n          autoZoom={true}\r\n          defaultZoom={8}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DestinationList;\r\n","import React from 'react'\r\n\r\nconst About = () =>\r\n    <div className=\"section\">\r\n        <div className=\"container\">\r\n            <div className=\"columns\">\r\n                <div className=\"column is-half is-offset-one-quarter\">\r\n                    <h2 className=\"title is-2\">About</h2>\r\n                    <p>The goal of <a href=\"/\" className=\"has-text-weight-bold\">Reefbase</a> is to be a place where scuba divers can collect information about a dive site before, during, and after a diving trip.</p><br />\r\n                    <p>Currently, the application is in development mode, so things will change and data could get lost.</p><br />\r\n                    <p>The dive site geo GPS coordinate are from <a href=\"http://divesites.com\" target=\"_blank\" rel=\"noopener noreferrer\">divesites.com</a></p><br />\r\n                    <p>Created by <a href=\"https://harinsang.com\" target=\"_blank\" rel=\"noopener noreferrer\">Harin Sanghirun</a>.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\nexport default About\r\n","//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n//:::                                                                         :::\r\n//:::  This routine calculates the distance between two points (given the     :::\r\n//:::  latitude/longitude of those points). It is being used to calculate     :::\r\n//:::  the distance between two locations using GeoDataSource (TM) prodducts  :::\r\n//:::                                                                         :::\r\n//:::  Definitions:                                                           :::\r\n//:::    South latitudes are negative, east longitudes are positive           :::\r\n//:::                                                                         :::\r\n//:::  Passed to function:                                                    :::\r\n//:::    lat1, lon1 = Latitude and Longitude of point 1 (in decimal degrees)  :::\r\n//:::    lat2, lon2 = Latitude and Longitude of point 2 (in decimal degrees)  :::\r\n//:::    unit = the unit you desire for results                               :::\r\n//:::           where: 'M' is statute miles (default)                         :::\r\n//:::                  'K' is kilometers                                      :::\r\n//:::                  'N' is nautical miles                                  :::\r\n//:::                                                                         :::\r\n//:::  Worldwide cities and other features databases with latitude longitude  :::\r\n//:::  are available at https://www.geodatasource.com                         :::\r\n//:::                                                                         :::\r\n//:::  For enquiries, please contact sales@geodatasource.com                  :::\r\n//:::                                                                         :::\r\n//:::  Official Web site: https://www.geodatasource.com                       :::\r\n//:::                                                                         :::\r\n//:::               GeoDataSource.com (C) All Rights Reserved 2018            :::\r\n//:::                                                                         :::\r\n//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n\r\nfunction distance(lat1, lon1, lat2, lon2, unit) {\r\n\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\treturn 0;\r\n\t}\r\n\telse {\r\n\t\tvar radlat1 = Math.PI * lat1/180;\r\n\t\tvar radlat2 = Math.PI * lat2/180;\r\n\t\tvar theta = lon1-lon2;\r\n\t\tvar radtheta = Math.PI * theta/180;\r\n\t\tvar dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\tif (dist > 1) {\r\n\t\t\tdist = 1;\r\n\t\t}\r\n\t\tdist = Math.acos(dist);\r\n\t\tdist = dist * 180/Math.PI;\r\n\t\tdist = dist * 60 * 1.1515;\r\n\t\tif (unit==\"K\") { dist = dist * 1.609344 }\r\n\t\tif (unit==\"N\") { dist = dist * 0.8684 }\r\n\t\treturn dist;\r\n\t}\r\n}\r\n\r\nexport default distance","import React, { useState, useEffect } from \"react\";\r\nimport DiveMap from \"./components/DiveMap\";\r\nimport DestinationCard from './DestinationCard';\r\nimport distance from \"./distance\";\r\nimport { getDiveSite, getDiveSites, IDiveSite } from \"./api\";\r\n\r\n\r\ninterface BubbleProps {\r\n  diveSite: IDiveSite;\r\n}\r\n\r\nconst MapBubbleContent = (props: BubbleProps) => {\r\n  const { diveSite } = props\r\n\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [fullSiteInfo, setFullSiteInfo] = useState({} as IDiveSite)\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setIsLoading(true)\r\n      const fullSite: IDiveSite = await getDiveSite(diveSite.id)\r\n      setIsLoading(false)\r\n      setFullSiteInfo(fullSite)\r\n    })()\r\n  }, [diveSite])  \r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n      }}\r\n    >\r\n      <h3 \r\n        style={{ flex: 0 }}\r\n        className=\"title is-4\">{diveSite.name}</h3>\r\n      <div className={isLoading ? 'is-loading' : ''}\r\n        style={{\r\n          height: '100%',\r\n          flex: '1 0 auto'\r\n        }} \r\n      >\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst MapPage = function(props: any) {\r\n  const [activeSite, setActiveSite] = useState(null as any)\r\n  const [searchCircle, setSearchCircle] = useState({\r\n    lat: 26.5293775, //florida\r\n    lng: -82.8939276,\r\n    radius: 240\r\n  });\r\n  const [diveSites, setDiveSites] = useState([] as IDiveSite[]);\r\n\r\n  function setSearchCircleFromMap(map: any) {\r\n    const center = map.getCenter().toJSON();\r\n    const bound = map.getBounds().toJSON();\r\n    const latDist = distance(bound.west, 0, bound.east, 0, \"K\");\r\n    const lngDist = distance(0, bound.north, 0, bound.south, \"K\");\r\n    const radius = Math.min(latDist, lngDist);\r\n    center.radius = radius;\r\n    setSearchCircle(center);\r\n  }\r\n\r\n  function onLoad({ map, maps }: { map: any; maps: any }) {\r\n    setSearchCircleFromMap(map);\r\n\r\n    map.addListener(\"dragend\", () => setSearchCircleFromMap(map));\r\n    map.addListener(\"zoom_changed\", () => setSearchCircleFromMap(map));\r\n    map.addListener(\"click\", () => setActiveSite(undefined))\r\n  }\r\n\r\n  async function updateDiveSites() {\r\n    const query = Object.assign({}, searchCircle) as any;\r\n    query.page_size = 100;\r\n    query.include_location = \"true\";\r\n\r\n    const data = await getDiveSites(query);\r\n \r\n    setDiveSites(data.results);\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      updateDiveSites();\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n    <DiveMap\r\n      locations={diveSites}\r\n      activeSite={activeSite}\r\n      centerCoord={{ lat: searchCircle.lat, lng: searchCircle.lng }}\r\n      activeSiteCountry={\"\"}\r\n      activeSiteCity={\"\"}\r\n      setActiveLocation={(activeSite: any) => setActiveSite(activeSite)}\r\n      onGoogleApiLoaded={onLoad}\r\n      onClickUpdate={() => updateDiveSites()}\r\n      defaultZoom={8}\r\n    >\r\n      {/* { activeSite &&\r\n          //@ts-ignore\r\n          <div\r\n            className='speech-bubble'\r\n            lat={activeSite.lat} \r\n            lng={activeSite.lng}\r\n            style={{\r\n              background: 'white',\r\n              padding: '10px',\r\n              borderRadius: '10px',\r\n              width: 300,\r\n              height: 200,\r\n              position: 'relative',\r\n              top: -230,\r\n              left: -145,\r\n              boxShadow: '0px 4px 30px rgba(0, 0, 0, 0.10)',\r\n              cursor: 'default',\r\n              pointerEvents: 'all'\r\n            }}\r\n          >\r\n             <MapBubbleContent diveSite={activeSite} />\r\n          </div>\r\n\r\n        } */}\r\n     \r\n    </DiveMap>\r\n     {activeSite != null && (\r\n      <section className=\"section\" id=\"content\">\r\n        <div className=\"container is-fluid\">\r\n          <div className=\"columns\">\r\n            <div className=\"column is-three-quarters\" />\r\n            <div className=\"column\">\r\n              <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                <span\r\n                  className=\"icon\"\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    right: 15,\r\n                    cursor: \"pointer\",\r\n                    color: \"#363636\"\r\n                  }}\r\n                  onClick={() => setActiveSite(undefined)}\r\n                >\r\n                  <i className=\"far fa-times-circle\" />\r\n                </span>\r\n                <DestinationCard site={activeSite} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MapPage;\r\n","import React, { useState } from \"react\";\r\nimport { IDiveSite, APIResults } from '../api'\r\n\r\nconst SEARCH_TIMEOUT_MS = 500\r\n\r\nconst DiveSiteSelect = ({\r\n  handleChange,\r\n  getDiveSites,\r\n  name\r\n}: {\r\n  name: string;\r\n  handleChange: (e: React.ChangeEvent<any>) => void;\r\n  getDiveSites: (query?: any) => Promise<APIResults<IDiveSite>>;\r\n}) => {\r\n\r\n  const [diveSites, setDiveSites] = useState([] as IDiveSite[])\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [searchTimeout, setSearchTimeout] = useState()\r\n\r\n  return (\r\n    <div className=\"control has-icons left\">\r\n        <input type=\"text\" \r\n            onChange={(e) => {\r\n              const value = e.target.value\r\n              clearTimeout(searchTimeout)\r\n              const newTimeout = setTimeout(async () => {\r\n                if (isLoading) return\r\n                setIsLoading(true)\r\n                const result = await getDiveSites({\r\n                    keyword: value\r\n                })\r\n                setIsLoading(false)\r\n                setDiveSites(result.results)\r\n              }, SEARCH_TIMEOUT_MS)\r\n              setSearchTimeout(newTimeout)\r\n            }}\r\n            placeholder='Search Dive Site by Name'\r\n        />\r\n      <div className=\"select\">\r\n        <select\r\n          name={name}\r\n          onChange={handleChange}\r\n        >\r\n          {diveSites.map((d: any) => (\r\n            <option key={d.id} value={d.id}>{d.name}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <span className=\"icon is-left\">\r\n        <i className=\"fas fa-globe\" />\r\n      </span> \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DiveSiteSelect;\r\n","import React, { useState } from \"react\";\r\nimport { sortBy } from \"lodash-es\";\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport DiveSiteSelect from './DiveSiteSelect'\r\nimport { IDiveSite, APIResults, createDiveLog } from '../api'\r\n\r\ninterface Props {\r\n  getDiveSites: (q?: any) => Promise<APIResults<IDiveSite>>;\r\n  onSubmitted?: Function,\r\n  onCanceled?: () => void\r\n}\r\n\r\nconst DiveLogForm = (props: Props) => {\r\n  const { \r\n    getDiveSites,\r\n    onSubmitted,\r\n    onCanceled\r\n  } = props;\r\n  return (\r\n    <Formik\r\n      initialValues={{\r\n        date: new Date().toISOString().substring(0, 10),\r\n        divesite_id: 1,\r\n        meta: undefined,\r\n        rating: undefined,\r\n        notes: undefined\r\n      }}\r\n      onSubmit={async (values, { setSubmitting, setErrors }) => {\r\n        // if (values.divesite_id == null) return;\r\n        // values.divesite_id = Number(values.divesite_id)\r\n        const result = await createDiveLog(values);\r\n        if (result.errors) {\r\n          setErrors(result.errors);\r\n        } else {\r\n          if (onSubmitted != null) onSubmitted()\r\n        }\r\n      }}\r\n    >\r\n      {(props: any) => {\r\n        const { errors, handleChange } = props;\r\n        return (\r\n          <Form>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Date</label>\r\n              <div className=\"control\">\r\n                <Field\r\n                  name=\"date\"\r\n                  type=\"date\"\r\n                  data-display-mode=\"inline\"\r\n                  data-is-range=\"true\"\r\n                  data-close-on-select=\"false\"\r\n                />\r\n              </div>\r\n              <ErrorMessage name=\"date\" />\r\n            </div>\r\n            <div className=\"field\">\r\n              <label className=\"label\" htmlFor=\"\">\r\n                Time\r\n              </label>\r\n              <div className=\"control\">\r\n                <Field\r\n                  type=\"time\"\r\n                  data-display-mode=\"inline\"\r\n                  data-is-range=\"true\"\r\n                  data-close-on-select=\"false\"\r\n                />\r\n                <ErrorMessage name=\"time\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Dive Site</label>\r\n              <div className=\"control\">\r\n                <DiveSiteSelect\r\n                  name={'divesite_id'}\r\n                  getDiveSites={getDiveSites}\r\n                  handleChange={handleChange}\r\n                />\r\n                <ErrorMessage name=\"divesite_id\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"field\">\r\n              <label className=\"label\">Notes</label>\r\n              <div className=\"control\">\r\n                <textarea className=\"textarea\" name=\"notes\" />\r\n                <ErrorMessage name=\"notes\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Meta</label>\r\n              <div className=\"control\">\r\n                <textarea className=\"textarea\" name=\"meta\" />\r\n                {errors.meta}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Rating</label>\r\n              <div className=\"control\">\r\n                <Field type=\"number\" name=\"rating\" />\r\n                <ErrorMessage name=\"rating\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"field is-grouped\">\r\n              <div className=\"control\">\r\n                <button className=\"button is-primary\">Create</button>\r\n              </div>\r\n              <div className=\"control\">\r\n                <button className=\"button is-text\" onClick={(e) => {\r\n                  e.preventDefault()\r\n                  if (onCanceled != null) onCanceled()\r\n                }}>Cancel</button>\r\n              </div>\r\n            </div>\r\n            <pre>{JSON.stringify(props, null, 2)}</pre>\r\n          </Form>\r\n        );\r\n      }}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default DiveLogForm;\r\n","import React from 'react';\r\n\r\ninterface Props {\r\n    diveLogs: any[]\r\n}\r\n\r\nconst DiveLogsList = ({ diveLogs }: Props) => {\r\n\r\n    return (\r\n      <ul>\r\n        {diveLogs.map((diveLog: any) => (\r\n          <li key={diveLog.id} className=\"card\">\r\n            <div className=\"card-header-title\">\r\n              <div className=\"columns\" style={{flexGrow:'inherit'}}>\r\n                <div className=\"column is-two-thirds\">\r\n                  <div className=\"title is-size-6\">\r\n                    {diveLog.divesite.name}\r\n                  </div>\r\n                  <div className=\"subtitle is-size-7\">\r\n                    {diveLog.divesite.city.name},{\" \"}\r\n                    {diveLog.divesite.city.country.name}\r\n                  </div>\r\n                </div>\r\n                <div className=\"column is-one-thirds is-size-7 has-text-right\">\r\n                    <div>{diveLog.date}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* <pre>{JSON.stringify(diveLog, null ,2)} */}\r\n\r\n            {/* </pre> */}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n}\r\n\r\nexport default DiveLogsList","import React, { ReactChildren } from 'react';\r\n\r\n\r\nconst CardRight = ({ children }: { children: React.ReactNode }) => \r\n    <section className=\"section\">\r\n        <div className=\"container is-fluid\">\r\n            <div className=\"columns\">\r\n                <div className=\"column is-three-quarters\"></div>\r\n                <div className=\"column\">\r\n                    <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                        {children}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n\r\nexport default CardRight","import React, { useState, useEffect } from 'react';\r\nimport DiveLogForm from './components/DiveLogForm'\r\nimport DiveLogsList from './components/DiveLogsList'\r\nimport CardRight from './components/CardRight'\r\nimport DiveMap from './components/DiveMap'\r\nimport { meanBy } from 'lodash-es'\r\n\r\nimport { getDiveSites, getDiveLogs} from './api'\r\n\r\nexport const DiveLogsPage = () => {\r\n    const [diveLogs, setDiveLogs ] = useState([] as any[])\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [isCreate, setIsCreate] = useState(false)\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            setIsLoading(true)\r\n            const result = await getDiveLogs()\r\n            setIsLoading(false)\r\n            setDiveLogs(result.results)\r\n        })()\r\n    }, [])\r\n\r\n    let lat = 0\r\n    let lng = 0\r\n    if (diveLogs.length > 0) {\r\n      lat = meanBy(diveLogs, (d) => d.divesite.lat)\r\n      lng = meanBy(diveLogs, (d) => d.divesite.lng)\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <DiveMap\r\n          locations={diveLogs.map(d => d.divesite)}\r\n          defaultZoom={8}\r\n          centerCoord={{ lat, lng }}\r\n          autoZoom={true}\r\n        >\r\n          <CardRight>\r\n            {isCreate ? (\r\n\r\n              <DiveLogForm\r\n                getDiveSites={getDiveSites}\r\n                onSubmitted={() => window.location.reload()}\r\n                onCanceled={() => setIsCreate(false)}\r\n              />\r\n            ) : (\r\n              <>\r\n              <button\r\n              className=\"button\"\r\n              onClick={() => {\r\n                setIsCreate(!isCreate);\r\n              }}\r\n            >\r\n              + New Log\r\n            </button>\r\n              <DiveLogsList diveLogs={diveLogs} />\r\n              </>\r\n\r\n            )}\r\n          </CardRight>\r\n        </DiveMap>\r\n      </>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default DiveLogsPage\r\n","import React from 'react';\r\n\r\nconst ErrorView = () => {\r\n    return (\r\n        <section className=\"hero\">\r\n            <div className=\"hero-body\">\r\n                <div className=\"container\">\r\n                    Something went wrong!\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ErrorView","import React from \"react\";\nimport \"./App.scss\";\nimport '../node_modules/bulma-extensions/bulma-calendar/dist/js/bulma-calendar'\nimport Navbar from \"./Navbar\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect,\n  Switch\n} from \"react-router-dom\";\nimport Destination from \"./Destination\";\nimport DestinationList from \"./DestinationList\";\nimport About from \"./About\";\nimport MapPage from \"./MapPage\";\nimport DiveLogsPage from './DiveLogsPage'\nimport ErrorView from './components/ErrorView'\nimport { AppContext, DEFAULT_STATE } from \"./AppContext\";\nimport { IUser } from \"./api\";\n\nfunction DestinationPage(props: any) {\n  return <Destination {...props} />;\n}\n\nfunction DestinationListPage(props: any) {\n  const pathname = props.location.pathname;\n  if (pathname === \"/destinations\") {\n    return <DestinationList \n      locationType=\"countries\" \n      history={props.history}\n    />;\n  }\n  return (\n    <DestinationList\n      locationType=\"cities\"\n      country={props.match.params.country}\n      history={props.history}\n    />\n  );\n}\n\nclass App extends React.Component {\n  state = DEFAULT_STATE;\n  constructor(props: any) {\n    super(props);\n   \n  }\n\n  static getDerivedStateFromError(error: any) {\n    return { hasError: true }\n  }\n\n  componentDidCatch(error: any, info: any) {\n    this.setState({ error })\n  }\n\n  updateUser = (user: IUser | null) => {\n    this.setState({ user });\n    localStorage.setItem(\"user\", JSON.stringify(user));\n  };\n\n  render() {\n\n    if (this.state.hasError) {\n      return (\n        <>\n          <Navbar />\n          <ErrorView />\n        </>\n      )\n    }\n\n    return (\n      <AppContext.Provider\n        value={{\n          ...this.state,\n          updateUser: this.updateUser\n        }}\n      >\n        <Router>\n          <div>\n            <Navbar />\n            <Route\n              exact\n              path=\"/\"\n              render={() => <Redirect to=\"/destinations\" />}\n            />\n            <Route path=\"/about/\" component={About} />\n            <Route\n              path=\"/destinations/\"\n              exact\n              component={DestinationListPage}\n            />\n            <Switch>\n              <Route path=\"/destinations/map\" exact component={MapPage} />\n              <Route\n                path=\"/destinations/:country\"\n                exact\n                component={DestinationListPage}\n              />\n              <Route\n                path=\"/destinations/:country/:city\"\n                exact\n                component={DestinationPage}\n              />\n              <Route\n                path='/divelogs'\n                component={DiveLogsPage}\n              />\n              <Route\n                path='/divelogs/create'\n                component={DiveLogsPage}\n              />\n            </Switch>\n          </div>\n        </Router>\n      </AppContext.Provider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('page'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}