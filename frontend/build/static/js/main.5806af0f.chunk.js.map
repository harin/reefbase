{"version":3,"sources":["AppContext.tsx","Navbar.tsx","api.ts","DestinationCard.tsx","components/DiveFlag.tsx","components/DiveMap.tsx","components/ErrorBoundary.js","Destination.tsx","DestinationList.tsx","About.tsx","distance.js","MapPage.tsx","components/DiveSiteSelect.tsx","components/DiveLogForm.tsx","components/DiveLogsList.tsx","components/CardRight.tsx","DiveLogsPage.tsx","components/ErrorView.tsx","App.tsx","serviceWorker.js","index.js","diverflag.png"],"names":["DEFAULT_STATE","user","undefined","hasError","AppContext","React","createContext","Navbar","state","active","logout","_callee","regenerator_default","a","wrap","_context","prev","next","_this","context","updateUser","stop","closeMenu","setState","_this2","this","react_default","createElement","className","id","role","aria-label","style","paddingLeft","paddingRight","href","concat","aria-expanded","data-target","onClick","e","preventDefault","aria-hidden","backgroundColor","react_router_dom","to","Component","contextType","loadJson","_x","_loadJson","apply","arguments","_callee3","path","options","resp","data","error","errorData","_args3","_context3","length","headers","fetch","sent","ok","json","abrupt","t0","statusText","Error","getCountries","_getCountries","_callee5","params","paramsObj","_args5","_context5","page_size","URLSearchParams","toString","getCities","_getCities","_callee6","_args6","_context6","country_name","results","map","datum","getDestination","_x4","_x5","_getDestination","_callee7","city_name","_context7","include_divesites","result","divesite_set","getDiveSites","_x6","_getDiveSites","_callee8","query","queryObj","_context8","getDiveLogs","_getDiveLogs","_callee9","_context9","getCookie","name","cookieValue","document","cookie","cookies","split","i","trim","substring","decodeURIComponent","createDiveLog","_x7","_createDiveLog","_callee10","diveLog","csrftoken","errors","formikError","_context10","Headers","append","method","body","JSON","stringify","status","Object","keys","forEach","key","Note","updateNote","_updateNote","asyncToGenerator","mark","_ref","diveSiteId","content","Content-Type","Authorization","access_token","_x8","getNote","_getNote","_callee2","_ref2","_context2","methods","_x9","DestinationCard","_textarea","props","site","value","prevProps","event","textarea","autoFocus","placeholder","ref","c","onNoteSave","bind","disabled","DiveFlag","_ref$clickHandler","lat","lng","clickHandler","data-tooltip","src","diveflag","alt","boxShadow","cursor","DiveMap","locations","centerCoord","setActiveLocation","activeSite","onGoogleApiLoaded","activeSiteCountry","activeSiteCity","defaultZoom","autoZoom","children","meanBy","height","width","position","top","lib_default","bootstrapURLKeys","defaultCenter","hoverDistance","yesIWantToUseGoogleMapApiInternals","maps","bounds","LatLngBounds","diveSite","extend","fitBounds","components_DiveFlag","ErrorBoundary","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","info","console","log","Destination","_useState","useState","_useState2","slicedToArray","diveSites","setDiveSites","_useState3","_useState4","destination","setDestination","_useState5","_useState6","setActiveSite","_props$match$params","match","country","city","useEffect","window","innerWidth","breadcrumb","Fragment","crumb","idx","zIndex","padding","components_DiveMap","addListener","right","color","components_ErrorBoundary","src_DestinationCard","isLoggedIn","DestinationList_","_ref3","isLoading","destinations","locationType","history","hasMore","loadMoreHandler","location","push","DestinationList","setIsLoading","setDestinations","setNext","String","alert","DestinationList_DestinationList_","urlObj","url","newList","URL","replace","origin","About","target","rel","distance","lat1","lon1","lat2","lon2","unit","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","MapPage","radius","searchCircle","setSearchCircle","setSearchCircleFromMap","center","getCenter","toJSON","bound","getBounds","latDist","west","east","lngDist","north","south","min","updateDiveSites","_updateDiveSites","assign","include_location","border","background","DiveSiteSelect","handleChange","searchTimeout","setSearchTimeout","type","onChange","clearTimeout","newTimeout","setTimeout","keyword","d","DiveLogForm","onSubmitted","onCanceled","formik_esm","initialValues","date","Date","toISOString","divesite_id","meta","rating","notes","onSubmit","values","setErrors","setSubmitting","_x2","data-display-mode","data-is-range","data-close-on-select","htmlFor","components_DiveSiteSelect","DiveLogsList","diveLogs","flexGrow","divesite","CardRight","DiveLogsPage","setDiveLogs","isCreate","setIsCreate","components_CardRight","components_DiveLogForm","reload","components_DiveLogsList","ErrorView","DestinationPage","src_Destination","DestinationListPage","pathname","src_DestinationList","App","localStorage","setItem","src_Navbar","components_ErrorView","Provider","objectSpread","react_router","exact","render","component","Boolean","hostname","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.5806af0f.chunk.js","sourcesContent":["import React from 'react';\r\nimport { IUser } from './api'\r\n\r\nexport const DEFAULT_STATE = {\r\n    user: undefined,\r\n    hasError: false\r\n}\r\nexport const AppContext = React.createContext<{ user?: IUser }>(DEFAULT_STATE)\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AppContext } from \"./AppContext\";\r\n\r\nclass Navbar extends React.Component {\r\n  static contextType = AppContext;\r\n  state = {\r\n    active: false\r\n  };\r\n\r\n  logout = async () => {\r\n    // await auth.logout(this.context.user.access_token);\r\n    this.context.updateUser(null);\r\n  };\r\n\r\n  closeMenu = () => {\r\n    this.setState({ active: false });\r\n  };\r\n\r\n  render() {\r\n    // const { user } = this.context\r\n    return (\r\n      <nav\r\n        className=\"navbar is-dark\"\r\n        id=\"nav\"\r\n        role=\"navigation\"\r\n        aria-label=\"main navigation\"\r\n        style={{ paddingLeft: 10, paddingRight: 10 }}\r\n      >\r\n        <div className=\"navbar-brand\">\r\n          <a href=\"/\" className=\"navbar-item\">\r\n            <div className=\"title tooltip\" style={{ paddingRight: 20 }}>\r\n              Reefbase\r\n            </div>\r\n          </a>\r\n          <a\r\n            href=\"/\"\r\n            role=\"button\"\r\n            className={`navbar-burger burger ${\r\n              this.state.active ? \"is-active\" : \"\"\r\n            }`}\r\n            aria-label=\"menu\"\r\n            aria-expanded=\"false\"\r\n            data-target=\"navbarBasicExample\"\r\n            onClick={e => {\r\n              e.preventDefault();\r\n              this.setState({ active: !this.state.active });\r\n            }}\r\n          >\r\n            <span aria-hidden=\"true\" />\r\n            <span aria-hidden=\"true\" />\r\n            <span aria-hidden=\"true\" />\r\n          </a>\r\n        </div>\r\n        <div\r\n          className={`navbar-menu ${this.state.active ? \"is-active\" : \"\"}`}\r\n          style={{\r\n            backgroundColor: \"rgba(0,0,0,0)\"\r\n          }}\r\n        >\r\n          <div className=\"navbar-start\">\r\n            <Link className=\"navbar-item\" onClick={this.closeMenu} to=\"/about\">\r\n              About\r\n            </Link>\r\n            <Link\r\n              className=\"navbar-item\"\r\n              onClick={this.closeMenu}\r\n              to=\"/destinations\"\r\n            >\r\n              Destinations\r\n            </Link>\r\n            <Link\r\n              className=\"navbar-item\"\r\n              onClick={this.closeMenu}\r\n              to=\"/destinations/map\"\r\n            >\r\n              Map\r\n            </Link>\r\n          </div>\r\n          {/* {user != null ?\r\n                        <div className=\"navbar-end\">\r\n                            <a href=\"/\" className=\"navbar-item\">{user.username}</a>\r\n                            <a className=\"navbar-item\" onClick={this.logout}>Logout</a>\r\n                        </div>\r\n                        :\r\n                        <div className=\"navbar-end\">\r\n                            <Link className=\"navbar-item\" to=\"/login\">Login</Link>\r\n                        </div>\r\n                    } */}\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navbar;\r\n","// import { number } from \"prop-types\";\r\n\r\nexport interface IUser {\r\n  id: number;\r\n  username: string;\r\n  access_token: string;\r\n}\r\n\r\nexport interface ILocation {\r\n  id: number;\r\n  name: string;\r\n  lat: number;\r\n  lng: number;\r\n}\r\n\r\nexport interface ICity extends ILocation {\r\n  divesite_set?: IDiveSite[];\r\n  zoom_level: number;\r\n  country_name?: string;\r\n}\r\n\r\nexport interface IDiveSite extends ILocation {\r\n  id: number;\r\n  lat: number;\r\n  lng: number;\r\n  name: string;\r\n  country_name?: string;\r\n  city_name?: string;\r\n}\r\n\r\nexport interface INote {\r\n  id: number;\r\n  content: string;\r\n}\r\n\r\nexport interface IUser {\r\n  id: number;\r\n  access_token: string;\r\n  username: string;\r\n}\r\n\r\nexport interface APIResults<T> {\r\n  count: number;\r\n  next: string | null;\r\n  previous: string | null;\r\n  results: T[];\r\n}\r\n\r\nexport interface IDiveLog {\r\n  date: string;\r\n  user_id?: number; // some times can use session instead\r\n  divesite_id: number;\r\n  time?: string;\r\n  observations?: string;\r\n  meta?: string;\r\n  rating?: number\r\n}\r\n\r\n// export enum LocationTypeEnum {\r\n//   cities = 'cities',\r\n//   countries = 'countries'\r\n// }\r\n\r\nexport async function loadJson(path: string, options: any = {}) {\r\n  if (options.headers == null) {\r\n    options.headers = {};\r\n  }\r\n\r\n  options.headers[\"Content-Type\"] = \"application/json\";\r\n\r\n  const resp = await fetch(path, options);\r\n  if (resp.ok) {\r\n    const data = await resp.json();\r\n    return data;\r\n  }\r\n\r\n  let error = \"\";\r\n  try {\r\n    const errorData = await resp.json();\r\n    error = errorData.error;\r\n  } catch (e) {\r\n    error = resp.statusText;\r\n  }\r\n  throw new Error(error);\r\n}\r\n\r\nasync function loadAuthJson(\r\n  path: string,\r\n  accessToken: string,\r\n  options: any = {}\r\n) {\r\n  if (options.headers == null) {\r\n    options.headers = {};\r\n  }\r\n  options.headers[\"Authorization\"] = `Bearer ${accessToken}`;\r\n  return loadJson(path, options);\r\n}\r\n\r\nexport async function getCountries(\r\n  params: { page_size: string } = { page_size: \"200\" }\r\n): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams(params);\r\n  return loadJson(`/api/countries?${paramsObj.toString()}`);\r\n}\r\n\r\nexport async function getCities(\r\n  params: { country_name: string; page_size: string } = {\r\n    country_name: \"Thailand\",\r\n    page_size: \"10\"\r\n  }\r\n): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams(params);\r\n  const data = await loadJson(`/api/cities?${paramsObj.toString()}`);\r\n  data.results = data.results.map((datum: ICity) => {\r\n    datum.country_name = params.country_name;\r\n    return datum;\r\n  });\r\n  return data;\r\n}\r\n\r\nexport async function getDestination(\r\n  country_name: string,\r\n  city_name: string\r\n): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams({\r\n    country_name,\r\n    city_name,\r\n    include_divesites: \"true\"\r\n  });\r\n  const data = await loadJson(`/api/cities?${paramsObj.toString()}`);\r\n  if (data.results.length > 0) {\r\n    data.results = data.results.map((result: ICity) => {\r\n      if (result.divesite_set == null) return result;\r\n      result.divesite_set = result.divesite_set.map((datum: IDiveSite) => {\r\n        datum.country_name = country_name;\r\n        datum.city_name = city_name;\r\n        return datum;\r\n      });\r\n      return result;\r\n    });\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport async function getDiveSites(query?: any) {\r\n  const queryObj = new URLSearchParams(query);\r\n  return loadJson(\"/api/divesites?\" + queryObj.toString());\r\n}\r\n\r\nexport async function getDiveLogs() {\r\n  return loadJson('/api/divelogs')\r\n}\r\n\r\n\r\n\r\nfunction getCookie(name: string) {\r\n  var cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n      var cookies = document.cookie.split(';');\r\n      for (var i = 0; i < cookies.length; i++) {\r\n          var cookie = cookies[i].trim();\r\n          // Does this cookie string begin with the name we want?\r\n          if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n              break;\r\n          }\r\n      }\r\n  }\r\n  return cookieValue;\r\n}\r\nexport async function createDiveLog(diveLog: IDiveLog) {\r\n  const csrftoken = getCookie('csrftoken') || ''\r\n  const headers = new Headers()\r\n  headers.append('Content-Type', 'application/json')\r\n  headers.append('X-CSRFToken', csrftoken)\r\n  const options: RequestInit = { \r\n    method: 'POST',\r\n    body: JSON.stringify(diveLog),\r\n    headers\r\n  }\r\n  const resp = await fetch('/api/divelogs/', options)\r\n\r\n  if (resp.ok) {\r\n    const data = await resp.json()\r\n    return data\r\n  }\r\n\r\n  if (resp.status == 400) {\r\n    const errors = await resp.json()\r\n    const formikError:any = {}\r\n    Object.keys(errors).forEach((key) => {\r\n      formikError[key] = errors[key][0]\r\n    })\r\n    return { errors: formikError }\r\n  }\r\n  // handle other errors\r\n}\r\n\r\nexport const Note = {\r\n  async updateNote({\r\n    diveSiteId,\r\n    user,\r\n    content\r\n  }: {\r\n    diveSiteId: number;\r\n    user: IUser;\r\n    content: string;\r\n  }): Promise<void> {\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${user.access_token}`\r\n    };\r\n    const body = JSON.stringify({ content });\r\n    const data = await loadJson(\r\n      `/api/notes/divesites/${diveSiteId}/users/${user.id}`,\r\n      {\r\n        method: \"POST\",\r\n        headers,\r\n        body\r\n      }\r\n    );\r\n    return data;\r\n  },\r\n  async getNote({\r\n    diveSiteId,\r\n    user\r\n  }: {\r\n    diveSiteId: number;\r\n    user: IUser;\r\n  }): Promise<string> {\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${user.access_token}`\r\n    };\r\n    const data = await loadJson(\r\n      `/api/notes/divesites/${diveSiteId}/users/${user.id}`,\r\n      { headers, methods: \"POST\" }\r\n    );\r\n    if (data == null) {\r\n      return \"\";\r\n    }\r\n    return data.content;\r\n  }\r\n};\r\n\r\n\r\n","import React from 'react';\r\nimport { IDiveSite, Note } from './api'\r\nimport { AppContext } from './AppContext'\r\n\r\ninterface IDestinationCardProps {\r\n    site: IDiveSite;\r\n    isLoggedIn: boolean;\r\n    country: string;\r\n    city: string;\r\n}\r\n\r\nclass DestinationCard extends React.Component<IDestinationCardProps, any> {\r\n    static contextType = AppContext\r\n    _textarea: any\r\n\r\n    async syncNote() {\r\n        const diveSiteId = this.props.site.id\r\n        const content = await Note.getNote({ diveSiteId, user: this.context.user })\r\n        this._textarea.value = content\r\n    }\r\n\r\n    async componentWillMount() {\r\n        if (this.context.user == null) return\r\n        // await this.syncNote()\r\n    }\r\n\r\n    async componentDidUpdate(prevProps: any) {\r\n        if (this.props.site != null && prevProps.site != null && (this.props.site.id !== prevProps.site.id)) {\r\n            this._textarea.value = ''\r\n            // this.syncNote()\r\n        }\r\n    }\r\n\r\n    async onNoteSave(event: any) {\r\n        const diveSiteId = this.props.site.id\r\n        // TODO: check result and feedback UI\r\n        await Note.updateNote({ \r\n            diveSiteId, \r\n            user: this.context.user,\r\n            content: this._textarea.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {site} = this.props\r\n        if (site == null) {\r\n            return (\r\n                <div>\r\n                    <h2 className=\"title is-two\">No Dive Site Selected!</h2>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        let textarea\r\n        if (this.context.user != null) {\r\n            textarea = (\r\n                <div className='full-height'>\r\n                    <textarea \r\n                        autoFocus={true}\r\n                        className=\"textarea borderless\" \r\n                        placeholder=\"Take notes here.\"\r\n                        ref={c => this._textarea = c}\r\n                    >\r\n                    </textarea>\r\n                    <button className='button' \r\n                        onClick={this.onNoteSave.bind(this)}>submit</button>\r\n                </div>\r\n            )\r\n        } else {\r\n            textarea = (\r\n                <div>\r\n                    <textarea \r\n                        className=\"textarea borderless\" \r\n                        placeholder=\"Notes coming soon!\"\r\n                        // placeholder=\"Please login to take notes\" \r\n                        ref={c => this._textarea = c}\r\n                        disabled></textarea>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n        <div>\r\n            <h2 className=\"title is-two\">{site.name}</h2>\r\n            <h3 className=\"subtitle is-four\">{site.city_name}, {site.country_name}</h3>\r\n            { textarea }\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DestinationCard","import React from 'react';\r\nimport diveflag from '../diverflag.png'\r\nimport { IDiveSite } from '../api'\r\n\r\n\r\nconst DiveFlag = ({ site, lat, lng, clickHandler = () => { } }: { site: IDiveSite, lat: number, lng: number, clickHandler?: (site: IDiveSite) => void }) => {\r\n\r\n    return (\r\n        <div className=\"tooltip\"\r\n            data-tooltip={site.name}     \r\n        >\r\n            <img\r\n                onClick={() => clickHandler(site)}\r\n                src={diveflag}\r\n                alt='Diver Down Flag'\r\n                style={{\r\n                    boxShadow: '0px 4px 4px rgba(0, 0, 0, 0.25)',\r\n                    cursor: 'pointer'\r\n                }}\r\n            />\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default DiveFlag","import React, { useState, useEffect } from 'react';\r\nimport GoogleMapReact, { ClickEventValue } from 'google-map-react';\r\nimport DestinationCard from '../DestinationCard';\r\nimport {getDestination, ILocation, ICity} from '../api'\r\nimport DiveFlag from './DiveFlag'\r\nimport { meanBy } from 'lodash-es';\r\n\r\n\r\ninterface Props {\r\n    locations: ILocation[], \r\n    centerCoord?: { lat: number, lng: number},\r\n    activeSite?: ILocation,\r\n    setActiveLocation?: (site?: ILocation)=>void,\r\n    activeSiteCountry?: string,\r\n    activeSiteCity?: string,\r\n    onGoogleApiLoaded?: ({ map , maps }: { map: any, maps: any }) => void\r\n    defaultZoom?: number,\r\n    autoZoom?: boolean,\r\n    children?: React.ReactNode,\r\n}\r\n\r\nfunction DiveMap({ \r\n        locations, \r\n        centerCoord,\r\n        activeSite,\r\n        setActiveLocation,\r\n        activeSiteCountry,\r\n        activeSiteCity,\r\n        onGoogleApiLoaded,\r\n        defaultZoom,\r\n        autoZoom,\r\n        children\r\n    } : Props ) {\r\n\r\n    if (autoZoom === true && locations.length > 0) {\r\n        const lat = meanBy(locations, 'lat')\r\n        const lng = meanBy(locations, 'lng')\r\n        centerCoord = { lat, lng }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n           <div style={{ height: '100vh', width: '100%', position: 'fixed', top: 0 }}>\r\n           {locations != null &&\r\n                <GoogleMapReact\r\n                    bootstrapURLKeys={{ key: 'AIzaSyCaxeoUHkl2GK3sKFaNvLfoRWMTm0EbzK0' }}\r\n                    defaultCenter={centerCoord}\r\n                    defaultZoom={defaultZoom}\r\n                    hoverDistance={5}\r\n                    yesIWantToUseGoogleMapApiInternals\r\n                    onGoogleApiLoaded={({map, maps}) => {\r\n                        if (autoZoom === true) {\r\n                            const bounds = new maps.LatLngBounds()\r\n                            locations.forEach((diveSite) => {\r\n                                bounds.extend({ lat: diveSite.lat, lng: diveSite.lng })\r\n                            })\r\n                            map.fitBounds(bounds)\r\n                        }\r\n\r\n                        if (onGoogleApiLoaded != null) {\r\n                            onGoogleApiLoaded({ map, maps })\r\n                        }\r\n                    }}\r\n                >\r\n                {\r\n                    locations.map(site => <DiveFlag \r\n                        key={site.id} \r\n                        lat={site.lat} \r\n                        lng={site.lng} \r\n                        site={site} \r\n                        clickHandler={setActiveLocation}/>\r\n                    )\r\n                }\r\n                </GoogleMapReact>\r\n           }\r\n            </div>\r\n            <div id=\"content\">\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DiveMap\r\n","import React from 'react';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = { hasError: false };\r\n    }\r\n  \r\n    static getDerivedStateFromError(error) {\r\n      // Update state so the next render will show the fallback UI.\r\n      return { hasError: true };\r\n    }\r\n  \r\n    componentDidCatch(error, info) {\r\n      // You can also log the error to an error reporting service\r\n      console.log(error, info);\r\n    }\r\n  \r\n    render() {\r\n      if (this.state.hasError) {\r\n        // You can render any custom fallback UI\r\n        return <h1>Something went wrong.</h1>;\r\n      }\r\n  \r\n      return this.props.children; \r\n    }\r\n  }\r\n\r\nexport default ErrorBoundary","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DestinationCard from \"./DestinationCard\";\r\nimport { getDestination, IDiveSite, ICity } from \"./api\";\r\nimport DiveMap from \"./components/DiveMap\";\r\nimport ErrorBoundary from './components/ErrorBoundary';\r\n\r\nfunction Destination(props: any) {\r\n  const [diveSites, setDiveSites] = useState<IDiveSite[]>([]);\r\n  const [destination, setDestination] = useState<ICity | null>(null);\r\n  const [activeSite, setActiveSite] = useState<any>(null);\r\n\r\n  const { country, city } = props.match.params\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      const data = await getDestination(country, city)\r\n      const result = data.results[0];\r\n      setDestination(result);\r\n      const diveSites = result.divesite_set || [];\r\n      setDiveSites(diveSites);\r\n      // only show on desktop\r\n      if (diveSites.length > 0 && window.innerWidth > 768) {\r\n        setActiveSite(diveSites[0]);\r\n      }\r\n    })();\r\n  }, [props.match.params.country, props.match.params.city]);\r\n\r\n  const breadcrumb = [\r\n      {\r\n          href: `/destinations`,\r\n          name: 'Country'\r\n      },\r\n    {\r\n        href: `/destinations/${country}`,\r\n        name: country\r\n    },\r\n    {\r\n        href:`/destinations/${country}/${city}`,\r\n        name: city\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <div className=\"level\">\r\n        <nav className=\"breadcrumb\" aria-label=\"breadcrumbs\">\r\n          <ul>\r\n            {breadcrumb.map((crumb, idx) => (\r\n              <li\r\n                style={{zIndex: 10}}\r\n                key={idx}\r\n                className={` ${idx === breadcrumb.length - 1 ? \"is-active\" : \"\"}`}\r\n              >\r\n                <Link\r\n                  to={crumb.href}\r\n                  className=\"title is-5\"\r\n                  style={{ padding: \"10px\" }}\r\n                >\r\n                  {crumb.name}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n      <div>\r\n        {destination != null && diveSites != null && \r\n          <DiveMap\r\n            locations={diveSites}\r\n            activeSite={activeSite}\r\n            centerCoord={{ lat: destination.lat, lng: destination.lng }}\r\n            activeSiteCountry={\"\"}\r\n            activeSiteCity={\"\"}\r\n            setActiveLocation={(activeSite: any) => setActiveSite(activeSite)}\r\n            autoZoom={true}\r\n            defaultZoom={8}\r\n            onGoogleApiLoaded={({ map, maps }: {map:any, maps:any}) => {\r\n              map.addListener('click', () => {\r\n                setActiveSite(undefined)\r\n              })\r\n            }}\r\n          >\r\n            {activeSite != null &&\r\n              <section className=\"section\">\r\n                  <div className=\"container is-fluid\">\r\n                      <div className=\"columns\">\r\n                          <div className=\"column is-three-quarters\"></div>\r\n                          <div className=\"column\">\r\n                              <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                                  <span className=\"icon\"\r\n                                      style={{\r\n                                          position: 'absolute',\r\n                                          right: 15,\r\n                                          cursor: 'pointer',\r\n                                          color: '#363636'\r\n                                      }}\r\n                                      onClick={() => setActiveSite(undefined)}\r\n                                  >\r\n                                      <i className=\"far fa-times-circle\"></i>\r\n                                  </span>\r\n                                  <ErrorBoundary>\r\n                                <DestinationCard \r\n                                      country={country}\r\n                                      city={city}\r\n                                      site={activeSite} \r\n                                      isLoggedIn={true} />\r\n                                    </ErrorBoundary>\r\n                              </div>\r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n              </section>\r\n            }\r\n            </DiveMap>\r\n          }\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Destination;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getCountries, getCities, ICity, loadJson } from \"./api\";\r\nimport DiveMap from \"./components/DiveMap\";\r\n\r\nconst Level = (props: any) => <div className=\"level\">{props.children}</div>;\r\n\r\nfunction DestinationList(props: {\r\n  locationType: string;\r\n  country?: string;\r\n  history: any;\r\n}) {\r\n  const { locationType, country, history } = props;\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [destinations, setDestinations] = useState<ICity[]>([]);\r\n  const [next, setNext] = useState(null as string | null);\r\n\r\n  let breadcrumb = [{ name: \"Countries\", href: \"/destinations\" }];\r\n  if (country != null) {\r\n    breadcrumb.push({\r\n      name: country,\r\n      href: `/destinations/${country}`\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      try {\r\n        let data = null;\r\n        if (locationType === \"countries\") {\r\n          data = await getCountries();\r\n        } else {\r\n          data = await getCities({\r\n            country_name: String(props.country),\r\n            page_size: \"200\"\r\n          });\r\n        }\r\n        setNext(data.next);\r\n        setDestinations(data.results);\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        alert(error);\r\n      }\r\n    })();\r\n  }, [locationType, props.country]);\r\n\r\n  return (\r\n    <DestinationList_\r\n      history={history}\r\n      breadcrumb={breadcrumb}\r\n      isLoading={isLoading}\r\n      destinations={destinations}\r\n      locationType={locationType}\r\n      hasMore={next != null}\r\n      loadMoreHandler={async () => {\r\n        if (next == null) return;\r\n        const urlObj = new URL(next);\r\n        // fix different host in development\r\n        const url = urlObj.href.replace(urlObj.origin, \"\");\r\n\r\n        const data = await loadJson(url);\r\n        data.results = data.results.map((datum: ICity) => {\r\n          datum.country_name = country;\r\n          return datum;\r\n        });\r\n\r\n        const newList = destinations.concat(data.results);\r\n        setDestinations(newList);\r\n        setNext(data.next);\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\n\r\n\r\ninterface IBreadcrumb {\r\n  href: string;\r\n  name: string;\r\n}\r\n\r\nexport const DestinationList_ = ({\r\n  breadcrumb,\r\n  isLoading,\r\n  destinations,\r\n  locationType,\r\n  hasMore,\r\n  loadMoreHandler,\r\n  history\r\n}: {\r\n  breadcrumb: IBreadcrumb[];\r\n  isLoading: boolean;\r\n  destinations: ICity[];\r\n  locationType: string;\r\n  hasMore: boolean;\r\n  loadMoreHandler: Function;\r\n  history: any\r\n}) => {\r\n  return (\r\n    <div>\r\n      {destinations.length > 0 && (\r\n        <DiveMap\r\n          locations={destinations}\r\n          activeSite={undefined}\r\n          activeSiteCountry={\"\"}\r\n          activeSiteCity={\"\"}\r\n          setActiveLocation={(location: any) => {\r\n              if (locationType == 'countries') {\r\n                  history.push(`/destinations/${location.name}`)\r\n              } else {\r\n                  history.push(`/destinations/${location.country_name}/${location.name}`)\r\n              }\r\n          }}\r\n          autoZoom={true}\r\n          defaultZoom={8}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DestinationList;\r\n","import React from 'react'\r\n\r\nconst About = () =>\r\n    <div className=\"section\">\r\n        <div className=\"container\">\r\n            <div className=\"columns\">\r\n                <div className=\"column is-half is-offset-one-quarter\">\r\n                    <h2 className=\"title is-2\">About</h2>\r\n                    <p>The goal of <a href=\"/\" className=\"has-text-weight-bold\">Reefbase</a> is to be a place where scuba divers can collect information about a dive site before, during, and after a diving trip.</p><br />\r\n                    <p>Currently, the application is in development mode, so things will change and data could get lost.</p><br />\r\n                    <p>The dive site geo GPS coordinate are from <a href=\"http://divesites.com\" target=\"_blank\" rel=\"noopener noreferrer\">divesites.com</a></p><br />\r\n                    <p>Created by <a href=\"https://harinsang.com\" target=\"_blank\" rel=\"noopener noreferrer\">Harin Sanghirun</a>.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\nexport default About\r\n","//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n//:::                                                                         :::\r\n//:::  This routine calculates the distance between two points (given the     :::\r\n//:::  latitude/longitude of those points). It is being used to calculate     :::\r\n//:::  the distance between two locations using GeoDataSource (TM) prodducts  :::\r\n//:::                                                                         :::\r\n//:::  Definitions:                                                           :::\r\n//:::    South latitudes are negative, east longitudes are positive           :::\r\n//:::                                                                         :::\r\n//:::  Passed to function:                                                    :::\r\n//:::    lat1, lon1 = Latitude and Longitude of point 1 (in decimal degrees)  :::\r\n//:::    lat2, lon2 = Latitude and Longitude of point 2 (in decimal degrees)  :::\r\n//:::    unit = the unit you desire for results                               :::\r\n//:::           where: 'M' is statute miles (default)                         :::\r\n//:::                  'K' is kilometers                                      :::\r\n//:::                  'N' is nautical miles                                  :::\r\n//:::                                                                         :::\r\n//:::  Worldwide cities and other features databases with latitude longitude  :::\r\n//:::  are available at https://www.geodatasource.com                         :::\r\n//:::                                                                         :::\r\n//:::  For enquiries, please contact sales@geodatasource.com                  :::\r\n//:::                                                                         :::\r\n//:::  Official Web site: https://www.geodatasource.com                       :::\r\n//:::                                                                         :::\r\n//:::               GeoDataSource.com (C) All Rights Reserved 2018            :::\r\n//:::                                                                         :::\r\n//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n\r\nfunction distance(lat1, lon1, lat2, lon2, unit) {\r\n\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\treturn 0;\r\n\t}\r\n\telse {\r\n\t\tvar radlat1 = Math.PI * lat1/180;\r\n\t\tvar radlat2 = Math.PI * lat2/180;\r\n\t\tvar theta = lon1-lon2;\r\n\t\tvar radtheta = Math.PI * theta/180;\r\n\t\tvar dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\tif (dist > 1) {\r\n\t\t\tdist = 1;\r\n\t\t}\r\n\t\tdist = Math.acos(dist);\r\n\t\tdist = dist * 180/Math.PI;\r\n\t\tdist = dist * 60 * 1.1515;\r\n\t\tif (unit==\"K\") { dist = dist * 1.609344 }\r\n\t\tif (unit==\"N\") { dist = dist * 0.8684 }\r\n\t\treturn dist;\r\n\t}\r\n}\r\n\r\nexport default distance","import React, { useState, useEffect } from \"react\";\r\nimport DiveMap from \"./components/DiveMap\";\r\nimport distance from \"./distance\";\r\nimport { getDiveSites, IDiveSite } from \"./api\";\r\n\r\nconst MapPage = function(props: any) {\r\n  const [activeSite, setActiveSite] = useState(null as any)\r\n  const [searchCircle, setSearchCircle] = useState({\r\n    lat: 26.5293775, //florida\r\n    lng: -82.8939276,\r\n    radius: 240\r\n  });\r\n  const [diveSites, setDiveSites] = useState([] as IDiveSite[]);\r\n\r\n  function setSearchCircleFromMap(map: any) {\r\n    const center = map.getCenter().toJSON();\r\n    const bound = map.getBounds().toJSON();\r\n    const latDist = distance(bound.west, 0, bound.east, 0, \"K\");\r\n    const lngDist = distance(0, bound.north, 0, bound.south, \"K\");\r\n    const radius = Math.min(latDist, lngDist);\r\n    center.radius = radius;\r\n    // console.log('set circle to', center)\r\n    setSearchCircle(center);\r\n  }\r\n\r\n  function onLoad({ map, maps }: { map: any; maps: any }) {\r\n    setSearchCircleFromMap(map);\r\n\r\n    map.addListener(\"dragend\", () => setSearchCircleFromMap(map));\r\n    map.addListener(\"zoom_changed\", () => setSearchCircleFromMap(map));\r\n  }\r\n\r\n  async function updateDiveSites() {\r\n    const query = Object.assign({}, searchCircle) as any;\r\n    query.page_size = 100;\r\n    query.include_location = \"true\";\r\n\r\n    const data = await getDiveSites(query);\r\n    // console.log('new dive sites', data)\r\n\r\n    // const center: IDiveSite = {\r\n    //     id: 1,\r\n    //     lat: searchCircle.lat,\r\n    //     lng: searchCircle.lng,\r\n    //     name: 'center',\r\n    //     destination: '',\r\n    //     country: ''\r\n    // }\r\n\r\n    setDiveSites(data.results);\r\n    // setDiveSites([center])\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      updateDiveSites();\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container is-fluid\">\r\n          <div className=\"columns\">\r\n              <div className=\"column is-two-fifths\"></div>\r\n              <div className=\"column is-one-fifths\">\r\n                  <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                  <button\r\n                      className=\"button\"\r\n                      style={{zIndex:10, border: 'none', background: 'rgba(21,60,106,0.9)', color: 'white'}}\r\n                      onClick={() => updateDiveSites()}\r\n                  >\r\n                      Redo Search Current Area\r\n                  </button>\r\n                  </div>\r\n              </div>\r\n              <div className=\"column is-two-fifths\"></div>\r\n          </div>\r\n      </div>\r\n      <DiveMap\r\n        locations={diveSites}\r\n        activeSite={activeSite}\r\n        centerCoord={{ lat: searchCircle.lat, lng: searchCircle.lng }}\r\n        activeSiteCountry={\"\"}\r\n        activeSiteCity={\"\"}\r\n        setActiveLocation={(activeSite: any) => setActiveSite(activeSite)}\r\n        onGoogleApiLoaded={onLoad}\r\n        defaultZoom={8}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MapPage;\r\n","import React, { useState } from \"react\";\r\nimport { IDiveSite, APIResults } from '../api'\r\n\r\nconst SEARCH_TIMEOUT_MS = 500\r\n\r\nconst DiveSiteSelect = ({\r\n  handleChange,\r\n  getDiveSites,\r\n  name\r\n}: {\r\n  name: string;\r\n  handleChange: (e: React.ChangeEvent<any>) => void;\r\n  getDiveSites: (query?: any) => Promise<APIResults<IDiveSite>>;\r\n}) => {\r\n\r\n  const [diveSites, setDiveSites] = useState([] as IDiveSite[])\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [searchTimeout, setSearchTimeout] = useState()\r\n\r\n  return (\r\n    <div className=\"control has-icons left\">\r\n        <input type=\"text\" \r\n            onChange={(e) => {\r\n              const value = e.target.value\r\n              clearTimeout(searchTimeout)\r\n              const newTimeout = setTimeout(async () => {\r\n                if (isLoading) return\r\n                setIsLoading(true)\r\n                const result = await getDiveSites({\r\n                    keyword: value\r\n                })\r\n                setIsLoading(false)\r\n                setDiveSites(result.results)\r\n              }, SEARCH_TIMEOUT_MS)\r\n              setSearchTimeout(newTimeout)\r\n            }}\r\n            placeholder='Search Dive Site by Name'\r\n        />\r\n      <div className=\"select\">\r\n        <select\r\n          name={name}\r\n          onChange={handleChange}\r\n        >\r\n          {diveSites.map((d: any) => (\r\n            <option key={d.id} value={d.id}>{d.name}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <span className=\"icon is-left\">\r\n        <i className=\"fas fa-globe\" />\r\n      </span> \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DiveSiteSelect;\r\n","import React, { useState } from \"react\";\r\nimport { sortBy } from \"lodash-es\";\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport DiveSiteSelect from './DiveSiteSelect'\r\nimport { IDiveSite, APIResults, createDiveLog } from '../api'\r\n\r\ninterface Props {\r\n  getDiveSites: (q?: any) => Promise<APIResults<IDiveSite>>;\r\n  onSubmitted?: Function,\r\n  onCanceled?: () => void\r\n}\r\n\r\nconst DiveLogForm = (props: Props) => {\r\n  const { \r\n    getDiveSites,\r\n    onSubmitted,\r\n    onCanceled\r\n  } = props;\r\n  return (\r\n    <Formik\r\n      initialValues={{\r\n        date: new Date().toISOString().substring(0, 10),\r\n        divesite_id: 1,\r\n        meta: undefined,\r\n        rating: undefined,\r\n        notes: undefined\r\n      }}\r\n      onSubmit={async (values, { setSubmitting, setErrors }) => {\r\n        // if (values.divesite_id == null) return;\r\n        // values.divesite_id = Number(values.divesite_id)\r\n        const result = await createDiveLog(values);\r\n        if (result.errors) {\r\n          setErrors(result.errors);\r\n        } else {\r\n          if (onSubmitted != null) onSubmitted()\r\n        }\r\n      }}\r\n    >\r\n      {(props: any) => {\r\n        const { errors, handleChange } = props;\r\n        return (\r\n          <Form>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Date</label>\r\n              <div className=\"control\">\r\n                <Field\r\n                  name=\"date\"\r\n                  type=\"date\"\r\n                  data-display-mode=\"inline\"\r\n                  data-is-range=\"true\"\r\n                  data-close-on-select=\"false\"\r\n                />\r\n              </div>\r\n              <ErrorMessage name=\"date\" />\r\n            </div>\r\n            <div className=\"field\">\r\n              <label className=\"label\" htmlFor=\"\">\r\n                Time\r\n              </label>\r\n              <div className=\"control\">\r\n                <Field\r\n                  type=\"time\"\r\n                  data-display-mode=\"inline\"\r\n                  data-is-range=\"true\"\r\n                  data-close-on-select=\"false\"\r\n                />\r\n                <ErrorMessage name=\"time\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Dive Site</label>\r\n              <div className=\"control\">\r\n                <DiveSiteSelect\r\n                  name={'divesite_id'}\r\n                  getDiveSites={getDiveSites}\r\n                  handleChange={handleChange}\r\n                />\r\n                <ErrorMessage name=\"divesite_id\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"field\">\r\n              <label className=\"label\">Notes</label>\r\n              <div className=\"control\">\r\n                <textarea className=\"textarea\" name=\"notes\" />\r\n                <ErrorMessage name=\"notes\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Meta</label>\r\n              <div className=\"control\">\r\n                <textarea className=\"textarea\" name=\"meta\" />\r\n                {errors.meta}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Rating</label>\r\n              <div className=\"control\">\r\n                <Field type=\"number\" name=\"rating\" />\r\n                <ErrorMessage name=\"rating\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"field is-grouped\">\r\n              <div className=\"control\">\r\n                <button className=\"button is-primary\">Create</button>\r\n              </div>\r\n              <div className=\"control\">\r\n                <button className=\"button is-text\" onClick={(e) => {\r\n                  e.preventDefault()\r\n                  if (onCanceled != null) onCanceled()\r\n                }}>Cancel</button>\r\n              </div>\r\n            </div>\r\n            <pre>{JSON.stringify(props, null, 2)}</pre>\r\n          </Form>\r\n        );\r\n      }}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default DiveLogForm;\r\n","import React from 'react';\r\n\r\ninterface Props {\r\n    diveLogs: any[]\r\n}\r\n\r\nconst DiveLogsList = ({ diveLogs }: Props) => {\r\n\r\n    return (\r\n      <ul>\r\n        {diveLogs.map((diveLog: any) => (\r\n          <li key={diveLog.id} className=\"card\">\r\n            <div className=\"card-header-title\">\r\n              <div className=\"columns\" style={{flexGrow:'inherit'}}>\r\n                <div className=\"column is-two-thirds\">\r\n                  <div className=\"title is-size-6\">\r\n                    {diveLog.divesite.name}\r\n                  </div>\r\n                  <div className=\"subtitle is-size-7\">\r\n                    {diveLog.divesite.city.name},{\" \"}\r\n                    {diveLog.divesite.city.country.name}\r\n                  </div>\r\n                </div>\r\n                <div className=\"column is-one-thirds is-size-7 has-text-right\">\r\n                    <div>{diveLog.date}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* <pre>{JSON.stringify(diveLog, null ,2)} */}\r\n\r\n            {/* </pre> */}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n}\r\n\r\nexport default DiveLogsList","import React, { ReactChildren } from 'react';\r\n\r\n\r\nconst CardRight = ({ children }: { children: React.ReactNode }) => \r\n    <section className=\"section\">\r\n        <div className=\"container is-fluid\">\r\n            <div className=\"columns\">\r\n                <div className=\"column is-three-quarters\"></div>\r\n                <div className=\"column\">\r\n                    <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                        {children}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n\r\nexport default CardRight","import React, { useState, useEffect } from 'react';\r\nimport DiveLogForm from './components/DiveLogForm'\r\nimport DiveLogsList from './components/DiveLogsList'\r\nimport CardRight from './components/CardRight'\r\nimport DiveMap from './components/DiveMap'\r\nimport { meanBy } from 'lodash-es'\r\n\r\nimport { getDiveSites, getDiveLogs} from './api'\r\n\r\nexport const DiveLogsPage = () => {\r\n    const [diveLogs, setDiveLogs ] = useState([] as any[])\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [isCreate, setIsCreate] = useState(false)\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            setIsLoading(true)\r\n            const result = await getDiveLogs()\r\n            setIsLoading(false)\r\n            setDiveLogs(result.results)\r\n        })()\r\n    }, [])\r\n\r\n    let lat = 0\r\n    let lng = 0\r\n    if (diveLogs.length > 0) {\r\n      lat = meanBy(diveLogs, (d) => d.divesite.lat)\r\n      lng = meanBy(diveLogs, (d) => d.divesite.lng)\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <DiveMap\r\n          locations={diveLogs.map(d => d.divesite)}\r\n          defaultZoom={8}\r\n          centerCoord={{ lat, lng }}\r\n          autoZoom={true}\r\n        >\r\n          <CardRight>\r\n            {isCreate ? (\r\n\r\n              <DiveLogForm\r\n                getDiveSites={getDiveSites}\r\n                onSubmitted={() => window.location.reload()}\r\n                onCanceled={() => setIsCreate(false)}\r\n              />\r\n            ) : (\r\n              <>\r\n              <button\r\n              className=\"button\"\r\n              onClick={() => {\r\n                setIsCreate(!isCreate);\r\n              }}\r\n            >\r\n              + New Log\r\n            </button>\r\n              <DiveLogsList diveLogs={diveLogs} />\r\n              </>\r\n\r\n            )}\r\n          </CardRight>\r\n        </DiveMap>\r\n      </>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default DiveLogsPage\r\n","import React from 'react';\r\n\r\nconst ErrorView = () => {\r\n    return (\r\n        <section className=\"hero\">\r\n            <div className=\"hero-body\">\r\n                <div className=\"container\">\r\n                    Something went wrong!\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ErrorView","import React from \"react\";\nimport \"./App.scss\";\nimport '../node_modules/bulma-extensions/bulma-calendar/dist/js/bulma-calendar'\nimport Navbar from \"./Navbar\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect,\n  Switch\n} from \"react-router-dom\";\nimport Destination from \"./Destination\";\nimport DestinationList from \"./DestinationList\";\nimport About from \"./About\";\nimport MapPage from \"./MapPage\";\nimport DiveLogsPage from './DiveLogsPage'\nimport ErrorView from './components/ErrorView'\nimport { AppContext, DEFAULT_STATE } from \"./AppContext\";\nimport { IUser } from \"./api\";\n\nfunction DestinationPage(props: any) {\n  return <Destination {...props} />;\n}\n\nfunction DestinationListPage(props: any) {\n  const pathname = props.location.pathname;\n  if (pathname === \"/destinations\") {\n    return <DestinationList \n      locationType=\"countries\" \n      history={props.history}\n    />;\n  }\n  return (\n    <DestinationList\n      locationType=\"cities\"\n      country={props.match.params.country}\n      history={props.history}\n    />\n  );\n}\n\nclass App extends React.Component {\n  state = DEFAULT_STATE;\n  constructor(props: any) {\n    super(props);\n   \n  }\n\n  static getDerivedStateFromError(error: any) {\n    return { hasError: true }\n  }\n\n  componentDidCatch(error: any, info: any) {\n    this.setState({ error })\n  }\n\n  updateUser = (user: IUser | null) => {\n    this.setState({ user });\n    localStorage.setItem(\"user\", JSON.stringify(user));\n  };\n\n  render() {\n\n    if (this.state.hasError) {\n      return (\n        <>\n          <Navbar />\n          <ErrorView />\n        </>\n      )\n    }\n\n    return (\n      <AppContext.Provider\n        value={{\n          ...this.state,\n          updateUser: this.updateUser\n        }}\n      >\n        <Router>\n          <div>\n            <Navbar />\n            <Route\n              exact\n              path=\"/\"\n              render={() => <Redirect to=\"/destinations\" />}\n            />\n            <Route path=\"/about/\" component={About} />\n            <Route\n              path=\"/destinations/\"\n              exact\n              component={DestinationListPage}\n            />\n            <Switch>\n              <Route path=\"/destinations/map\" exact component={MapPage} />\n              <Route\n                path=\"/destinations/:country\"\n                exact\n                component={DestinationListPage}\n              />\n              <Route\n                path=\"/destinations/:country/:city\"\n                exact\n                component={DestinationPage}\n              />\n              <Route\n                path='/divelogs'\n                component={DiveLogsPage}\n              />\n              <Route\n                path='/divelogs/create'\n                component={DiveLogsPage}\n              />\n            </Switch>\n          </div>\n        </Router>\n      </AppContext.Provider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('page'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEXSURBVHgBvZSBCYJAFIZ/j6goqDYoaoMGKGiRRgjawAYIWiBokIIGcAcdIDCCLAKtZxyked2d3fmBKMfzPT/f4znJC3xw3+0QrVaIfR+2iAGX5Q8b8zk6+316twkrPBwM0N5u04ueKyvMsWnPpAGW7NllNkMcBNJA0/bscTziPB7jttnIgw3ap786CUNcl0tUaZ/pcZX2X8NVlb1wqrl95LqQJilh75wYS1QSdw4HsH5fFpquWlq5tHqFMUUrU5QsHA6N2isZ5xOr2tO8kH1+WJWNMy9p2Du9Hlrr9ftDc/bahTlkEo5GSpNfm07R9Tw0F4v/CxNl7euTiX6PRej0HmV6LELHnjBWmKPae+OFCRV7K4U5v+yfW0isVFYNLj4AAAAASUVORK5CYII=\""],"sourceRoot":""}