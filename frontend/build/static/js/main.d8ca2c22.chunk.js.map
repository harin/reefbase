{"version":3,"sources":["AppContext.tsx","Navbar.tsx","lib/api.ts","DestinationCard.tsx","components/DiveMarker.tsx","lib/utils.ts","components/DiveMap.tsx","components/ErrorBoundary.js","Destination.tsx","DestinationList.tsx","About.tsx","distance.js","MapPage.tsx","components/DiveSiteSelect.tsx","components/DiveLogForm.tsx","components/DiveLogsList.tsx","components/CardRight.tsx","DiveLogsPage.tsx","components/ErrorView.tsx","App.tsx","serviceWorker.js","index.js"],"names":["DEFAULT_STATE","user","undefined","hasError","AppContext","React","createContext","Navbar","state","active","logout","_callee","regenerator_default","a","wrap","_context","prev","next","_this","context","updateUser","stop","closeMenu","setState","_this2","this","react_default","createElement","className","id","role","aria-label","style","paddingLeft","paddingRight","href","concat","aria-expanded","data-target","onClick","e","preventDefault","aria-hidden","backgroundColor","react_router_dom","to","Component","contextType","loadJson","_x","_loadJson","apply","arguments","_callee3","path","options","resp","data","error","errorData","_args3","_context3","length","headers","fetch","sent","ok","json","abrupt","t0","statusText","Error","getCountries","_getCountries","_callee5","params","paramsObj","_args5","_context5","page_size","URLSearchParams","toString","getCities","_getCities","_callee6","_args6","_context6","country_name","results","map","datum","getDestination","_x4","_x5","_getDestination","_callee7","city_name","_context7","include_divesites","result","divesite_set","diveSiteParser","divesite","min_temp_by_month","JSON","parse","max_temp_by_month","meta","getDiveSites","_x6","_getDiveSites","_callee8","query","queryObj","_context8","getDiveLogs","_getDiveLogs","_callee10","_context10","getCookie","name","cookieValue","document","cookie","cookies","split","i","trim","substring","decodeURIComponent","createDiveLog","_x8","_createDiveLog","_callee11","diveLog","csrftoken","errors","formikError","_context11","Headers","append","method","body","stringify","status","Object","keys","forEach","key","Note","updateNote","_updateNote","asyncToGenerator","mark","_ref","diveSiteId","content","Content-Type","Authorization","access_token","_x9","getNote","_getNote","_callee2","_ref2","_context2","methods","_x10","DestinationCard","_textarea","props","site","value","prevProps","event","console","log","autoFocus","placeholder","ref","c","onNoteSave","bind","disabled","tempData","maxTemps","minTemps","minTemp","maxTemp","push","x","y","victory_chart","height","victory_axis","tickValues","tickFormat","dependentAxis","fixLabelOverlap","victory_line","DiveFlag","zoom","color","diameter","text","children","_ref$clickHandler","clickHandler","size","calculateMarkerSize","data-tooltip","width","borderRadius","display","flexDirection","alignContent","cursor","boxShadow","border","textAlign","flexGrow","position","textShadow","fontWeight","left","calculateMeterPerPixel","lat","Math","cos","PI","pow","timeout","googleMapStyle","mapStyle","NO_CLUSTER_ZOOM_THRESHOLD","withRouter","locations","centerCoord","setActiveLocation","activeSite","onGoogleApiLoaded","activeSiteCountry","activeSiteCity","defaultZoom","autoZoom","location","history","onClickUpdate","_useState","useState","_useState2","slicedToArray","dbScanRadiusKM","updateDbScanRadius","lng","meanBy","hasLocationQuery","_querystring$parse","querystring","search","Number","features","loc","turf","collection","properties","assign","dbscan","clusters","groupBy","noises","filter","feature","cluster","Fragment","zIndex","background","top","lib_default","styles","bootstrapURLKeys","defaultCenter","hoverDistance","yesIWantToUseGoogleMapApiInternals","maps","bounds","LatLngBounds","setCenter","setZoom","diveSite","extend","fitBounds","getZoom","addListener","clearTimeout","setTimeout","_map$getCenter","getCenter","replace","pathname","clusterRadiusKM","cg","names","slice","join","geometry","coordinates","DiveMarker","String","point","ErrorBoundary","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","info","Destination","diveSites","setDiveSites","_useState3","_useState4","destination","setDestination","_useState5","_useState6","setActiveSite","_props$match$params","match","country","city","useEffect","window","innerWidth","breadcrumb","crumb","idx","padding","components_DiveMap","right","components_ErrorBoundary","src_DestinationCard","DestinationList_","_ref3","isLoading","destinations","locationType","hasMore","loadMoreHandler","DestinationList","setIsLoading","setDestinations","setNext","alert","DestinationList_DestinationList_","urlObj","url","newList","URL","origin","About","target","rel","distance","lat1","lon1","lat2","lon2","unit","radlat1","radlat2","theta","radtheta","dist","sin","acos","effectiveLat","effectiveZoom","radius","searchCircle","setSearchCircle","setSearchCircleFromMap","center","toJSON","bound","getBounds","latDist","west","east","lngDist","north","south","min","updateDiveSites","_updateDiveSites","include_location","DiveSiteSelect","handleChange","searchTimeout","setSearchTimeout","type","onChange","newTimeout","keyword","d","DiveLogForm","onSubmitted","onCanceled","formik_esm","initialValues","date","Date","toISOString","divesite_id","rating","notes","onSubmit","values","setErrors","setSubmitting","_x2","data-display-mode","data-is-range","data-close-on-select","htmlFor","components_DiveSiteSelect","DiveLogsList","diveLogs","CardRight","DiveLogsPage","setDiveLogs","isCreate","setIsCreate","components_CardRight","components_DiveLogForm","reload","components_DiveLogsList","ErrorView","DestinationPage","src_Destination","DestinationListPage","src_DestinationList","App","localStorage","setItem","src_Navbar","components_ErrorView","Provider","objectSpread","react_router","exact","render","component","MapPage","Boolean","hostname","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"qiDAGaA,EAAgB,CACzBC,UAAMC,EACNC,UAAU,GAEDC,EAAaC,IAAMC,cAAgCN,GCH1DO,6MAEJC,MAAQ,CACNC,QAAQ,KAGVC,4BAAS,SAAAC,IAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAEPC,EAAKC,QAAQC,WAAW,MAFjB,wBAAAL,EAAAM,SAAAV,QAKTW,UAAY,WACVJ,EAAKK,SAAS,CAAEd,QAAQ,6EAGjB,IAAAe,EAAAC,KAEP,OACEC,EAAAb,EAAAc,cAAA,OACEC,UAAU,iBACVC,GAAG,MACHC,KAAK,aACLC,aAAW,kBACXC,MAAO,CAAEC,YAAa,GAAIC,aAAc,KAExCR,EAAAb,EAAAc,cAAA,OAAKC,UAAU,gBACbF,EAAAb,EAAAc,cAAA,KAAGQ,KAAK,IAAIP,UAAU,eACpBF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,gBAAgBI,MAAO,CAAEE,aAAc,KAAtD,aAIFR,EAAAb,EAAAc,cAAA,KACEQ,KAAK,IACLL,KAAK,SACLF,UAAS,wBAAAQ,OACPX,KAAKjB,MAAMC,OAAS,YAAc,IAEpCsB,aAAW,OACXM,gBAAc,QACdC,cAAY,qBACZC,QAAS,SAAAC,GACPA,EAAEC,iBACFjB,EAAKD,SAAS,CAAEd,QAASe,EAAKhB,MAAMC,WAGtCiB,EAAAb,EAAAc,cAAA,QAAMe,cAAY,SAClBhB,EAAAb,EAAAc,cAAA,QAAMe,cAAY,SAClBhB,EAAAb,EAAAc,cAAA,QAAMe,cAAY,WAGtBhB,EAAAb,EAAAc,cAAA,OACEC,UAAS,eAAAQ,OAAiBX,KAAKjB,MAAMC,OAAS,YAAc,IAC5DuB,MAAO,CACLW,gBAAiB,kBAGnBjB,EAAAb,EAAAc,cAAA,OAAKC,UAAU,gBACbF,EAAAb,EAAAc,cAACiB,EAAA,EAAD,CAAMhB,UAAU,cAAcW,QAASd,KAAKH,UAAWuB,GAAG,UAA1D,SAGAnB,EAAAb,EAAAc,cAACiB,EAAA,EAAD,CACEhB,UAAU,cACVW,QAASd,KAAKH,UACduB,GAAG,iBAHL,gBAOAnB,EAAAb,EAAAc,cAACiB,EAAA,EAAD,CACEhB,UAAU,cACVW,QAASd,KAAKH,UACduB,GAAG,qBAHL,iBAnESxC,IAAMyC,WAArBvC,EACGwC,YAAc3C,EA0FRG,wBC1BR,SAAeyC,EAAtBC,GAAA,OAAAC,EAAAC,MAAA1B,KAAA2B,sDAAO,SAAAC,EAAwBC,GAAxB,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAR,UAAA,OAAAxC,EAAAC,EAAAC,KAAA,SAAA+C,GAAA,cAAAA,EAAA7C,KAAA6C,EAAA5C,MAAA,cACkB,OADoBsC,EAAtCK,EAAAE,OAAA,QAAA5D,IAAA0D,EAAA,GAAAA,EAAA,GAAqD,IAC9CG,UACVR,EAAQQ,QAAU,IAGpBR,EAAQQ,QAAQ,gBAAkB,mBAL7BF,EAAA5C,KAAA,EAOc+C,MAAMV,EAAMC,GAP1B,YAOCC,EAPDK,EAAAI,MAQIC,GARJ,CAAAL,EAAA5C,KAAA,gBAAA4C,EAAA5C,KAAA,EASgBuC,EAAKW,OATrB,cASGV,EATHI,EAAAI,KAAAJ,EAAAO,OAAA,SAUIX,GAVJ,eAaDC,EAAQ,GAbPG,EAAA7C,KAAA,GAAA6C,EAAA5C,KAAA,GAeqBuC,EAAKW,OAf1B,QAeGR,EAfHE,EAAAI,KAgBHP,EAAQC,EAAUD,MAhBfG,EAAA5C,KAAA,iBAAA4C,EAAA7C,KAAA,GAAA6C,EAAAQ,GAAAR,EAAA,UAkBHH,EAAQF,EAAKc,WAlBV,cAoBC,IAAIC,MAAMb,GApBX,yBAAAG,EAAAxC,SAAAgC,EAAA,0CAmCA,SAAemB,IAAtB,OAAAC,EAAAtB,MAAA1B,KAAA2B,sDAAO,SAAAsB,IAAA,IAAAC,EAAAC,EAAAC,EAAAzB,UAAA,OAAAxC,EAAAC,EAAAC,KAAA,SAAAgE,GAAA,cAAAA,EAAA9D,KAAA8D,EAAA7D,MAAA,cACL0D,EADKE,EAAAf,OAAA,QAAA5D,IAAA2E,EAAA,GAAAA,EAAA,GAC2B,CAAEE,UAAW,OAEvCH,EAAY,IAAII,gBAAgBL,GAHjCG,EAAAV,OAAA,SAIEpB,EAAQ,kBAAAZ,OAAmBwC,EAAUK,cAJvC,wBAAAH,EAAAzD,SAAAqD,6BAOA,SAAeQ,IAAtB,OAAAC,EAAAhC,MAAA1B,KAAA2B,sDAAO,SAAAgC,IAAA,IAAAT,EAAAC,EAAAnB,EAAA4B,EAAAjC,UAAA,OAAAxC,EAAAC,EAAAC,KAAA,SAAAwE,GAAA,cAAAA,EAAAtE,KAAAsE,EAAArE,MAAA,cACL0D,EADKU,EAAAvB,OAAA,QAAA5D,IAAAmF,EAAA,GAAAA,EAAA,GACiD,CACpDE,aAAc,WACdR,UAAW,MAGPH,EAAY,IAAII,gBAAgBL,GANjCW,EAAArE,KAAA,EAOc+B,EAAQ,eAAAZ,OAAgBwC,EAAUK,aAPhD,cAOCxB,EAPD6B,EAAArB,MAQAuB,QAAU/B,EAAK+B,QAAQC,IAAI,SAACC,GAE/B,OADAA,EAAMH,aAAeZ,EAAOY,aACrBG,IAVJJ,EAAAlB,OAAA,SAYEX,GAZF,wBAAA6B,EAAAjE,SAAA+D,6BAeA,SAAeO,EAAtBC,EAAAC,GAAA,OAAAC,EAAA3C,MAAA1B,KAAA2B,sDAAO,SAAA2C,EACLR,EACAS,GAFK,IAAApB,EAAAnB,EAAA,OAAA7C,EAAAC,EAAAC,KAAA,SAAAmF,GAAA,cAAAA,EAAAjF,KAAAiF,EAAAhF,MAAA,cAIC2D,EAAY,IAAII,gBAAgB,CACpCO,eACAS,YACAE,kBAAmB,SAPhBD,EAAAhF,KAAA,EASc+B,EAAQ,eAAAZ,OAAgBwC,EAAUK,aAThD,cASCxB,EATDwC,EAAAhC,MAUIuB,QAAQ1B,OAAS,IACxBL,EAAK+B,QAAU/B,EAAK+B,QAAQC,IAAI,SAACU,GAC/B,OAA2B,MAAvBA,EAAOC,aAA6BD,GACxCA,EAAOC,aAAeD,EAAOC,aAAaX,IAAI,SAACC,GAI7C,OAHAA,EAAQW,EAAeX,IACjBH,aAAeA,EACrBG,EAAMM,UAAYA,EACXN,IAEFS,MAnBNF,EAAA7B,OAAA,SAuBEX,GAvBF,wBAAAwC,EAAA5E,SAAA0E,6BA0BP,SAASM,EAAeC,GAItB,OAHAA,EAASC,kBAAoBC,KAAKC,MAAMH,EAASC,mBACjDD,EAASI,kBAAoBF,KAAKC,MAAMH,EAASI,mBACjDJ,EAASK,KAAOH,KAAKC,MAAMH,EAASK,MAC7BL,EAGF,SAAeM,EAAtBC,GAAA,OAAAC,EAAA3D,MAAA1B,KAAA2B,sDAAO,SAAA2D,EAA4BC,GAA5B,IAAAC,EAAAzB,EAAA,OAAA5E,EAAAC,EAAAC,KAAA,SAAAoG,GAAA,cAAAA,EAAAlG,KAAAkG,EAAAjG,MAAA,cACCgG,EAAW,IAAIjC,gBAAgBgC,GADhCE,EAAAjG,KAAA,EAEiB+B,EAAS,kBAAoBiE,EAAShC,YAFvD,cAECO,EAFD0B,EAAAjD,MAGGuB,QAAUA,EAAQA,QAAQC,IAAIY,GAHjCa,EAAA9C,OAAA,SAIEoB,GAJF,wBAAA0B,EAAA7F,SAAA0F,6BAYA,SAAeI,IAAtB,OAAAC,EAAAjE,MAAA1B,KAAA2B,sDAAO,SAAAiE,IAAA,OAAAzG,EAAAC,EAAAC,KAAA,SAAAwG,GAAA,cAAAA,EAAAtG,KAAAsG,EAAArG,MAAA,cAAAqG,EAAAlD,OAAA,SACEpB,EAAS,kBADX,wBAAAsE,EAAAjG,SAAAgG,6BAMP,SAASE,EAAUC,GACjB,IAAIC,EAAc,KAClB,GAAIC,SAASC,QAA8B,KAApBD,SAASC,OAE5B,IADA,IAAIC,EAAUF,SAASC,OAAOE,MAAM,KAC3BC,EAAI,EAAGA,EAAIF,EAAQ9D,OAAQgE,IAAK,CACrC,IAAIH,EAASC,EAAQE,GAAGC,OAExB,GAAIJ,EAAOK,UAAU,EAAGR,EAAK1D,OAAS,KAAQ0D,EAAO,IAAM,CACvDC,EAAcQ,mBAAmBN,EAAOK,UAAUR,EAAK1D,OAAS,IAChE,OAIZ,OAAO2D,EAEF,SAAeS,EAAtBC,GAAA,OAAAC,EAAAjF,MAAA1B,KAAA2B,sDAAO,SAAAiF,EAA6BC,GAA7B,IAAAC,EAAAxE,EAAAR,EAAAC,EAAAC,EAAA+E,EAAAC,EAAA,OAAA7H,EAAAC,EAAAC,KAAA,SAAA4H,GAAA,cAAAA,EAAA1H,KAAA0H,EAAAzH,MAAA,cACCsH,EAAYhB,EAAU,cAAgB,IACtCxD,EAAU,IAAI4E,SACZC,OAAO,eAAgB,oBAC/B7E,EAAQ6E,OAAO,cAAeL,GACxBhF,EAAuB,CAC3BsF,OAAQ,OACRC,KAAMtC,KAAKuC,UAAUT,GACrBvE,WARG2E,EAAAzH,KAAA,EAUc+C,MAAM,iBAAkBT,GAVtC,YAUCC,EAVDkF,EAAAzE,MAYIC,GAZJ,CAAAwE,EAAAzH,KAAA,gBAAAyH,EAAAzH,KAAA,GAagBuC,EAAKW,OAbrB,eAaGV,EAbHiF,EAAAzE,KAAAyE,EAAAtE,OAAA,SAcIX,GAdJ,WAiBc,KAAfD,EAAKwF,OAjBJ,CAAAN,EAAAzH,KAAA,gBAAAyH,EAAAzH,KAAA,GAkBkBuC,EAAKW,OAlBvB,eAkBGqE,EAlBHE,EAAAzE,KAmBGwE,EAAkB,GACxBQ,OAAOC,KAAKV,GAAQW,QAAQ,SAACC,GAC3BX,EAAYW,GAAOZ,EAAOY,GAAK,KArB9BV,EAAAtE,OAAA,SAuBI,CAAEoE,OAAQC,IAvBd,yBAAAC,EAAArH,SAAAgH,6BA4BA,IAAMgB,EAAO,CACZC,WADY,eAAAC,EAAAN,OAAAO,EAAA,EAAAP,CAAArI,EAAAC,EAAA4I,KAAA,SAAA9I,EAAA+I,GAAA,IAAAC,EAAA1J,EAAA2J,EAAA7F,EAAA+E,EAAArF,EAAA,OAAA7C,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAEhB0I,EAFgBD,EAEhBC,WACA1J,EAHgByJ,EAGhBzJ,KACA2J,EAJgBF,EAIhBE,QAMM7F,EAAU,CACd8F,eAAgB,mBAChBC,cAAa,UAAA1H,OAAYnC,EAAK8J,eAE1BjB,EAAOtC,KAAKuC,UAAU,CAAEa,YAdd7I,EAAAE,KAAA,EAeG+B,EAAQ,wBAAAZ,OACDuH,EADC,WAAAvH,OACmBnC,EAAK4B,IACjD,CACEgH,OAAQ,OACR9E,UACA+E,SApBY,cAeVrF,EAfU1C,EAAAkD,KAAAlD,EAAAqD,OAAA,SAuBTX,GAvBS,wBAAA1C,EAAAM,SAAAV,MAAA,gBAAAqJ,GAAA,OAAAT,EAAApG,MAAA1B,KAAA2B,YAAA,GAyBZ6G,QAzBY,eAAAC,EAAAjB,OAAAO,EAAA,EAAAP,CAAArI,EAAAC,EAAA4I,KAAA,SAAAU,EAAAC,GAAA,IAAAT,EAAA1J,EAAA8D,EAAAN,EAAA,OAAA7C,EAAAC,EAAAC,KAAA,SAAAuJ,GAAA,cAAAA,EAAArJ,KAAAqJ,EAAApJ,MAAA,cA0BhB0I,EA1BgBS,EA0BhBT,WACA1J,EA3BgBmK,EA2BhBnK,KAKM8D,EAAU,CACd8F,eAAgB,mBAChBC,cAAa,UAAA1H,OAAYnC,EAAK8J,eAlChBM,EAAApJ,KAAA,EAoCG+B,EAAQ,wBAAAZ,OACDuH,EADC,WAAAvH,OACmBnC,EAAK4B,IACjD,CAAEkC,UAASuG,QAAS,SAtCN,UAwCJ,OAJN7G,EApCU4G,EAAApG,MAAA,CAAAoG,EAAApJ,KAAA,eAAAoJ,EAAAjG,OAAA,SAyCP,IAzCO,cAAAiG,EAAAjG,OAAA,SA2CTX,EAAKmG,SA3CI,wBAAAS,EAAAhJ,SAAA8I,MAAA,gBAAAI,GAAA,OAAAL,EAAA/G,MAAA1B,KAAA2B,YAAA,+BCnNdoH,6MAEJC,kNAGQd,EAAalI,KAAKiJ,MAAMC,KAAK9I,YACbwH,EAAKY,QAAQ,CAAEN,aAAY1J,KAAMwB,KAAKN,QAAQlB,cAA9D2J,SACNnI,KAAKgJ,UAAUG,MAAQhB,4PAIE,MAArBnI,KAAKN,QAAQlB,oOAIM4K,qOAWRC,gFACTnB,EAAalI,KAAKiJ,MAAMC,KAAK9I,YAE7BwH,EAAKC,WAAW,CACpBK,aACA1J,KAAMwB,KAAKN,QAAQlB,KACnB2J,QAASnI,KAAKgJ,UAAUG,4IAInB,IAAApJ,EAAAC,KACCkJ,EAASlJ,KAAKiJ,MAAdC,KAER,GADAI,QAAQC,IAAIL,GACA,MAARA,EACF,OACEjJ,EAAAb,EAAAc,cAAA,WACED,EAAAb,EAAAc,cAAA,MAAIC,UAAU,gBAAd,2BAMmB,MAArBH,KAAKN,QAAQlB,KAEbyB,EAAAb,EAAAc,cAAA,OAAKC,UAAU,eACbF,EAAAb,EAAAc,cAAA,YACEsJ,WAAW,EACXrJ,UAAU,sBACVsJ,YAAY,mBACZC,IAAK,SAAAC,GAAC,OAAK5J,EAAKiJ,UAAYW,KAE9B1J,EAAAb,EAAAc,cAAA,UAAQC,UAAU,SAASW,QAASd,KAAK4J,WAAWC,KAAK7J,OAAzD,WAOFC,EAAAb,EAAAc,cAAA,WACED,EAAAb,EAAAc,cAAA,YACEC,UAAU,sBACVsJ,YAAY,qBAEZC,IAAK,SAAAC,GAAC,OAAK5J,EAAKiJ,UAAYW,GAC5BG,UAAQ,KAMhB,IAAMC,EAAkB,GAClBC,EAAkB,GAClBC,EAAkB,GAYxB,OAX8B,MAA1Bf,EAAKpE,mBAAuD,MAA1BoE,EAAKjE,mBACzCiE,EAAKpE,kBAAkB4C,QAAQ,SAACwC,EAAS7D,GAEvC,IAAM8D,EAAUjB,EAAKjE,kBAAkBoB,GACvC0D,EAASK,KAAK,CAAEF,UAASC,YACzBH,EAASI,KAAK,CAAEC,EAAGhE,EAAGiE,EAAGH,IACzBF,EAASG,KAAK,CAAEC,EAAGhE,EAAGiE,EAAGJ,MAI7BZ,QAAQC,IAAIS,GAEV/J,EAAAb,EAAAc,cAAA,WACED,EAAAb,EAAAc,cAAA,MAAIC,UAAU,gBAAgB+I,EAAKnD,MACnC9F,EAAAb,EAAAc,cAAA,MAAIC,UAAU,oBACX+I,EAAK3E,UADR,KACqB2E,EAAKpF,cAE1B7D,EAAAb,EAAAc,cAACqK,EAAA,EAAD,CAAcC,OAAQ,KACpBvK,EAAAb,EAAAc,cAACuK,EAAA,EAAD,CACEC,WAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,IAChDC,WAAY,CACV,MACA,GACA,GACA,OACA,GACA,GACA,OACA,GACA,GACA,MACA,GACA,MAGJ1K,EAAAb,EAAAc,cAACuK,EAAA,EAAD,CACEG,eAAa,EACbC,iBAAe,IAGjB5K,EAAAb,EAAAc,cAAC4K,EAAA,EAAD,CAAa9I,KAAMgI,EAAUK,EAAE,IAAIC,EAAE,MACrCrK,EAAAb,EAAAc,cAAC4K,EAAA,EAAD,CAAa9I,KAAMiI,EAAUI,EAAE,IAAIC,EAAE,eAxHjB1L,IAAMyC,WAA9B0H,EACGzH,YAAc3C,EA+HRoK,0BClHf,IAqDegC,EArDE,SAAA9C,GAQI,IAPnBiB,EAOmBjB,EAPnBiB,KACA8B,EAMmB/C,EANnB+C,KACAC,EAKmBhD,EALnBgD,MACAC,EAImBjD,EAJnBiD,SACAC,EAGmBlD,EAHnBkD,KACAC,EAEmBnD,EAFnBmD,SAEmBC,EAAApD,EADnBqD,oBACmB,IAAAD,EADJ,aACIA,EASnB,OARa,MAATJ,IACFA,EAAQ,OAGM,MAAZC,IACFA,EAlCJ,SAA6BF,GAEzB,GAAY,MAARA,EAAc,OAAO,EAEzB,IAAIO,EAAO,GAAKP,EAAK,GAAK,EAE1B,OADIO,EAAO,KAAIA,EAAO,IACfA,EA4BIC,CAAoBR,IAI/B/K,EAAAb,EAAAc,cAAA,OAAKC,UAAU,UAAUsL,eAAcvC,EAAKnD,KAC1CxF,MAAO,CACLiK,OAAQU,EACRQ,MAAOR,EACPhK,gBAAiB+J,EACjBU,aAAc,MACdC,QAAS,OACTC,cAAe,SACfC,aAAc,SACdC,OAAQ,UACRC,UAAW,kCACXC,OAAQ,mBAEVnL,QAAS,kBAAMwK,EAAapC,KAE5BjJ,EAAAb,EAAAc,cAAA,QACEK,MAAO,CACL0K,MAAO,QACPiB,UAAW,SACXR,MAAO,OACPS,SAAU,IAEZhB,GACFlL,EAAAb,EAAAc,cAAA,QACEK,MAAO,CACL6L,SAAU,WACVC,WAAY,uDACZC,WAAY,IACZC,KAAMrB,EAAW,IAEnBE,gDCtED,SAASoB,EAAuBC,EAAYzB,GAK/C,OAJA1B,QAAQC,IAAIkD,EAAKzB,GACjB1B,QAAQC,IAAImD,KAAKC,IAAIF,EAAMC,KAAKE,GAAK,MACrCtD,QAAQC,IAAImD,KAAKG,IAAI,EAAE7B,IACD,aAAe0B,KAAKC,IAAIF,EAAMC,KAAKE,GAAK,KAAOF,KAAKG,IAAI,EAAG7B,GCwBrF,IAGI8B,GAHEC,GAAiBC,EACjBC,GAA4B,GAuOnBC,mBApOf,SAAAjF,GAcgB,IAbRkF,EAaQlF,EAbRkF,UACAC,EAYQnF,EAZRmF,YAEAC,GAUQpF,EAXRqF,WAWQrF,EAVRoF,mBAGAE,GAOQtF,EATRuF,kBASQvF,EARRwF,eAQQxF,EAPRsF,mBACAG,EAMQzF,EANRyF,YACAC,EAKQ1F,EALR0F,SACAvC,EAIQnD,EAJRmD,SACAwC,EAGQ3F,EAHR2F,SACAC,EAEQ5F,EAFR4F,QACAC,EACQ7F,EADR6F,cACQC,EAEiCC,mBAAS,KAF1CC,EAAAzG,OAAA0G,EAAA,EAAA1G,CAAAuG,EAAA,GAELI,EAFKF,EAAA,GAEWG,EAFXH,EAAA,GAKO,MAAfb,IAAqBA,EAAc,CAAEX,IAAK,EAAG4B,IAAK,KAErC,IAAbV,GAAqBR,EAAU9K,OAAS,IAGxC+K,EAAc,CAAEX,IAFJ6B,YAAOnB,EAAW,OAETkB,IADTC,YAAOnB,EAAW,SAIlC,IAAIoB,GAAmB,EAbXC,EAceC,QAAkBb,EAASc,QAA9CjC,EAdI+B,EAcJ/B,IAAK4B,EAdDG,EAcCH,IAAKrD,EAdNwD,EAcMxD,KACP,MAAPyB,GAAsB,MAAP4B,GAAuB,MAARrD,IAC9BoC,EAAYX,IAAMkC,OAAOlC,GACzBW,EAAYiB,IAAMM,OAAON,GACzBE,GAAmB,GAGvB,IAAMK,EAAWzB,EAAUnJ,IAAI,SAAA6K,GAC7B,OAAOC,QAAW,CAACD,EAAIpC,IAAKoC,EAAIR,KAAMQ,KAIpCE,EAAa,CACfH,SAAUzB,EAAUnJ,IAAI,SAAA6K,GAEtB,MAAO,CACLG,WAFiBxH,OAAOyH,OAAO,GAAIJ,EAAK,CAAEK,OAAQ,cAMpDf,EAAiB,IAEnBY,EAAaD,iBACXA,oBAAuBF,GACvBT,IAIJ,IAAMgB,EAAWC,YAAQL,EAAWH,SAAU,sBAC9CtF,QAAQC,IAAI,CAAE4F,aACd,IAAME,EAASN,EAAWH,SAASU,OAAO,SAACC,GAAD,OACV,MAA9BA,EAAQP,WAAWQ,UAErB,OACEvP,EAAAb,EAAAc,cAAAD,EAAAb,EAAAqQ,SAAA,KACmB,MAAjB3B,GACA7N,EAAAb,EAAAc,cAAA,OAAKC,UAAU,sBACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,yBACfF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,wBACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,uBAAuBC,GAAG,gBACvCH,EAAAb,EAAAc,cAAA,UACEC,UAAU,SACVI,MAAO,CACLmP,OAAQ,GACRzD,OAAQ,OACR0D,WAAY,sBACZ1E,MAAO,SAETnK,QAAS,kBAAMgN,MARjB,8BAcJ7N,EAAAb,EAAAc,cAAA,OAAKC,UAAU,2BAInBF,EAAAb,EAAAc,cAAA,WACED,EAAAb,EAAAc,cAAA,OACEK,MAAO,CACLiK,OAAQ,QACRkB,MAAO,OACPU,SAAU,QACVwD,IAAK,IAGO,MAAbzC,GACClN,EAAAb,EAAAc,cAAC2P,EAAAzQ,EAAD,CACE0C,QAAS,CAAEgO,OAAQ/C,IACnBgD,iBAAkB,CAChBpI,IAAK,2CAEPqI,cAAe5C,EACfM,YAAc1C,GAAQ2D,OAAO3D,IAAU0C,EACvCuC,cAAe,EACfC,oCAAkC,EAClC3C,kBAAmB,SAAA5E,GAAmB,IAAhB3E,EAAgB2E,EAAhB3E,IAAKmM,EAAWxH,EAAXwH,KACzB,IAAiB,IAAbxC,IAA0C,IAArBY,EAA4B,CACnD,IAAM6B,EAAS,IAAID,EAAKE,aAEA,GAApBlD,EAAU9K,QACV2B,EAAIsM,UAAUnD,EAAU,IACxBnJ,EAAIuM,QAAQ,KAEZpD,EAAUzF,QAAQ,SAAA8I,GAClBJ,EAAOK,OAAO,CACVhE,IAAK+D,EAAS/D,IACd4B,IAAKmC,EAASnC,QAGlBrK,EAAI0M,UAAUN,GACDpM,EAAI2M,UACN,IAAI3M,EAAIuM,QAAQ,IAIR,MAArBhD,GACFA,EAAkB,CAAEvJ,MAAKmM,SAG3BnM,EAAI4M,YAAY,iBAAkB,WAEhCC,aAAa/D,IACbA,GAAUgE,WAAW,WAAM,IAAAC,EACJ/M,EAAIgN,YAAjBvE,EADiBsE,EACjBtE,IAAK4B,EADY0C,EACZ1C,IACPrD,EAAOhH,EAAI2M,UACXjC,EAASD,YAAsB,CACnCzD,OACAyB,IAAKA,IACL4B,IAAKA,MAEPR,EAAQoD,QAAQrD,EAASsD,SAAW,IAAMxC,GAE1C,IAEIyC,EADuB,GADL3E,EAAuBC,IAAOzB,GAEO,IACvDA,EAAOiC,KACTkE,EAAkB,GAEpB/C,EAAmB+C,IAClB,SAKL3J,OAAOC,KAAK0H,GACXG,OAAO,SAAC3H,GAAD,MAAgB,aAAPA,IAChB3D,IAAI,SAAC2D,GACJ,IAAM6H,EAAiBL,EAASxH,GAC1BoH,EAAaD,oBAAuBU,GAMpC4B,EAAKtC,eAAkBC,GACzBsC,EAAQ7B,EAAQxL,IAAI,SAACuL,GACvB,OAAOA,EAAQP,WAAWjJ,OAExBsL,EAAMhP,OAAS,IACjBgP,EAAQA,EAAMC,MAAM,EAAE,IAChBlH,KAAK,OAEb,IAAMlB,EAAO,CACXnD,KAAMsL,EAAME,KAAK,MACjB9E,IAAK2E,EAAGI,SAASC,YAAY,GAC7BpD,IAAK+C,EAAGI,SAASC,YAAY,GAC7BrR,IAAK,GAEP,OAAOH,EAAAb,EAAAc,cAACwR,EAAD,CACLxI,KAAMA,EACN8B,KAAMA,EACNrD,IAAKA,EACL8E,IAAKvD,EAAKuD,IACV4B,IAAKnF,EAAKmF,IAEVlD,KAAMwG,OAAOnC,EAAQnN,QACrB6I,SAAU,OAKfmE,EAAOrL,IAAI,SAAC4N,GAEX,IAAM1I,EAAO0I,EAAM5C,WACf7D,EAAO,GACPF,EAAQ,MASZ,MARmB,SAAf/B,EAAKgG,QAAoC,QAAfhG,EAAKgG,SACjCjE,EAAM,SAGI,MAARD,GAAgBA,EAAOiC,KACzB9B,EAAOjC,EAAKnD,MAGP9F,EAAAb,EAAAc,cAACwR,EAAD,CACL1G,KAAMA,EACNrD,IAAKuB,EAAK9I,GACVqM,IAAKvD,EAAKuD,IACV4B,IAAKnF,EAAKmF,IACVpD,MAAOA,EACP/B,KAAMA,EACNoC,aAAc,WACa,MAArB+B,GACFA,EAAkBnE,KAEtBiC,KAEDC,QC/NJyG,eAzBX,SAAAA,EAAY5I,GAAO,IAAAxJ,EAAA,OAAA+H,OAAAsK,EAAA,EAAAtK,CAAAxH,KAAA6R,IACjBpS,EAAA+H,OAAAuK,EAAA,EAAAvK,CAAAxH,KAAAwH,OAAAwK,EAAA,EAAAxK,CAAAqK,GAAAI,KAAAjS,KAAMiJ,KACDlK,MAAQ,CAAEL,UAAU,GAFRe,iFAUDwC,EAAOiQ,GAEvB5I,QAAQC,IAAItH,EAAOiQ,oCAInB,OAAIlS,KAAKjB,MAAML,SAENuB,EAAAb,EAAAc,cAAA,mCAGFF,KAAKiJ,MAAMmC,4DAhBYnJ,GAE9B,MAAO,CAAEvD,UAAU,UARGE,IAAMyC,WC4HnB8Q,OAvHf,SAAqBlJ,GAAY,IAAA8E,EACGC,mBAAsB,IADzBC,EAAAzG,OAAA0G,EAAA,EAAA1G,CAAAuG,EAAA,GACxBqE,EADwBnE,EAAA,GACboE,EADapE,EAAA,GAAAqE,EAEOtE,mBAAuB,MAF9BuE,EAAA/K,OAAA0G,EAAA,EAAA1G,CAAA8K,EAAA,GAExBE,EAFwBD,EAAA,GAEXE,EAFWF,EAAA,GAAAG,EAGK1E,mBAAc,MAHnB2E,EAAAnL,OAAA0G,EAAA,EAAA1G,CAAAkL,EAAA,GAGxBpF,EAHwBqF,EAAA,GAGZC,EAHYD,EAAA,GAAAE,EAKL5J,EAAM6J,MAAM5P,OAA9B6P,EALuBF,EAKvBE,QAASC,EALcH,EAKdG,KAEjBC,oBAAU,WACRzL,OAAAO,EAAA,EAAAP,CAAArI,EAAAC,EAAA4I,KAAC,SAAA9I,IAAA,IAAA8C,EAAA0C,EAAA0N,EAAA,OAAAjT,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACoB0E,EAAe6O,EAASC,GAD5C,OACOhR,EADP1C,EAAAkD,KAEOkC,EAAS1C,EAAK+B,QAAQ,GAC5B0O,EAAe/N,GACT0N,EAAY1N,EAAOC,cAAgB,GACzC0N,EAAaD,GAETA,EAAU/P,OAAS,GAAK6Q,OAAOC,WAAa,KAC9CP,EAAcR,EAAU,IAR3B,wBAAA9S,EAAAM,SAAAV,KAADsI,IAWC,CAACyB,EAAM6J,MAAM5P,OAAO6P,QAAS9J,EAAM6J,MAAM5P,OAAO8P,OAEnD,IAAMI,EAAa,CACjB,CACE1S,KAAI,gBACJqF,KAAM,WAER,CACErF,KAAI,iBAAAC,OAAmBoS,GACvBhN,KAAMgN,GAER,CACErS,KAAI,iBAAAC,OAAmBoS,EAAnB,KAAApS,OAA8BqS,GAClCjN,KAAMiN,IAIV,OACE/S,EAAAb,EAAAc,cAAAD,EAAAb,EAAAqQ,SAAA,KACExP,EAAAb,EAAAc,cAAA,OAAKC,UAAU,SACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,aAAaG,aAAW,eACrCL,EAAAb,EAAAc,cAAA,UACGkT,EAAWpP,IAAI,SAACqP,EAAOC,GAAR,OACdrT,EAAAb,EAAAc,cAAA,MACEK,MAAO,CAAEmP,OAAQ,IACjB/H,IAAK2L,EACLnT,UAAS,IAAAQ,OACP2S,IAAQF,EAAW/Q,OAAS,EAAI,YAAc,KAGhDpC,EAAAb,EAAAc,cAACiB,EAAA,EAAD,CACEC,GAAIiS,EAAM3S,KACVP,UAAU,aACVI,MAAO,CAAEgT,QAAS,SAEjBF,EAAMtN,YAOnB9F,EAAAb,EAAAc,cAAA,WACkB,MAAfsS,GAAoC,MAAbJ,GACtBnS,EAAAb,EAAAc,cAACsT,GAAD,CACE1F,cAAe,WACb,IAAMY,EAASzF,EAAM2E,SAASc,OAC9BzF,EAAM4E,QAAQzD,KAAK,oBAAsBsE,IAE3CvB,UAAWiF,EACX9E,WAAYA,EACZF,YAAa,CAAEX,IAAK+F,EAAY/F,IAAK4B,IAAKmE,EAAYnE,KACtDb,kBAAmB,GACnBC,eAAgB,GAChBJ,kBAAmB,SAACC,GAClBhE,QAAQC,IAAI,uBACZqJ,EAActF,IAEhBK,UAAU,EACVD,YAAa,EACbH,kBAAmB,SAAA5E,GAA4C,IAAzC3E,EAAyC2E,EAAzC3E,IAAyC2E,EAApCwH,KACzBnM,EAAI4M,YAAY,QAAS,WACvBgC,OAAcnU,QAKP,MAAd6O,GACCrN,EAAAb,EAAAc,cAAA,WAASC,UAAU,UAAUC,GAAG,WAC9BH,EAAAb,EAAAc,cAAA,OAAKC,UAAU,sBACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,6BACfF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,UACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,uBAAuBC,GAAG,gBACvCH,EAAAb,EAAAc,cAAA,QACEC,UAAU,OACVI,MAAO,CACL6L,SAAU,WACVqH,MAAO,GACP1H,OAAQ,UACRd,MAAO,WAETnK,QAAS,kBAAM8R,OAAcnU,KAE7BwB,EAAAb,EAAAc,cAAA,KAAGC,UAAU,yBAEfF,EAAAb,EAAAc,cAACwT,GAAD,KACEzT,EAAAb,EAAAc,cAACyT,EAAD,CAAiBzK,KAAMoE,aChCtC,IAAMsG,GAAmB,SAAAC,GAgB1BA,EAfJT,WAeIS,EAdJC,UAcI,IAbJC,EAaIF,EAbJE,aACAC,EAYIH,EAZJG,aAGAnG,GASIgG,EAXJI,QAWIJ,EAVJK,gBAUIL,EATJhG,SAUA,OACE5N,EAAAb,EAAAc,cAAA,WACG6T,EAAa1R,OAAS,GACrBpC,EAAAb,EAAAc,cAACsT,GAAD,CACErG,UAAW4G,EACXzG,gBAAY7O,EACZ+O,kBAAmB,GACnBC,eAAgB,GAChBJ,kBAAmB,SAACO,GACI,aAAhBoG,EACAnG,EAAQzD,KAAR,iBAAAzJ,OAA8BiN,EAAS7H,OAEvC8H,EAAQzD,KAAR,iBAAAzJ,OAA8BiN,EAAS9J,aAAvC,KAAAnD,OAAuDiN,EAAS7H,QAGxE4H,UAAU,EACVD,YAAa,MAORyG,GAlHf,SAAyBlL,GAItB,IACO+K,EAAmC/K,EAAnC+K,aAAcjB,EAAqB9J,EAArB8J,QAASlF,EAAY5E,EAAZ4E,QAD9BE,EAEiCC,oBAAS,GAF1CC,EAAAzG,OAAA0G,EAAA,EAAA1G,CAAAuG,EAAA,GAEM+F,EAFN7F,EAAA,GAEiBmG,EAFjBnG,EAAA,GAAAqE,EAGuCtE,mBAAkB,IAHzDuE,EAAA/K,OAAA0G,EAAA,EAAA1G,CAAA8K,EAAA,GAGMyB,EAHNxB,EAAA,GAGoB8B,EAHpB9B,EAAA,GAAAG,EAIuB1E,mBAAS,MAJhC2E,EAAAnL,OAAA0G,EAAA,EAAA1G,CAAAkL,EAAA,GAIMlT,EAJNmT,EAAA,GAIY2B,EAJZ3B,EAAA,GAMGS,EAAa,CAAC,CAAErN,KAAM,YAAarF,KAAM,kBA6B7C,OA5Be,MAAXqS,GACFK,EAAWhJ,KAAK,CACdrE,KAAMgN,EACNrS,KAAI,iBAAAC,OAAmBoS,KAI3BE,oBAAU,WACRzL,OAAAO,EAAA,EAAAP,CAAArI,EAAAC,EAAA4I,KAAC,SAAA9I,IAAA,IAAA8C,EAAA,OAAA7C,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAF,EAAAC,KAAA,EAEOyC,EAAO,KACU,cAAjBgS,EAHP,CAAA1U,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAIkBuD,IAJlB,OAIKf,EAJL1C,EAAAkD,KAAAlD,EAAAE,KAAA,uBAAAF,EAAAE,KAAA,GAMkBiE,EAAU,CACrBK,aAAc6N,OAAO1I,EAAM8J,SAC3BzP,UAAW,QARlB,QAMKtB,EANL1C,EAAAkD,KAAA,QAWG8R,EAAQtS,EAAKxC,MACb6U,EAAgBrS,EAAK+B,SACrBqQ,GAAa,GAbhB9U,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAsD,GAAAtD,EAAA,SAeGiV,MAAKjV,EAAAsD,IAfR,yBAAAtD,EAAAM,SAAAV,EAAA,iBAADsI,IAkBC,CAACwM,EAAc/K,EAAM8J,UAGtB9S,EAAAb,EAAAc,cAACsU,GAAD,CACE3G,QAASA,EACTuF,WAAYA,EACZU,UAAWA,EACXC,aAAcA,EACdC,aAAcA,EACdC,QAAiB,MAARzU,EACT0U,gBAAe1M,OAAAO,EAAA,EAAAP,CAAArI,EAAAC,EAAA4I,KAAE,SAAAU,IAAA,IAAA+L,EAAAC,EAAA1S,EAAA2S,EAAA,OAAAxV,EAAAC,EAAAC,KAAA,SAAAuJ,GAAA,cAAAA,EAAArJ,KAAAqJ,EAAApJ,MAAA,UACH,MAARA,EADW,CAAAoJ,EAAApJ,KAAA,eAAAoJ,EAAAjG,OAAA,wBAET8R,EAAS,IAAIG,IAAIpV,GAEjBkV,EAAMD,EAAO/T,KAAKuQ,QAAQwD,EAAOI,OAAQ,IAJhCjM,EAAApJ,KAAA,EAMI+B,EAASmT,GANb,QAMT1S,EANS4G,EAAApG,MAOVuB,QAAU/B,EAAK+B,QAAQC,IAAI,SAACC,GAE/B,OADAA,EAAMH,aAAeiP,EACd9O,IAGH0Q,EAAUZ,EAAapT,OAAOqB,EAAK+B,SACzCsQ,EAAgBM,GAChBL,EAAQtS,EAAKxC,MAdE,yBAAAoJ,EAAAhJ,SAAA8I,SCrCRoM,GAfD,kBACV7U,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACXF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,aACXF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACXF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,wCACXF,EAAAb,EAAAc,cAAA,MAAIC,UAAU,cAAd,SACAF,EAAAb,EAAAc,cAAA,wBAAeD,EAAAb,EAAAc,cAAA,KAAGQ,KAAK,IAAIP,UAAU,wBAAtB,YAAf,2HAAmMF,EAAAb,EAAAc,cAAA,WACnMD,EAAAb,EAAAc,cAAA,8GAAwGD,EAAAb,EAAAc,cAAA,WACxGD,EAAAb,EAAAc,cAAA,sDAA6CD,EAAAb,EAAAc,cAAA,KAAGQ,KAAK,uBAAuBqU,OAAO,SAASC,IAAI,uBAAnD,kBAA8F/U,EAAAb,EAAAc,cAAA,WAC3ID,EAAAb,EAAAc,cAAA,uBAAcD,EAAAb,EAAAc,cAAA,KAAGQ,KAAK,wBAAwBqU,OAAO,SAASC,IAAI,uBAApD,mBAAd,UCuCLC,OAtBf,SAAkBC,EAAMC,EAAMC,EAAMC,EAAMC,GACzC,GAAKJ,GAAQE,GAAUD,GAAQE,EAC9B,OAAO,EAGP,IAAIE,EAAU7I,KAAKE,GAAKsI,EAAK,IACzBM,EAAU9I,KAAKE,GAAKwI,EAAK,IACzBK,EAAQN,EAAKE,EACbK,EAAWhJ,KAAKE,GAAK6I,EAAM,IAC3BE,EAAOjJ,KAAKkJ,IAAIL,GAAW7I,KAAKkJ,IAAIJ,GAAW9I,KAAKC,IAAI4I,GAAW7I,KAAKC,IAAI6I,GAAW9I,KAAKC,IAAI+I,GASpG,OARIC,EAAO,IACVA,EAAO,GAIRA,EAAc,IADdA,EAAc,KADdA,EAAOjJ,KAAKmJ,KAAKF,IACCjJ,KAAKE,IACJ,OACT,KAAN0I,IAAaK,GAAc,UACrB,KAANL,IAAaK,GAAc,OACxBA,GC6HMzI,eAtHC,SAASjE,GAAY,IAC3B2E,EAAa3E,EAAb2E,SAD2BY,EAERC,QAAkBb,EAASc,QAA9CjC,EAF2B+B,EAE3B/B,IAAK4B,EAFsBG,EAEtBH,IAAKrD,EAFiBwD,EAEjBxD,KAEZ8K,EAAenH,OAAOlC,IAAQ,WAC9BsJ,EAAgBpH,OAAO3D,IAAS,GALH+C,EAOCC,mBAAS,MAPVC,EAAAzG,OAAA0G,EAAA,EAAA1G,CAAAuG,EAAA,GAO5BT,EAP4BW,EAAA,GAOhB2E,EAPgB3E,EAAA,GAAAqE,EAQKtE,mBAAS,CAC/CvB,IAAKqJ,EACLzH,IAAKM,OAAON,IAAQ,YACpB2H,OAAQxJ,EAAuBsJ,EAAcC,KAXZxD,EAAA/K,OAAA0G,EAAA,EAAA1G,CAAA8K,EAAA,GAQ5B2D,EAR4B1D,EAAA,GAQd2D,EARc3D,EAAA,GAAAG,EAaD1E,mBAAS,IAbR2E,EAAAnL,OAAA0G,EAAA,EAAA1G,CAAAkL,EAAA,GAa5BN,EAb4BO,EAAA,GAajBN,EAbiBM,EAAA,GAenC,SAASwD,EAAuBnS,GAC9B,IAAMoS,EAASpS,EAAIgN,YAAYqF,SACzBC,EAAQtS,EAAIuS,YAAYF,SACxBG,EAAUvB,GAASqB,EAAMG,KAAM,EAAGH,EAAMI,KAAM,EAAG,KACjDC,EAAU1B,GAAS,EAAGqB,EAAMM,MAAO,EAAGN,EAAMO,MAAO,KACnDb,EAAStJ,KAAKoK,IAAIN,EAASG,GACjCP,EAAOJ,OAASA,EAChBE,EAAgBE,GAtBiB,SAiCpBW,IAjCoB,OAAAC,EAAAtV,MAAA1B,KAAA2B,WAAA,SAAAqV,IAAA,OAAAA,EAAAxP,OAAAO,EAAA,EAAAP,CAAArI,EAAAC,EAAA4I,KAiCnC,SAAAU,IAAA,IAAAnD,EAAAvD,EAAA,OAAA7C,EAAAC,EAAAC,KAAA,SAAAuJ,GAAA,cAAAA,EAAArJ,KAAAqJ,EAAApJ,MAAA,cACQ+F,EAAQiC,OAAOyH,OAAO,GAAIgH,IAC1B3S,UAAY,IAClBiC,EAAM0R,iBAAmB,OAH3BrO,EAAApJ,KAAA,EAKqB2F,EAAaI,GALlC,OAKQvD,EALR4G,EAAApG,KAOE6P,EAAarQ,EAAK+B,SAPpB,wBAAA6E,EAAAhJ,SAAA8I,OAjCmChH,MAAA1B,KAAA2B,WAiDnC,OANAsR,oBAAU,WACRzL,OAAAO,EAAA,EAAAP,CAAArI,EAAAC,EAAA4I,KAAC,SAAA9I,IAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACCuX,IADD,wBAAAzX,EAAAM,SAAAV,KAADsI,IAGC,IAGDvH,EAAAb,EAAAc,cAAAD,EAAAb,EAAAqQ,SAAA,KACAxP,EAAAb,EAAAc,cAACsT,GAAD,CACErG,UAAWiF,EACX9E,WAAYA,EACZF,YAAa,CAAEX,IAAKwJ,EAAaxJ,IAAK4B,IAAK4H,EAAa5H,KACxDb,kBAAmB,GACnBC,eAAgB,GAChBJ,kBAAmB,SAACC,GAAD,OAAqBsF,EAActF,IACtDC,kBAjCJ,SAAAtF,GAAwD,IAAtCjE,EAAsCiE,EAAtCjE,IAAsCiE,EAAjCkI,KACrBgG,EAAuBnS,GAEvBA,EAAI4M,YAAY,UAAW,kBAAMuF,EAAuBnS,KACxDA,EAAI4M,YAAY,eAAgB,kBAAMuF,EAAuBnS,KAC7DA,EAAI4M,YAAY,QAAS,kBAAMgC,OAAcnU,MA6B3CqP,cAAe,kBAAMiJ,KACrBrJ,YAAa,IA4BC,MAAdJ,GACArN,EAAAb,EAAAc,cAAA,WAASC,UAAU,UAAUC,GAAG,WAC9BH,EAAAb,EAAAc,cAAA,OAAKC,UAAU,sBACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,6BACfF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,UACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,uBAAuBC,GAAG,gBACvCH,EAAAb,EAAAc,cAAA,QACEC,UAAU,OACVI,MAAO,CACL6L,SAAU,WACVqH,MAAO,GACP1H,OAAQ,UACRd,MAAO,WAETnK,QAAS,kBAAM8R,OAAcnU,KAE7BwB,EAAAb,EAAAc,cAAA,KAAGC,UAAU,yBAEfF,EAAAb,EAAAc,cAACyT,EAAD,CAAiBzK,KAAMoE,qBCzGxB4J,GAlDQ,SAAAjP,GAQjB,IAPJkP,EAOIlP,EAPJkP,aACAhS,EAMI8C,EANJ9C,aACAY,EAKIkC,EALJlC,KAKIgI,EAE8BC,mBAAS,IAFvCC,EAAAzG,OAAA0G,EAAA,EAAA1G,CAAAuG,EAAA,GAEGqE,EAFHnE,EAAA,GAEcoE,EAFdpE,EAAA,GAAAqE,EAG8BtE,oBAAS,GAHvCuE,EAAA/K,OAAA0G,EAAA,EAAA1G,CAAA8K,EAAA,GAGGwB,EAHHvB,EAAA,GAGc6B,EAHd7B,EAAA,GAAAG,EAIsC1E,qBAJtC2E,EAAAnL,OAAA0G,EAAA,EAAA1G,CAAAkL,EAAA,GAIG0E,EAJHzE,EAAA,GAIkB0E,EAJlB1E,EAAA,GAMJ,OACE1S,EAAAb,EAAAc,cAAA,OAAKC,UAAU,0BACXF,EAAAb,EAAAc,cAAA,SAAOoX,KAAK,OACRC,SAAU,SAACxW,GACT,IAAMoI,EAAQpI,EAAEgU,OAAO5L,MACvB0H,aAAauG,GACb,IAAMI,EAAa1G,WAAUtJ,OAAAO,EAAA,EAAAP,CAAArI,EAAAC,EAAA4I,KAAC,SAAA9I,IAAA,IAAAwF,EAAA,OAAAvF,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WACxBsU,EADwB,CAAAxU,EAAAE,KAAA,eAAAF,EAAAqD,OAAA,wBAE5ByR,GAAa,GAFe9U,EAAAE,KAAA,EAGP2F,EAAa,CAC9BsS,QAAStO,IAJe,OAGtBzE,EAHsBpF,EAAAkD,KAM5B4R,GAAa,GACb/B,EAAa3N,EAAOX,SAPQ,wBAAAzE,EAAAM,SAAAV,MAtBlB,KA+BZmY,EAAiBG,IAEnB/N,YAAY,6BAElBxJ,EAAAb,EAAAc,cAAA,OAAKC,UAAU,UACbF,EAAAb,EAAAc,cAAA,UACE6F,KAAMA,EACNwR,SAAUJ,GAET/E,EAAUpO,IAAI,SAAC0T,GAAD,OACbzX,EAAAb,EAAAc,cAAA,UAAQyH,IAAK+P,EAAEtX,GAAI+I,MAAOuO,EAAEtX,IAAKsX,EAAE3R,UAIzC9F,EAAAb,EAAAc,cAAA,QAAMC,UAAU,gBACdF,EAAAb,EAAAc,cAAA,KAAGC,UAAU,oBC2ENwX,GAhHK,SAAC1O,GAAiB,IAElC9D,EAGE8D,EAHF9D,aACAyS,EAEE3O,EAFF2O,YACAC,EACE5O,EADF4O,WAEF,OACE5X,EAAAb,EAAAc,cAAC4X,GAAA,EAAD,CACEC,cAAe,CACbC,MAAM,IAAIC,MAAOC,cAAc3R,UAAU,EAAG,IAC5C4R,YAAa,EACbjT,UAAMzG,EACN2Z,YAAQ3Z,EACR4Z,WAAO5Z,GAET6Z,SAAQ,eAAA3P,EAAAnB,OAAAO,EAAA,EAAAP,CAAArI,EAAAC,EAAA4I,KAAE,SAAA9I,EAAOqZ,EAAPtQ,GAAA,IAAAuQ,EAAA9T,EAAA,OAAAvF,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAyI,EAAiBwQ,cAAeD,EAAhCvQ,EAAgCuQ,UAAhClZ,EAAAE,KAAA,EAGaiH,EAAc8R,GAH3B,QAGF7T,EAHEpF,EAAAkD,MAIGuE,OACTyR,EAAU9T,EAAOqC,QAEE,MAAf6Q,GAAqBA,IAPnB,wBAAAtY,EAAAM,SAAAV,MAAF,gBAAAsC,EAAAkX,GAAA,OAAA/P,EAAAjH,MAAA1B,KAAA2B,YAAA,IAWP,SAACsH,GAAe,IACPlC,EAAyBkC,EAAzBlC,OAAQoQ,EAAiBlO,EAAjBkO,aAChB,OACElX,EAAAb,EAAAc,cAAC4X,GAAA,EAAD,KAEE7X,EAAAb,EAAAc,cAAA,OAAKC,UAAU,SACbF,EAAAb,EAAAc,cAAA,SAAOC,UAAU,SAAjB,QACAF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAC4X,GAAA,EAAD,CACE/R,KAAK,OACLuR,KAAK,OACLqB,oBAAkB,SAClBC,gBAAc,OACdC,uBAAqB,WAGzB5Y,EAAAb,EAAAc,cAAC4X,GAAA,EAAD,CAAc/R,KAAK,UAErB9F,EAAAb,EAAAc,cAAA,OAAKC,UAAU,SACbF,EAAAb,EAAAc,cAAA,SAAOC,UAAU,QAAQ2Y,QAAQ,IAAjC,QAGA7Y,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAC4X,GAAA,EAAD,CACER,KAAK,OACLqB,oBAAkB,SAClBC,gBAAc,OACdC,uBAAqB,UAEvB5Y,EAAAb,EAAAc,cAAC4X,GAAA,EAAD,CAAc/R,KAAK,WAIvB9F,EAAAb,EAAAc,cAAA,OAAKC,UAAU,SACbF,EAAAb,EAAAc,cAAA,SAAOC,UAAU,SAAjB,aACAF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAC6Y,GAAD,CACEhT,KAAM,cACNZ,aAAcA,EACdgS,aAAcA,IAEhBlX,EAAAb,EAAAc,cAAC4X,GAAA,EAAD,CAAc/R,KAAK,kBAGvB9F,EAAAb,EAAAc,cAAA,OAAKC,UAAU,SACbF,EAAAb,EAAAc,cAAA,SAAOC,UAAU,SAAjB,SACAF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAA,YAAUC,UAAU,WAAW4F,KAAK,UACpC9F,EAAAb,EAAAc,cAAC4X,GAAA,EAAD,CAAc/R,KAAK,YAIvB9F,EAAAb,EAAAc,cAAA,OAAKC,UAAU,SACbF,EAAAb,EAAAc,cAAA,SAAOC,UAAU,SAAjB,QACAF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAA,YAAUC,UAAU,WAAW4F,KAAK,SACnCgB,EAAO7B,OAIZjF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,SACbF,EAAAb,EAAAc,cAAA,SAAOC,UAAU,SAAjB,UACAF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAC4X,GAAA,EAAD,CAAOR,KAAK,SAASvR,KAAK,WAC1B9F,EAAAb,EAAAc,cAAC4X,GAAA,EAAD,CAAc/R,KAAK,aAGvB9F,EAAAb,EAAAc,cAAA,OAAKC,UAAU,oBACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAA,UAAQC,UAAU,qBAAlB,WAEFF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACbF,EAAAb,EAAAc,cAAA,UAAQC,UAAU,iBAAiBW,QAAS,SAACC,GAC3CA,EAAEC,iBACgB,MAAd6W,GAAoBA,MAF1B,YAMJ5X,EAAAb,EAAAc,cAAA,WAAM6E,KAAKuC,UAAU2B,EAAO,KAAM,QC/E/B+P,GA/BM,SAAA/Q,GAAyB,IAAtBgR,EAAsBhR,EAAtBgR,SAEpB,OACEhZ,EAAAb,EAAAc,cAAA,UACG+Y,EAASjV,IAAI,SAAC6C,GAAD,OACZ5G,EAAAb,EAAAc,cAAA,MAAIyH,IAAKd,EAAQzG,GAAID,UAAU,QAC7BF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,qBACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,UAAUI,MAAO,CAAC4L,SAAS,YACxClM,EAAAb,EAAAc,cAAA,OAAKC,UAAU,wBACbF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,mBACZ0G,EAAQhC,SAASkB,MAEpB9F,EAAAb,EAAAc,cAAA,OAAKC,UAAU,sBACZ0G,EAAQhC,SAASmO,KAAKjN,KADzB,IACgC,IAC7Bc,EAAQhC,SAASmO,KAAKD,QAAQhN,OAGnC9F,EAAAb,EAAAc,cAAA,OAAKC,UAAU,iDACXF,EAAAb,EAAAc,cAAA,WAAM2G,EAAQmR,cCPnBkB,GAdG,SAAAjR,GAAA,IAAGmD,EAAHnD,EAAGmD,SAAH,OACdnL,EAAAb,EAAAc,cAAA,WAASC,UAAU,WACfF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,sBACXF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,WACXF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,6BACfF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,UACXF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,uBAAuBC,GAAG,gBACpCgL,QC0DV+N,GA3Da,WAAM,IAAApL,EACGC,mBAAS,IADZC,EAAAzG,OAAA0G,EAAA,EAAA1G,CAAAuG,EAAA,GACvBkL,EADuBhL,EAAA,GACbmL,EADanL,EAAA,GAAAqE,EAEItE,oBAAS,GAFbuE,EAAA/K,OAAA0G,EAAA,EAAA1G,CAAA8K,EAAA,GAEZ8B,GAFY7B,EAAA,GAAAA,EAAA,IAAAG,EAGE1E,oBAAS,GAHX2E,EAAAnL,OAAA0G,EAAA,EAAA1G,CAAAkL,EAAA,GAGvB2G,EAHuB1G,EAAA,GAGb2G,EAHa3G,EAAA,GAK9BM,oBAAU,WACNzL,OAAAO,EAAA,EAAAP,CAAArI,EAAAC,EAAA4I,KAAC,SAAA9I,IAAA,IAAAwF,EAAA,OAAAvF,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACG4U,GAAa,GADhB9U,EAAAE,KAAA,EAEwBkG,IAFxB,OAEShB,EAFTpF,EAAAkD,KAGG4R,GAAa,GACbgF,EAAY1U,EAAOX,SAJtB,wBAAAzE,EAAAM,SAAAV,KAADsI,IAMD,IAEH,IAAIiF,EAAM,EACN4B,EAAM,EAMV,OALI4K,EAAS5W,OAAS,IACpBoK,EAAM6B,YAAO2K,EAAU,SAACvB,GAAD,OAAOA,EAAE7S,SAAS4H,MACzC4B,EAAMC,YAAO2K,EAAU,SAACvB,GAAD,OAAOA,EAAE7S,SAASwJ,OAIzCpO,EAAAb,EAAAc,cAAAD,EAAAb,EAAAqQ,SAAA,KACExP,EAAAb,EAAAc,cAACsT,GAAD,CACErG,UAAW8L,EAASjV,IAAI,SAAA0T,GAAC,OAAIA,EAAE7S,WAC/B6I,YAAa,EACbN,YAAa,CAAEX,MAAK4B,OACpBV,UAAU,GAEV1N,EAAAb,EAAAc,cAACqZ,GAAD,KACGF,EAECpZ,EAAAb,EAAAc,cAACsZ,GAAD,CACErU,aAAcA,EACdyS,YAAa,kBAAM1E,OAAOtF,SAAS6L,UACnC5B,WAAY,kBAAMyB,GAAY,MAGhCrZ,EAAAb,EAAAc,cAAAD,EAAAb,EAAAqQ,SAAA,KACAxP,EAAAb,EAAAc,cAAA,UACAC,UAAU,SACVW,QAAS,WACPwY,GAAaD,KAHf,aAQApZ,EAAAb,EAAAc,cAACwZ,GAAD,CAAcT,SAAUA,SC1CvBU,GAZG,WACd,OACI1Z,EAAAb,EAAAc,cAAA,WAASC,UAAU,QACfF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,aACXF,EAAAb,EAAAc,cAAA,OAAKC,UAAU,aAAf,4BCahB,SAASyZ,GAAgB3Q,GACvB,OAAOhJ,EAAAb,EAAAc,cAAC2Z,GAAgB5Q,GAG1B,SAAS6Q,GAAoB7Q,GAE3B,MAAiB,kBADAA,EAAM2E,SAASsD,SAEvBjR,EAAAb,EAAAc,cAAC6Z,GAAD,CACL/F,aAAa,YACbnG,QAAS5E,EAAM4E,UAIjB5N,EAAAb,EAAAc,cAAC6Z,GAAD,CACE/F,aAAa,SACbjB,QAAS9J,EAAM6J,MAAM5P,OAAO6P,QAC5BlF,QAAS5E,EAAM4E,cAqFNmM,eA9Eb,SAAAA,EAAY/Q,GAAY,IAAAxJ,EAAA,OAAA+H,OAAAsK,EAAA,EAAAtK,CAAAxH,KAAAga,IACtBva,EAAA+H,OAAAuK,EAAA,EAAAvK,CAAAxH,KAAAwH,OAAAwK,EAAA,EAAAxK,CAAAwS,GAAA/H,KAAAjS,KAAMiJ,KAFRlK,MAAQR,EACgBkB,EAaxBE,WAAa,SAACnB,GACZiB,EAAKK,SAAS,CAAEtB,SAChByb,aAAaC,QAAQ,OAAQnV,KAAKuC,UAAU9I,KAftBiB,iFASNwC,EAAYiQ,GAC5BlS,KAAKF,SAAS,CAAEmC,2CAUhB,OAAIjC,KAAKjB,MAAML,SAEXuB,EAAAb,EAAAc,cAAAD,EAAAb,EAAAqQ,SAAA,KACExP,EAAAb,EAAAc,cAACia,EAAD,MACAla,EAAAb,EAAAc,cAACka,GAAD,OAMJna,EAAAb,EAAAc,cAACvB,EAAW0b,SAAZ,CACElR,MAAK3B,OAAA8S,EAAA,EAAA9S,CAAA,GACAxH,KAAKjB,MADL,CAEHY,WAAYK,KAAKL,cAGnBM,EAAAb,EAAAc,cAACiB,EAAA,EAAD,KACElB,EAAAb,EAAAc,cAAA,WACED,EAAAb,EAAAc,cAACia,EAAD,MACAla,EAAAb,EAAAc,cAACqa,EAAA,EAAD,CACEC,OAAK,EACL3Y,KAAK,IACL4Y,OAAQ,kBAAMxa,EAAAb,EAAAc,cAACqa,EAAA,EAAD,CAAUnZ,GAAG,qBAE7BnB,EAAAb,EAAAc,cAACqa,EAAA,EAAD,CAAO1Y,KAAK,UAAU6Y,UAAW5F,KACjC7U,EAAAb,EAAAc,cAACqa,EAAA,EAAD,CACE1Y,KAAK,iBACL2Y,OAAK,EACLE,UAAWZ,KAEb7Z,EAAAb,EAAAc,cAACqa,EAAA,EAAD,KACEta,EAAAb,EAAAc,cAACqa,EAAA,EAAD,CAAO1Y,KAAK,oBAAoB2Y,OAAK,EAACE,UAAWC,KACjD1a,EAAAb,EAAAc,cAACqa,EAAA,EAAD,CACE1Y,KAAK,yBACL2Y,OAAK,EACLE,UAAWZ,KAEb7Z,EAAAb,EAAAc,cAACqa,EAAA,EAAD,CACE1Y,KAAK,+BACL2Y,OAAK,EACLE,UAAWd,KAEb3Z,EAAAb,EAAAc,cAACqa,EAAA,EAAD,CACE1Y,KAAK,YACL6Y,UAAWvB,KAEblZ,EAAAb,EAAAc,cAACqa,EAAA,EAAD,CACE1Y,KAAK,mBACL6Y,UAAWvB,4DA/DOlX,GAC9B,MAAO,CAAEvD,UAAU,UARLE,IAAMyC,WC5BJuZ,QACW,cAA7B1H,OAAOtF,SAASiN,UAEe,UAA7B3H,OAAOtF,SAASiN,UAEhB3H,OAAOtF,SAASiN,SAAS/H,MACvB,2DCbNgI,IAASL,OAAOxa,EAAAb,EAAAc,cAAC6a,GAAD,MAAS9U,SAAS+U,eAAe,SD4H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.d8ca2c22.chunk.js","sourcesContent":["import React from 'react';\r\nimport { IUser } from './lib/api'\r\n\r\nexport const DEFAULT_STATE = {\r\n    user: undefined,\r\n    hasError: false\r\n}\r\nexport const AppContext = React.createContext<{ user?: IUser }>(DEFAULT_STATE)\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AppContext } from \"./AppContext\";\r\n\r\nclass Navbar extends React.Component {\r\n  static contextType = AppContext;\r\n  state = {\r\n    active: false\r\n  };\r\n\r\n  logout = async () => {\r\n    // await auth.logout(this.context.user.access_token);\r\n    this.context.updateUser(null);\r\n  };\r\n\r\n  closeMenu = () => {\r\n    this.setState({ active: false });\r\n  };\r\n\r\n  render() {\r\n    // const { user } = this.context\r\n    return (\r\n      <nav\r\n        className=\"navbar is-dark\"\r\n        id=\"nav\"\r\n        role=\"navigation\"\r\n        aria-label=\"main navigation\"\r\n        style={{ paddingLeft: 10, paddingRight: 10 }}\r\n      >\r\n        <div className=\"navbar-brand\">\r\n          <a href=\"/\" className=\"navbar-item\">\r\n            <div className=\"title tooltip\" style={{ paddingRight: 20 }}>\r\n              Reefbase\r\n            </div>\r\n          </a>\r\n          <a\r\n            href=\"/\"\r\n            role=\"button\"\r\n            className={`navbar-burger burger ${\r\n              this.state.active ? \"is-active\" : \"\"\r\n            }`}\r\n            aria-label=\"menu\"\r\n            aria-expanded=\"false\"\r\n            data-target=\"navbarBasicExample\"\r\n            onClick={e => {\r\n              e.preventDefault();\r\n              this.setState({ active: !this.state.active });\r\n            }}\r\n          >\r\n            <span aria-hidden=\"true\" />\r\n            <span aria-hidden=\"true\" />\r\n            <span aria-hidden=\"true\" />\r\n          </a>\r\n        </div>\r\n        <div\r\n          className={`navbar-menu ${this.state.active ? \"is-active\" : \"\"}`}\r\n          style={{\r\n            backgroundColor: \"rgba(0,0,0,0)\"\r\n          }}\r\n        >\r\n          <div className=\"navbar-start\">\r\n            <Link className=\"navbar-item\" onClick={this.closeMenu} to=\"/about\">\r\n              About\r\n            </Link>\r\n            <Link\r\n              className=\"navbar-item\"\r\n              onClick={this.closeMenu}\r\n              to=\"/destinations\"\r\n            >\r\n              Destinations\r\n            </Link>\r\n            <Link\r\n              className=\"navbar-item\"\r\n              onClick={this.closeMenu}\r\n              to=\"/destinations/map\"\r\n            >\r\n              Map\r\n            </Link>\r\n          </div>\r\n          {/* {user != null ?\r\n                        <div className=\"navbar-end\">\r\n                            <a href=\"/\" className=\"navbar-item\">{user.username}</a>\r\n                            <a className=\"navbar-item\" onClick={this.logout}>Logout</a>\r\n                        </div>\r\n                        :\r\n                        <div className=\"navbar-end\">\r\n                            <Link className=\"navbar-item\" to=\"/login\">Login</Link>\r\n                        </div>\r\n                    } */}\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navbar;\r\n","import { Primitive } from \"lodash\";\r\n\r\n// import { number } from \"prop-types\";\r\n\r\nexport interface IUser {\r\n  id: number;\r\n  username: string;\r\n  access_token: string;\r\n}\r\n\r\nexport interface ILocation {\r\n  id: number;\r\n  name: string;\r\n  lat: number;\r\n  lng: number;\r\n}\r\n\r\nexport interface ICity extends ILocation {\r\n  divesite_set?: IDiveSite[];\r\n  zoom_level: number;\r\n  country_name?: string;\r\n}\r\n\r\nexport interface IDiveSite extends ILocation {\r\n  id: number;\r\n  lat: number;\r\n  lng: number;\r\n  name: string;\r\n  country_name?: string;\r\n  city_name?: string;\r\n  min_temp?: number;\r\n  max_temp?: number;\r\n  min_temp_by_month?: number[];\r\n  max_temp_by_month?: number[];\r\n}\r\n\r\nexport interface INote {\r\n  id: number;\r\n  content: string;\r\n}\r\n\r\nexport interface IUser {\r\n  id: number;\r\n  access_token: string;\r\n  username: string;\r\n}\r\n\r\nexport interface APIResults<T> {\r\n  count: number;\r\n  next: string | null;\r\n  previous: string | null;\r\n  results: T[];\r\n}\r\n\r\nexport interface IDiveLog {\r\n  date: string;\r\n  user_id?: number; // some times can use session instead\r\n  divesite_id: number;\r\n  time?: string;\r\n  observations?: string;\r\n  meta?: string;\r\n  rating?: number\r\n}\r\n\r\n// export enum LocationTypeEnum {\r\n//   cities = 'cities',\r\n//   countries = 'countries'\r\n// }\r\n\r\nexport async function loadJson(path: string, options: any = {}) {\r\n  if (options.headers == null) {\r\n    options.headers = {};\r\n  }\r\n\r\n  options.headers[\"Content-Type\"] = \"application/json\";\r\n\r\n  const resp = await fetch(path, options);\r\n  if (resp.ok) {\r\n    const data = await resp.json();\r\n    return data;\r\n  }\r\n\r\n  let error = \"\";\r\n  try {\r\n    const errorData = await resp.json();\r\n    error = errorData.error;\r\n  } catch (e) {\r\n    error = resp.statusText;\r\n  }\r\n  throw new Error(error);\r\n}\r\n\r\nasync function loadAuthJson(\r\n  path: string,\r\n  accessToken: string,\r\n  options: any = {}\r\n) {\r\n  if (options.headers == null) {\r\n    options.headers = {};\r\n  }\r\n  options.headers[\"Authorization\"] = `Bearer ${accessToken}`;\r\n  return loadJson(path, options);\r\n}\r\n\r\nexport async function getCountries(\r\n  params: { page_size: string } = { page_size: \"200\" }\r\n): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams(params);\r\n  return loadJson(`/api/countries?${paramsObj.toString()}`);\r\n}\r\n\r\nexport async function getCities(\r\n  params: { country_name: string; page_size: string } = {\r\n    country_name: \"Thailand\",\r\n    page_size: \"10\"\r\n  }\r\n): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams(params);\r\n  const data = await loadJson(`/api/cities?${paramsObj.toString()}`);\r\n  data.results = data.results.map((datum: ICity) => {\r\n    datum.country_name = params.country_name;\r\n    return datum;\r\n  });\r\n  return data;\r\n}\r\n\r\nexport async function getDestination(\r\n  country_name: string,\r\n  city_name: string\r\n): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams({\r\n    country_name,\r\n    city_name,\r\n    include_divesites: \"true\"\r\n  });\r\n  const data = await loadJson(`/api/cities?${paramsObj.toString()}`);\r\n  if (data.results.length > 0) {\r\n    data.results = data.results.map((result: ICity) => {\r\n      if (result.divesite_set == null) return result;\r\n      result.divesite_set = result.divesite_set.map((datum: IDiveSite) => {\r\n        datum = diveSiteParser(datum)\r\n        datum.country_name = country_name;\r\n        datum.city_name = city_name;\r\n        return datum;\r\n      });\r\n      return result;\r\n    });\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction diveSiteParser(divesite: any) {\r\n  divesite.min_temp_by_month = JSON.parse(divesite.min_temp_by_month)\r\n  divesite.max_temp_by_month = JSON.parse(divesite.max_temp_by_month)\r\n  divesite.meta = JSON.parse(divesite.meta)\r\n  return divesite\r\n}\r\n\r\nexport async function getDiveSites(query?: any): Promise<APIResults<IDiveSite>> {\r\n  const queryObj = new URLSearchParams(query);\r\n  const results = await loadJson(\"/api/divesites?\" + queryObj.toString());\r\n  results.results = results.results.map(diveSiteParser)\r\n  return results\r\n}\r\n\r\nexport async function getDiveSite(id: number | string): Promise<IDiveSite> {\r\n  const diveSite = await loadJson('/api/divesites/' + id)\r\n  return diveSiteParser(diveSite)\r\n}\r\n\r\nexport async function getDiveLogs(){\r\n  return loadJson('/api/divelogs')\r\n}\r\n\r\n\r\n\r\nfunction getCookie(name: string) {\r\n  var cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n      var cookies = document.cookie.split(';');\r\n      for (var i = 0; i < cookies.length; i++) {\r\n          var cookie = cookies[i].trim();\r\n          // Does this cookie string begin with the name we want?\r\n          if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n              break;\r\n          }\r\n      }\r\n  }\r\n  return cookieValue;\r\n}\r\nexport async function createDiveLog(diveLog: IDiveLog) {\r\n  const csrftoken = getCookie('csrftoken') || ''\r\n  const headers = new Headers()\r\n  headers.append('Content-Type', 'application/json')\r\n  headers.append('X-CSRFToken', csrftoken)\r\n  const options: RequestInit = { \r\n    method: 'POST',\r\n    body: JSON.stringify(diveLog),\r\n    headers\r\n  }\r\n  const resp = await fetch('/api/divelogs/', options)\r\n\r\n  if (resp.ok) {\r\n    const data = await resp.json()\r\n    return data\r\n  }\r\n\r\n  if (resp.status == 400) {\r\n    const errors = await resp.json()\r\n    const formikError:any = {}\r\n    Object.keys(errors).forEach((key) => {\r\n      formikError[key] = errors[key][0]\r\n    })\r\n    return { errors: formikError }\r\n  }\r\n  // handle other errors\r\n}\r\n\r\nexport const Note = {\r\n  async updateNote({\r\n    diveSiteId,\r\n    user,\r\n    content\r\n  }: {\r\n    diveSiteId: number;\r\n    user: IUser;\r\n    content: string;\r\n  }): Promise<void> {\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${user.access_token}`\r\n    };\r\n    const body = JSON.stringify({ content });\r\n    const data = await loadJson(\r\n      `/api/notes/divesites/${diveSiteId}/users/${user.id}`,\r\n      {\r\n        method: \"POST\",\r\n        headers,\r\n        body\r\n      }\r\n    );\r\n    return data;\r\n  },\r\n  async getNote({\r\n    diveSiteId,\r\n    user\r\n  }: {\r\n    diveSiteId: number;\r\n    user: IUser;\r\n  }): Promise<string> {\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${user.access_token}`\r\n    };\r\n    const data = await loadJson(\r\n      `/api/notes/divesites/${diveSiteId}/users/${user.id}`,\r\n      { headers, methods: \"POST\" }\r\n    );\r\n    if (data == null) {\r\n      return \"\";\r\n    }\r\n    return data.content;\r\n  }\r\n};\r\n\r\n\r\n","import React from \"react\";\r\nimport { IDiveSite, Note } from \"./lib/api\";\r\nimport { AppContext } from \"./AppContext\";\r\nimport { VictoryLine, VictoryChart, VictoryAxis } from \"victory\";\r\n\r\ninterface IDestinationCardProps {\r\n  site: IDiveSite;\r\n}\r\n\r\nclass DestinationCard extends React.Component<IDestinationCardProps, any> {\r\n  static contextType = AppContext;\r\n  _textarea: any;\r\n\r\n  async syncNote() {\r\n    const diveSiteId = this.props.site.id;\r\n    const content = await Note.getNote({ diveSiteId, user: this.context.user });\r\n    this._textarea.value = content;\r\n  }\r\n\r\n  async componentWillMount() {\r\n    if (this.context.user == null) return;\r\n    // await this.syncNote()\r\n  }\r\n\r\n  async componentDidUpdate(prevProps: any) {\r\n    // if (\r\n    //   this.props.site != null &&\r\n    //   prevProps.site != null &&\r\n    //   this.props.site.id !== prevProps.site.id\r\n    // ) {\r\n    //   this._textarea.value = \"\";\r\n      // this.syncNote()\r\n    // }\r\n  }\r\n\r\n  async onNoteSave(event: any) {\r\n    const diveSiteId = this.props.site.id;\r\n    // TODO: check result and feedback UI\r\n    await Note.updateNote({\r\n      diveSiteId,\r\n      user: this.context.user,\r\n      content: this._textarea.value\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { site } = this.props;\r\n    console.log(site);\r\n    if (site == null) {\r\n      return (\r\n        <div>\r\n          <h2 className=\"title is-two\">No Dive Site Selected!</h2>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    let textarea;\r\n    if (this.context.user != null) {\r\n      textarea = (\r\n        <div className=\"full-height\">\r\n          <textarea\r\n            autoFocus={true}\r\n            className=\"textarea borderless\"\r\n            placeholder=\"Take notes here.\"\r\n            ref={c => (this._textarea = c)}\r\n          />\r\n          <button className=\"button\" onClick={this.onNoteSave.bind(this)}>\r\n            submit\r\n          </button>\r\n        </div>\r\n      );\r\n    } else {\r\n      textarea = (\r\n        <div>\r\n          <textarea\r\n            className=\"textarea borderless\"\r\n            placeholder=\"Notes coming soon!\"\r\n            // placeholder=\"Please login to take notes\"\r\n            ref={c => (this._textarea = c)}\r\n            disabled\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const tempData: any[] = [];\r\n    const maxTemps: any[] = [];\r\n    const minTemps: any[] = [];\r\n    if (site.min_temp_by_month != null && site.max_temp_by_month != null) {\r\n      site.min_temp_by_month.forEach((minTemp, i) => {\r\n        // @ts-ignore\r\n        const maxTemp = site.max_temp_by_month[i];\r\n        tempData.push({ minTemp, maxTemp });\r\n        maxTemps.push({ x: i, y: maxTemp });\r\n        minTemps.push({ x: i, y: minTemp });\r\n      });\r\n    }\r\n\r\n    console.log(maxTemps);\r\n    return (\r\n      <div>\r\n        <h2 className=\"title is-two\">{site.name}</h2>\r\n        <h3 className=\"subtitle is-four\">\r\n          {site.city_name}, {site.country_name}\r\n        </h3>\r\n        <VictoryChart height={200}>\r\n          <VictoryAxis\r\n            tickValues={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]}\r\n            tickFormat={[\r\n              \"Jan\",\r\n              \"\",\r\n              \"\",\r\n              \"Apr.\",\r\n              \"\",\r\n              \"\",\r\n              \"July\",\r\n              \"\",\r\n              \"\",\r\n              \"Oct\",\r\n              \"\",\r\n              \"\"\r\n            ]}\r\n          />\r\n          <VictoryAxis\r\n            dependentAxis\r\n            fixLabelOverlap\r\n            //   tickFormat={(x) => (`${x `)}\r\n          />\r\n          <VictoryLine data={maxTemps} x=\"x\" y=\"y\" />\r\n          <VictoryLine data={minTemps} x=\"x\" y=\"y\" />\r\n        </VictoryChart>\r\n        {/* { textarea } */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DestinationCard;\r\n","import React, { ReactChild } from 'react';\r\nimport { IDiveSite } from '../lib/api'\r\n\r\nfunction calculateMarkerSize(zoom: any) {\r\n    // return 10\r\n    if (zoom == null) return 5;\r\n    // console.log(5*zoom/9)\r\n    let size = 10 * zoom/10 + 1;\r\n    if (size > 20) size = 20\r\n    return size\r\n}\r\n\r\ninterface DiveFlagProps {\r\n  site: IDiveSite;\r\n  lat: number;\r\n  lng: number;\r\n  zoom?: any;\r\n  clickHandler?: (site: IDiveSite) => void;\r\n  color?: string;\r\n  diameter?: number;\r\n  text?: string;\r\n  children?: ReactChild\r\n}\r\nconst DiveFlag = ({\r\n  site,\r\n  zoom,\r\n  color,\r\n  diameter,\r\n  text,\r\n  children,\r\n  clickHandler = () => {}\r\n}: DiveFlagProps) => {\r\n  if (color == null) {\r\n    color = 'red'\r\n  }\r\n\r\n  if (diameter == null) {\r\n    diameter = calculateMarkerSize(zoom)\r\n  }\r\n\r\n  return (\r\n    <div className=\"tooltip\" data-tooltip={site.name}\r\n      style={{\r\n        height: diameter,\r\n        width: diameter,\r\n        backgroundColor: color,\r\n        borderRadius: \"50%\",\r\n        display: \"flex\",\r\n        flexDirection: 'column',\r\n        alignContent: 'center',\r\n        cursor: 'pointer',\r\n        boxShadow: '0px 4px 4px rgba(0, 0, 0, 0.25)',\r\n        border: '1px solid white'\r\n      }}\r\n      onClick={() => clickHandler(site)}\r\n    >\r\n      <span\r\n        style={{\r\n          color: 'white', \r\n          textAlign: 'center',\r\n          width: '100%',\r\n          flexGrow: 1\r\n        }}\r\n      >{text}</span>\r\n      <span\r\n        style={{\r\n          position: 'relative',\r\n          textShadow: '-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white',\r\n          fontWeight: 500,\r\n          left: diameter + 5\r\n        }}\r\n      >{children}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DiveFlag","\r\nexport function calculateMeterPerPixel(lat:number, zoom:number) {\r\n    console.log(lat, zoom)\r\n    console.log(Math.cos(lat * Math.PI / 180))\r\n    console.log(Math.pow(2,zoom))\r\n    const meterPerPixel = 156543.03392 * Math.cos(lat * Math.PI / 180) / Math.pow(2, zoom)\r\n    return meterPerPixel\r\n  }\r\n","import React, { useState, useEffect } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport GoogleMapReact, { ClickEventValue } from 'google-map-react';\r\nimport {getDestination, ILocation, ICity} from '../lib/api'\r\nimport DiveMarker from './DiveMarker'\r\nimport { meanBy, groupBy, flatMap } from 'lodash-es';\r\nimport mapStyle from './google_map_style.json'\r\nimport * as H from 'history'\r\nimport * as querystring from 'query-string'\r\nimport * as turf from '@turf/turf'\r\nimport { calculateMeterPerPixel } from '../lib/utils'\r\n\r\ninterface Props {\r\n    locations: ILocation[], \r\n    centerCoord?: { lat: number, lng: number},\r\n    activeSite?: ILocation,\r\n    setActiveLocation?: (site?: ILocation)=>void,\r\n    activeSiteCountry?: string,\r\n    activeSiteCity?: string,\r\n    onClickUpdate?: () => void;\r\n    onGoogleApiLoaded?: ({ map , maps }: { map: any, maps: any }) => void\r\n    defaultZoom?: number,\r\n    autoZoom?: boolean,\r\n    children?: React.ReactNode,\r\n    location: H.Location,\r\n    history: H.History\r\n\r\n}\r\n\r\nconst googleMapStyle = mapStyle;\r\nconst NO_CLUSTER_ZOOM_THRESHOLD = 10;\r\n\r\nvar timeout: any;\r\nfunction DiveMap({ \r\n        locations, \r\n        centerCoord,\r\n        activeSite,\r\n        setActiveLocation,\r\n        activeSiteCountry,\r\n        activeSiteCity,\r\n        onGoogleApiLoaded,\r\n        defaultZoom,\r\n        autoZoom,\r\n        children,\r\n        location,\r\n        history,\r\n        onClickUpdate\r\n    } : Props ) {\r\n\r\n    const [dbScanRadiusKM, updateDbScanRadius] = useState(0.01)\r\n\r\n\r\n    if (centerCoord == null) centerCoord = { lat: 0, lng: 0 }\r\n\r\n    if (autoZoom === true && locations.length > 0) {\r\n        const lat = meanBy(locations, 'lat')\r\n        const lng = meanBy(locations, 'lng')\r\n        centerCoord = { lat, lng }\r\n    }\r\n\r\n    var hasLocationQuery = false\r\n    const { lat, lng, zoom } = querystring.parse(location.search)\r\n    if (lat != null && lng != null && zoom != null)  {\r\n        centerCoord.lat = Number(lat)\r\n        centerCoord.lng = Number(lng)\r\n        hasLocationQuery = true\r\n    }\r\n\r\n    const features = locations.map(loc => {\r\n      return turf.point([loc.lat, loc.lng], loc)\r\n    })\r\n    \r\n    // default to noise before clustering\r\n    let collection = { \r\n      features: locations.map(loc => {\r\n        const properties = Object.assign({}, loc, { dbscan: 'noise' })\r\n        return {\r\n          properties\r\n        }\r\n      })\r\n    }\r\n    if (dbScanRadiusKM > 0) {\r\n      //@ts-ignore\r\n      collection = turf.clustersDbscan(\r\n        turf.featureCollection(features),\r\n        dbScanRadiusKM \r\n      )\r\n    }\r\n    // @ts-ignore\r\n    const clusters = groupBy(collection.features, 'properties.cluster')\r\n    console.log({ clusters })\r\n    const noises = collection.features.filter((feature: any) => \r\n      feature.properties.cluster == null\r\n    )\r\n    return (\r\n      <>\r\n      { onClickUpdate != null &&\r\n        <div className=\"container is-fluid\">\r\n          <div className=\"columns\">\r\n            <div className=\"column is-two-fifths\" />\r\n            <div className=\"column is-one-fifths\">\r\n              <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                <button\r\n                  className=\"button\"\r\n                  style={{\r\n                    zIndex: 10,\r\n                    border: \"none\",\r\n                    background: \"rgba(21,60,106,0.9)\",\r\n                    color: \"white\"\r\n                  }}\r\n                  onClick={() => onClickUpdate()}\r\n                >\r\n                  Redo Search Current Area\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"column is-two-fifths\" />\r\n          </div>\r\n        </div>\r\n      }\r\n        <div>\r\n          <div\r\n            style={{\r\n              height: \"100vh\",\r\n              width: \"100%\",\r\n              position: \"fixed\",\r\n              top: 0\r\n            }}\r\n          >\r\n            {locations != null && (\r\n              <GoogleMapReact\r\n                options={{ styles: googleMapStyle }}\r\n                bootstrapURLKeys={{\r\n                  key: \"AIzaSyCaxeoUHkl2GK3sKFaNvLfoRWMTm0EbzK0\"\r\n                }}\r\n                defaultCenter={centerCoord}\r\n                defaultZoom={(zoom && Number(zoom)) || defaultZoom}\r\n                hoverDistance={5}\r\n                yesIWantToUseGoogleMapApiInternals\r\n                onGoogleApiLoaded={({ map, maps }) => {\r\n                  if (autoZoom === true && hasLocationQuery === false) {\r\n                    const bounds = new maps.LatLngBounds();\r\n\r\n                    if (locations.length == 1) {\r\n                        map.setCenter(locations[0])\r\n                        map.setZoom(8)\r\n                    } else {\r\n                        locations.forEach(diveSite => {\r\n                        bounds.extend({\r\n                            lat: diveSite.lat,\r\n                            lng: diveSite.lng\r\n                        });\r\n                        });\r\n                        map.fitBounds(bounds);\r\n                        const zoom = map.getZoom()\r\n                        if (zoom > 12) map.setZoom(8)\r\n                    }\r\n                  }\r\n\r\n                  if (onGoogleApiLoaded != null) {\r\n                    onGoogleApiLoaded({ map, maps });\r\n                  }\r\n\r\n                  map.addListener(\"bounds_changed\", () => {\r\n                    // @ts-ignore\r\n                    clearTimeout(timeout);\r\n                    timeout = setTimeout(() => {\r\n                      const { lat, lng } = map.getCenter();\r\n                      const zoom = map.getZoom();\r\n                      const search = querystring.stringify({\r\n                        zoom,\r\n                        lat: lat(),\r\n                        lng: lng()\r\n                      });\r\n                      history.replace(location.pathname + \"?\" + search);\r\n\r\n                      const meterPerPixel = calculateMeterPerPixel(lat(), zoom)\r\n                      const clusterRadiusPixel = 10\r\n                      let clusterRadiusKM = meterPerPixel * clusterRadiusPixel / 1000\r\n                      if (zoom > NO_CLUSTER_ZOOM_THRESHOLD) {\r\n                        clusterRadiusKM = 0\r\n                      }\r\n                      updateDbScanRadius(clusterRadiusKM)\r\n                    }, 500);\r\n                  });\r\n                }}\r\n              >\r\n                {\r\n                  Object.keys(clusters)\r\n                  .filter((key) => key != 'undefined')\r\n                  .map((key: string) => {\r\n                    const cluster: any[] = clusters[key]\r\n                    const collection = turf.featureCollection(cluster)\r\n                    // const bbox = turf.bbox(collection)\r\n                    // const bboxPolygon = turf.bboxPolygon(bbox)\r\n                    // console.log({ bbox, bboxPolygon })\r\n\r\n                    //@ts-ignore\r\n                    const cg = turf.centerOfMass(collection)\r\n                    let names = cluster.map((feature) => {\r\n                      return feature.properties.name\r\n                    })\r\n                    if (names.length > 5) {\r\n                      names = names.slice(0,5)\r\n                      names.push('...')\r\n                    }\r\n                    const site = {\r\n                      name: names.join(', '),\r\n                      lat: cg.geometry.coordinates[0],\r\n                      lng: cg.geometry.coordinates[1],\r\n                      id: -1\r\n                    }\r\n                    return <DiveMarker\r\n                      site={site}\r\n                      zoom={zoom}\r\n                      key={key}\r\n                      lat={site.lat}\r\n                      lng={site.lng}\r\n                      //@ts-ignore\r\n                      text={String(cluster.length)}\r\n                      diameter={20}\r\n                    />\r\n\r\n                  })\r\n                }\r\n                {noises.map((point:any) => {\r\n\r\n                  const site = point.properties\r\n                  let text = ''\r\n                  let color = 'red'\r\n                  if (site.dbscan == 'noise' || site.dbscan == 'edge') {\r\n                    color='green'\r\n                  }\r\n\r\n                  if (zoom != null && zoom > NO_CLUSTER_ZOOM_THRESHOLD) {\r\n                    text = site.name\r\n                  }\r\n\r\n                  return <DiveMarker\r\n                    zoom={zoom}\r\n                    key={site.id}\r\n                    lat={site.lat}\r\n                    lng={site.lng}\r\n                    color={color}\r\n                    site={site}\r\n                    clickHandler={() => {\r\n                      if (setActiveLocation != null)\r\n                        setActiveLocation(site)\r\n                    }}\r\n                  >{text}</DiveMarker>\r\n                })}\r\n                  {children}\r\n              </GoogleMapReact>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n}\r\n\r\n//@ts-ignore\r\nexport default withRouter(DiveMap);\r\n","import React from 'react';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = { hasError: false };\r\n    }\r\n  \r\n    static getDerivedStateFromError(error) {\r\n      // Update state so the next render will show the fallback UI.\r\n      return { hasError: true };\r\n    }\r\n  \r\n    componentDidCatch(error, info) {\r\n      // You can also log the error to an error reporting service\r\n      console.log(error, info);\r\n    }\r\n  \r\n    render() {\r\n      if (this.state.hasError) {\r\n        // You can render any custom fallback UI\r\n        return <h1>Something went wrong.</h1>;\r\n      }\r\n  \r\n      return this.props.children; \r\n    }\r\n  }\r\n\r\nexport default ErrorBoundary","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DestinationCard from \"./DestinationCard\";\r\nimport { getDestination, IDiveSite, ICity } from \"./lib/api\";\r\nimport DiveMap from \"./components/DiveMap\";\r\nimport ErrorBoundary from \"./components/ErrorBoundary\";\r\n\r\nfunction Destination(props: any) {\r\n  const [diveSites, setDiveSites] = useState<IDiveSite[]>([]);\r\n  const [destination, setDestination] = useState<ICity | null>(null);\r\n  const [activeSite, setActiveSite] = useState<any>(null);\r\n\r\n  const { country, city } = props.match.params;\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      const data = await getDestination(country, city);\r\n      const result = data.results[0];\r\n      setDestination(result);\r\n      const diveSites = result.divesite_set || [];\r\n      setDiveSites(diveSites);\r\n      // only show on desktop\r\n      if (diveSites.length > 0 && window.innerWidth > 768) {\r\n        setActiveSite(diveSites[0]);\r\n      }\r\n    })();\r\n  }, [props.match.params.country, props.match.params.city]);\r\n\r\n  const breadcrumb = [\r\n    {\r\n      href: `/destinations`,\r\n      name: \"Country\"\r\n    },\r\n    {\r\n      href: `/destinations/${country}`,\r\n      name: country\r\n    },\r\n    {\r\n      href: `/destinations/${country}/${city}`,\r\n      name: city\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <div className=\"level\">\r\n        <nav className=\"breadcrumb\" aria-label=\"breadcrumbs\">\r\n          <ul>\r\n            {breadcrumb.map((crumb, idx) => (\r\n              <li\r\n                style={{ zIndex: 10 }}\r\n                key={idx}\r\n                className={` ${\r\n                  idx === breadcrumb.length - 1 ? \"is-active\" : \"\"\r\n                }`}\r\n              >\r\n                <Link\r\n                  to={crumb.href}\r\n                  className=\"title is-5\"\r\n                  style={{ padding: \"10px\" }}\r\n                >\r\n                  {crumb.name}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n      <div>\r\n        {destination != null && diveSites != null && (\r\n          <DiveMap\r\n            onClickUpdate={() => {\r\n              const search = props.location.search;\r\n              props.history.push(\"/destinations/map\" + search);\r\n            }}\r\n            locations={diveSites}\r\n            activeSite={activeSite}\r\n            centerCoord={{ lat: destination.lat, lng: destination.lng }}\r\n            activeSiteCountry={\"\"}\r\n            activeSiteCity={\"\"}\r\n            setActiveLocation={(activeSite: any) => {\r\n              console.log(\"setting active Site\");\r\n              setActiveSite(activeSite);\r\n            }}\r\n            autoZoom={true}\r\n            defaultZoom={8}\r\n            onGoogleApiLoaded={({ map, maps }: { map: any; maps: any }) => {\r\n              map.addListener(\"click\", () => {\r\n                setActiveSite(undefined);\r\n              });\r\n            }}\r\n          />\r\n        )}\r\n        {activeSite != null && (\r\n          <section className=\"section\" id=\"content\">\r\n            <div className=\"container is-fluid\">\r\n              <div className=\"columns\">\r\n                <div className=\"column is-three-quarters\" />\r\n                <div className=\"column\">\r\n                  <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                    <span\r\n                      className=\"icon\"\r\n                      style={{\r\n                        position: \"absolute\",\r\n                        right: 15,\r\n                        cursor: \"pointer\",\r\n                        color: \"#363636\"\r\n                      }}\r\n                      onClick={() => setActiveSite(undefined)}\r\n                    >\r\n                      <i className=\"far fa-times-circle\" />\r\n                    </span>\r\n                    <ErrorBoundary>\r\n                      <DestinationCard site={activeSite} />\r\n                    </ErrorBoundary>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Destination;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getCountries, getCities, ICity, loadJson } from \"./lib/api\";\r\nimport DiveMap from \"./components/DiveMap\";\r\n\r\nconst Level = (props: any) => <div className=\"level\">{props.children}</div>;\r\n\r\nfunction DestinationList(props: {\r\n  locationType: string;\r\n  country?: string;\r\n  history: any;\r\n}) {\r\n  const { locationType, country, history } = props;\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [destinations, setDestinations] = useState<ICity[]>([]);\r\n  const [next, setNext] = useState(null as string | null);\r\n\r\n  let breadcrumb = [{ name: \"Countries\", href: \"/destinations\" }];\r\n  if (country != null) {\r\n    breadcrumb.push({\r\n      name: country,\r\n      href: `/destinations/${country}`\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      try {\r\n        let data = null;\r\n        if (locationType === \"countries\") {\r\n          data = await getCountries();\r\n        } else {\r\n          data = await getCities({\r\n            country_name: String(props.country),\r\n            page_size: \"200\"\r\n          });\r\n        }\r\n        setNext(data.next);\r\n        setDestinations(data.results);\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        alert(error);\r\n      }\r\n    })();\r\n  }, [locationType, props.country]);\r\n\r\n  return (\r\n    <DestinationList_\r\n      history={history}\r\n      breadcrumb={breadcrumb}\r\n      isLoading={isLoading}\r\n      destinations={destinations}\r\n      locationType={locationType}\r\n      hasMore={next != null}\r\n      loadMoreHandler={async () => {\r\n        if (next == null) return;\r\n        const urlObj = new URL(next);\r\n        // fix different host in development\r\n        const url = urlObj.href.replace(urlObj.origin, \"\");\r\n\r\n        const data = await loadJson(url);\r\n        data.results = data.results.map((datum: ICity) => {\r\n          datum.country_name = country;\r\n          return datum;\r\n        });\r\n\r\n        const newList = destinations.concat(data.results);\r\n        setDestinations(newList);\r\n        setNext(data.next);\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\n\r\n\r\ninterface IBreadcrumb {\r\n  href: string;\r\n  name: string;\r\n}\r\n\r\nexport const DestinationList_ = ({\r\n  breadcrumb,\r\n  isLoading,\r\n  destinations,\r\n  locationType,\r\n  hasMore,\r\n  loadMoreHandler,\r\n  history\r\n}: {\r\n  breadcrumb: IBreadcrumb[];\r\n  isLoading: boolean;\r\n  destinations: ICity[];\r\n  locationType: string;\r\n  hasMore: boolean;\r\n  loadMoreHandler: Function;\r\n  history: any\r\n}) => {\r\n  return (\r\n    <div>\r\n      {destinations.length > 0 && (\r\n        <DiveMap\r\n          locations={destinations}\r\n          activeSite={undefined}\r\n          activeSiteCountry={\"\"}\r\n          activeSiteCity={\"\"}\r\n          setActiveLocation={(location: any) => {\r\n              if (locationType == 'countries') {\r\n                  history.push(`/destinations/${location.name}`)\r\n              } else {\r\n                  history.push(`/destinations/${location.country_name}/${location.name}`)\r\n              }\r\n          }}\r\n          autoZoom={true}\r\n          defaultZoom={8}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DestinationList;\r\n","import React from 'react'\r\n\r\nconst About = () =>\r\n    <div className=\"section\">\r\n        <div className=\"container\">\r\n            <div className=\"columns\">\r\n                <div className=\"column is-half is-offset-one-quarter\">\r\n                    <h2 className=\"title is-2\">About</h2>\r\n                    <p>The goal of <a href=\"/\" className=\"has-text-weight-bold\">Reefbase</a> is to be a place where scuba divers can collect information about a dive site before, during, and after a diving trip.</p><br />\r\n                    <p>Currently, the application is in development mode, so things will change and data could get lost.</p><br />\r\n                    <p>The dive site geo GPS coordinate are from <a href=\"http://divesites.com\" target=\"_blank\" rel=\"noopener noreferrer\">divesites.com</a></p><br />\r\n                    <p>Created by <a href=\"https://harinsang.com\" target=\"_blank\" rel=\"noopener noreferrer\">Harin Sanghirun</a>.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\nexport default About\r\n","//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n//:::                                                                         :::\r\n//:::  This routine calculates the distance between two points (given the     :::\r\n//:::  latitude/longitude of those points). It is being used to calculate     :::\r\n//:::  the distance between two locations using GeoDataSource (TM) prodducts  :::\r\n//:::                                                                         :::\r\n//:::  Definitions:                                                           :::\r\n//:::    South latitudes are negative, east longitudes are positive           :::\r\n//:::                                                                         :::\r\n//:::  Passed to function:                                                    :::\r\n//:::    lat1, lon1 = Latitude and Longitude of point 1 (in decimal degrees)  :::\r\n//:::    lat2, lon2 = Latitude and Longitude of point 2 (in decimal degrees)  :::\r\n//:::    unit = the unit you desire for results                               :::\r\n//:::           where: 'M' is statute miles (default)                         :::\r\n//:::                  'K' is kilometers                                      :::\r\n//:::                  'N' is nautical miles                                  :::\r\n//:::                                                                         :::\r\n//:::  Worldwide cities and other features databases with latitude longitude  :::\r\n//:::  are available at https://www.geodatasource.com                         :::\r\n//:::                                                                         :::\r\n//:::  For enquiries, please contact sales@geodatasource.com                  :::\r\n//:::                                                                         :::\r\n//:::  Official Web site: https://www.geodatasource.com                       :::\r\n//:::                                                                         :::\r\n//:::               GeoDataSource.com (C) All Rights Reserved 2018            :::\r\n//:::                                                                         :::\r\n//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n\r\nfunction distance(lat1, lon1, lat2, lon2, unit) {\r\n\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\treturn 0;\r\n\t}\r\n\telse {\r\n\t\tvar radlat1 = Math.PI * lat1/180;\r\n\t\tvar radlat2 = Math.PI * lat2/180;\r\n\t\tvar theta = lon1-lon2;\r\n\t\tvar radtheta = Math.PI * theta/180;\r\n\t\tvar dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\tif (dist > 1) {\r\n\t\t\tdist = 1;\r\n\t\t}\r\n\t\tdist = Math.acos(dist);\r\n\t\tdist = dist * 180/Math.PI;\r\n\t\tdist = dist * 60 * 1.1515;\r\n\t\tif (unit==\"K\") { dist = dist * 1.609344 }\r\n\t\tif (unit==\"N\") { dist = dist * 0.8684 }\r\n\t\treturn dist;\r\n\t}\r\n}\r\n\r\nexport default distance","import React, { useState, useEffect } from \"react\";\r\nimport DiveMap from \"./components/DiveMap\";\r\nimport DestinationCard from './DestinationCard';\r\nimport distance from \"./distance\";\r\nimport { getDiveSite, getDiveSites, IDiveSite } from \"./lib/api\";\r\nimport * as querystring from 'query-string'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { calculateMeterPerPixel } from './lib/utils'\r\n\r\n\r\n// interface BubbleProps {\r\n//   diveSite: IDiveSite;\r\n// }\r\n\r\n// const MapBubbleContent = (props: BubbleProps) => {\r\n//   const { diveSite } = props\r\n\r\n//   const [isLoading, setIsLoading] = useState(false)\r\n//   const [fullSiteInfo, setFullSiteInfo] = useState({} as IDiveSite)\r\n\r\n//   useEffect(() => {\r\n//     (async () => {\r\n//       setIsLoading(true)\r\n//       const fullSite: IDiveSite = await getDiveSite(diveSite.id)\r\n//       setIsLoading(false)\r\n//       setFullSiteInfo(fullSite)\r\n//     })()\r\n//   }, [diveSite])  \r\n\r\n//   return (\r\n//     <div\r\n//       style={{\r\n//         display: 'flex',\r\n//         flexDirection: 'column',\r\n//       }}\r\n//     >\r\n//       <h3 \r\n//         style={{ flex: 0 }}\r\n//         className=\"title is-4\">{diveSite.name}</h3>\r\n//       <div className={isLoading ? 'is-loading' : ''}\r\n//         style={{\r\n//           height: '100%',\r\n//           flex: '1 0 auto'\r\n//         }} \r\n//       >\r\n\r\n//       </div>\r\n//     </div>\r\n//   )\r\n// }\r\n\r\n\r\n\r\nconst MapPage = function(props: any) {\r\n  const { location } = props;\r\n  const { lat, lng, zoom } = querystring.parse(location.search)\r\n\r\n  const effectiveLat = Number(lat) || 26.5293775 //florida\r\n  const effectiveZoom = Number(zoom) || 10\r\n\r\n  const [activeSite, setActiveSite] = useState(null as any)\r\n  const [searchCircle, setSearchCircle] = useState({\r\n    lat: effectiveLat,\r\n    lng: Number(lng || -82.8939276),\r\n    radius: calculateMeterPerPixel(effectiveLat, effectiveZoom)\r\n  });\r\n  const [diveSites, setDiveSites] = useState([] as IDiveSite[]);\r\n\r\n  function setSearchCircleFromMap(map: any) {\r\n    const center = map.getCenter().toJSON();\r\n    const bound = map.getBounds().toJSON();\r\n    const latDist = distance(bound.west, 0, bound.east, 0, \"K\");\r\n    const lngDist = distance(0, bound.north, 0, bound.south, \"K\");\r\n    const radius = Math.min(latDist, lngDist);\r\n    center.radius = radius;\r\n    setSearchCircle(center);\r\n  }\r\n\r\n  function onLoad({ map, maps }: { map: any; maps: any }) {\r\n    setSearchCircleFromMap(map);\r\n\r\n    map.addListener(\"dragend\", () => setSearchCircleFromMap(map));\r\n    map.addListener(\"zoom_changed\", () => setSearchCircleFromMap(map));\r\n    map.addListener(\"click\", () => setActiveSite(undefined))\r\n  }\r\n\r\n  async function updateDiveSites() {\r\n    const query = Object.assign({}, searchCircle) as any;\r\n    query.page_size = 100;\r\n    query.include_location = \"true\";\r\n\r\n    const data = await getDiveSites(query);\r\n \r\n    setDiveSites(data.results);\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      updateDiveSites();\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n    <DiveMap\r\n      locations={diveSites}\r\n      activeSite={activeSite}\r\n      centerCoord={{ lat: searchCircle.lat, lng: searchCircle.lng }}\r\n      activeSiteCountry={\"\"}\r\n      activeSiteCity={\"\"}\r\n      setActiveLocation={(activeSite: any) => setActiveSite(activeSite)}\r\n      onGoogleApiLoaded={onLoad}\r\n      onClickUpdate={() => updateDiveSites()}\r\n      defaultZoom={8}\r\n    >\r\n      {/* { activeSite &&\r\n          //@ts-ignore\r\n          <div\r\n            className='speech-bubble'\r\n            lat={activeSite.lat} \r\n            lng={activeSite.lng}\r\n            style={{\r\n              background: 'white',\r\n              padding: '10px',\r\n              borderRadius: '10px',\r\n              width: 300,\r\n              height: 200,\r\n              position: 'relative',\r\n              top: -230,\r\n              left: -145,\r\n              boxShadow: '0px 4px 30px rgba(0, 0, 0, 0.10)',\r\n              cursor: 'default',\r\n              pointerEvents: 'all'\r\n            }}\r\n          >\r\n             <MapBubbleContent diveSite={activeSite} />\r\n          </div>\r\n\r\n        } */}\r\n     \r\n    </DiveMap>\r\n     {activeSite != null && (\r\n      <section className=\"section\" id=\"content\">\r\n        <div className=\"container is-fluid\">\r\n          <div className=\"columns\">\r\n            <div className=\"column is-three-quarters\" />\r\n            <div className=\"column\">\r\n              <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                <span\r\n                  className=\"icon\"\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    right: 15,\r\n                    cursor: \"pointer\",\r\n                    color: \"#363636\"\r\n                  }}\r\n                  onClick={() => setActiveSite(undefined)}\r\n                >\r\n                  <i className=\"far fa-times-circle\" />\r\n                </span>\r\n                <DestinationCard site={activeSite} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withRouter(MapPage);\r\n","import React, { useState } from \"react\";\r\nimport { IDiveSite, APIResults } from '../lib/api'\r\n\r\nconst SEARCH_TIMEOUT_MS = 500\r\n\r\nconst DiveSiteSelect = ({\r\n  handleChange,\r\n  getDiveSites,\r\n  name\r\n}: {\r\n  name: string;\r\n  handleChange: (e: React.ChangeEvent<any>) => void;\r\n  getDiveSites: (query?: any) => Promise<APIResults<IDiveSite>>;\r\n}) => {\r\n\r\n  const [diveSites, setDiveSites] = useState([] as IDiveSite[])\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [searchTimeout, setSearchTimeout] = useState()\r\n\r\n  return (\r\n    <div className=\"control has-icons left\">\r\n        <input type=\"text\" \r\n            onChange={(e) => {\r\n              const value = e.target.value\r\n              clearTimeout(searchTimeout)\r\n              const newTimeout = setTimeout(async () => {\r\n                if (isLoading) return\r\n                setIsLoading(true)\r\n                const result = await getDiveSites({\r\n                    keyword: value\r\n                })\r\n                setIsLoading(false)\r\n                setDiveSites(result.results)\r\n              }, SEARCH_TIMEOUT_MS)\r\n              setSearchTimeout(newTimeout)\r\n            }}\r\n            placeholder='Search Dive Site by Name'\r\n        />\r\n      <div className=\"select\">\r\n        <select\r\n          name={name}\r\n          onChange={handleChange}\r\n        >\r\n          {diveSites.map((d: any) => (\r\n            <option key={d.id} value={d.id}>{d.name}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <span className=\"icon is-left\">\r\n        <i className=\"fas fa-globe\" />\r\n      </span> \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DiveSiteSelect;\r\n","import React, { useState } from \"react\";\r\nimport { sortBy } from \"lodash-es\";\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport DiveSiteSelect from './DiveSiteSelect'\r\nimport { IDiveSite, APIResults, createDiveLog } from '../lib/api'\r\n\r\ninterface Props {\r\n  getDiveSites: (q?: any) => Promise<APIResults<IDiveSite>>;\r\n  onSubmitted?: Function,\r\n  onCanceled?: () => void\r\n}\r\n\r\nconst DiveLogForm = (props: Props) => {\r\n  const { \r\n    getDiveSites,\r\n    onSubmitted,\r\n    onCanceled\r\n  } = props;\r\n  return (\r\n    <Formik\r\n      initialValues={{\r\n        date: new Date().toISOString().substring(0, 10),\r\n        divesite_id: 1,\r\n        meta: undefined,\r\n        rating: undefined,\r\n        notes: undefined\r\n      }}\r\n      onSubmit={async (values, { setSubmitting, setErrors }) => {\r\n        // if (values.divesite_id == null) return;\r\n        // values.divesite_id = Number(values.divesite_id)\r\n        const result = await createDiveLog(values);\r\n        if (result.errors) {\r\n          setErrors(result.errors);\r\n        } else {\r\n          if (onSubmitted != null) onSubmitted()\r\n        }\r\n      }}\r\n    >\r\n      {(props: any) => {\r\n        const { errors, handleChange } = props;\r\n        return (\r\n          <Form>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Date</label>\r\n              <div className=\"control\">\r\n                <Field\r\n                  name=\"date\"\r\n                  type=\"date\"\r\n                  data-display-mode=\"inline\"\r\n                  data-is-range=\"true\"\r\n                  data-close-on-select=\"false\"\r\n                />\r\n              </div>\r\n              <ErrorMessage name=\"date\" />\r\n            </div>\r\n            <div className=\"field\">\r\n              <label className=\"label\" htmlFor=\"\">\r\n                Time\r\n              </label>\r\n              <div className=\"control\">\r\n                <Field\r\n                  type=\"time\"\r\n                  data-display-mode=\"inline\"\r\n                  data-is-range=\"true\"\r\n                  data-close-on-select=\"false\"\r\n                />\r\n                <ErrorMessage name=\"time\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Dive Site</label>\r\n              <div className=\"control\">\r\n                <DiveSiteSelect\r\n                  name={'divesite_id'}\r\n                  getDiveSites={getDiveSites}\r\n                  handleChange={handleChange}\r\n                />\r\n                <ErrorMessage name=\"divesite_id\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"field\">\r\n              <label className=\"label\">Notes</label>\r\n              <div className=\"control\">\r\n                <textarea className=\"textarea\" name=\"notes\" />\r\n                <ErrorMessage name=\"notes\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Meta</label>\r\n              <div className=\"control\">\r\n                <textarea className=\"textarea\" name=\"meta\" />\r\n                {errors.meta}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">Rating</label>\r\n              <div className=\"control\">\r\n                <Field type=\"number\" name=\"rating\" />\r\n                <ErrorMessage name=\"rating\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"field is-grouped\">\r\n              <div className=\"control\">\r\n                <button className=\"button is-primary\">Create</button>\r\n              </div>\r\n              <div className=\"control\">\r\n                <button className=\"button is-text\" onClick={(e) => {\r\n                  e.preventDefault()\r\n                  if (onCanceled != null) onCanceled()\r\n                }}>Cancel</button>\r\n              </div>\r\n            </div>\r\n            <pre>{JSON.stringify(props, null, 2)}</pre>\r\n          </Form>\r\n        );\r\n      }}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default DiveLogForm;\r\n","import React from 'react';\r\n\r\ninterface Props {\r\n    diveLogs: any[]\r\n}\r\n\r\nconst DiveLogsList = ({ diveLogs }: Props) => {\r\n\r\n    return (\r\n      <ul>\r\n        {diveLogs.map((diveLog: any) => (\r\n          <li key={diveLog.id} className=\"card\">\r\n            <div className=\"card-header-title\">\r\n              <div className=\"columns\" style={{flexGrow:'inherit'}}>\r\n                <div className=\"column is-two-thirds\">\r\n                  <div className=\"title is-size-6\">\r\n                    {diveLog.divesite.name}\r\n                  </div>\r\n                  <div className=\"subtitle is-size-7\">\r\n                    {diveLog.divesite.city.name},{\" \"}\r\n                    {diveLog.divesite.city.country.name}\r\n                  </div>\r\n                </div>\r\n                <div className=\"column is-one-thirds is-size-7 has-text-right\">\r\n                    <div>{diveLog.date}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* <pre>{JSON.stringify(diveLog, null ,2)} */}\r\n\r\n            {/* </pre> */}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n}\r\n\r\nexport default DiveLogsList","import React, { ReactChildren } from 'react';\r\n\r\n\r\nconst CardRight = ({ children }: { children: React.ReactNode }) => \r\n    <section className=\"section\">\r\n        <div className=\"container is-fluid\">\r\n            <div className=\"columns\">\r\n                <div className=\"column is-three-quarters\"></div>\r\n                <div className=\"column\">\r\n                    <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                        {children}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n\r\nexport default CardRight","import React, { useState, useEffect } from 'react';\r\nimport DiveLogForm from './components/DiveLogForm'\r\nimport DiveLogsList from './components/DiveLogsList'\r\nimport CardRight from './components/CardRight'\r\nimport DiveMap from './components/DiveMap'\r\nimport { meanBy } from 'lodash-es'\r\n\r\nimport { getDiveSites, getDiveLogs} from './lib/api'\r\n\r\nexport const DiveLogsPage = () => {\r\n    const [diveLogs, setDiveLogs ] = useState([] as any[])\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [isCreate, setIsCreate] = useState(false)\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            setIsLoading(true)\r\n            const result = await getDiveLogs()\r\n            setIsLoading(false)\r\n            setDiveLogs(result.results)\r\n        })()\r\n    }, [])\r\n\r\n    let lat = 0\r\n    let lng = 0\r\n    if (diveLogs.length > 0) {\r\n      lat = meanBy(diveLogs, (d) => d.divesite.lat)\r\n      lng = meanBy(diveLogs, (d) => d.divesite.lng)\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <DiveMap\r\n          locations={diveLogs.map(d => d.divesite)}\r\n          defaultZoom={8}\r\n          centerCoord={{ lat, lng }}\r\n          autoZoom={true}\r\n        >\r\n          <CardRight>\r\n            {isCreate ? (\r\n\r\n              <DiveLogForm\r\n                getDiveSites={getDiveSites}\r\n                onSubmitted={() => window.location.reload()}\r\n                onCanceled={() => setIsCreate(false)}\r\n              />\r\n            ) : (\r\n              <>\r\n              <button\r\n              className=\"button\"\r\n              onClick={() => {\r\n                setIsCreate(!isCreate);\r\n              }}\r\n            >\r\n              + New Log\r\n            </button>\r\n              <DiveLogsList diveLogs={diveLogs} />\r\n              </>\r\n\r\n            )}\r\n          </CardRight>\r\n        </DiveMap>\r\n      </>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default DiveLogsPage\r\n","import React from 'react';\r\n\r\nconst ErrorView = () => {\r\n    return (\r\n        <section className=\"hero\">\r\n            <div className=\"hero-body\">\r\n                <div className=\"container\">\r\n                    Something went wrong!\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ErrorView","import React from \"react\";\nimport \"./App.scss\";\nimport '../node_modules/bulma-extensions/bulma-calendar/dist/js/bulma-calendar'\nimport Navbar from \"./Navbar\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect,\n  Switch\n} from \"react-router-dom\";\nimport Destination from \"./Destination\";\nimport DestinationList from \"./DestinationList\";\nimport About from \"./About\";\nimport MapPage from \"./MapPage\";\nimport DiveLogsPage from './DiveLogsPage'\nimport ErrorView from './components/ErrorView'\nimport { AppContext, DEFAULT_STATE } from \"./AppContext\";\nimport { IUser } from \"./lib/api\";\n\nfunction DestinationPage(props: any) {\n  return <Destination {...props} />;\n}\n\nfunction DestinationListPage(props: any) {\n  const pathname = props.location.pathname;\n  if (pathname === \"/destinations\") {\n    return <DestinationList \n      locationType=\"countries\" \n      history={props.history}\n    />;\n  }\n  return (\n    <DestinationList\n      locationType=\"cities\"\n      country={props.match.params.country}\n      history={props.history}\n    />\n  );\n}\n\nclass App extends React.Component {\n  state = DEFAULT_STATE;\n  constructor(props: any) {\n    super(props);\n   \n  }\n\n  static getDerivedStateFromError(error: any) {\n    return { hasError: true }\n  }\n\n  componentDidCatch(error: any, info: any) {\n    this.setState({ error })\n  }\n\n  updateUser = (user: IUser | null) => {\n    this.setState({ user });\n    localStorage.setItem(\"user\", JSON.stringify(user));\n  };\n\n  render() {\n\n    if (this.state.hasError) {\n      return (\n        <>\n          <Navbar />\n          <ErrorView />\n        </>\n      )\n    }\n\n    return (\n      <AppContext.Provider\n        value={{\n          ...this.state,\n          updateUser: this.updateUser\n        }}\n      >\n        <Router>\n          <div>\n            <Navbar />\n            <Route\n              exact\n              path=\"/\"\n              render={() => <Redirect to=\"/destinations\" />}\n            />\n            <Route path=\"/about/\" component={About} />\n            <Route\n              path=\"/destinations/\"\n              exact\n              component={DestinationListPage}\n            />\n            <Switch>\n              <Route path=\"/destinations/map\" exact component={MapPage} />\n              <Route\n                path=\"/destinations/:country\"\n                exact\n                component={DestinationListPage}\n              />\n              <Route\n                path=\"/destinations/:country/:city\"\n                exact\n                component={DestinationPage}\n              />\n              <Route\n                path='/divelogs'\n                component={DiveLogsPage}\n              />\n              <Route\n                path='/divelogs/create'\n                component={DiveLogsPage}\n              />\n            </Switch>\n          </div>\n        </Router>\n      </AppContext.Provider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('page'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}