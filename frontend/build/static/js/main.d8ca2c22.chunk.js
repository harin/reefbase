(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(e){e.exports=[{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{lightness:70},{weight:1}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"landscape",stylers:[{saturation:-65},{lightness:45}]},{featureType:"landscape.natural.terrain",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{lightness:65}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",stylers:[{visibility:"off"}]},{featureType:"road.highway",stylers:[{color:"#f0f0f0"},{weight:.5}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{saturation:-5},{visibility:"simplified"}]},{featureType:"water",elementType:"labels.text",stylers:[{visibility:"off"}]}]},205:function(e,t,a){e.exports=a(352)},210:function(e,t,a){},352:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(141),i=a.n(c),s=a(203),o=a(49),l=a(50),u=a(54),m=a(51),d=a(55),p=(a(210),a(211),a(5)),f=a.n(p),v=a(9),h=a(37),b={user:void 0,hasError:!1},y=r.a.createContext(b),E=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={active:!1},a.logout=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.context.updateUser(null);case 1:case"end":return e.stop()}},e)})),a.closeMenu=function(){a.setState({active:!1})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar is-dark",id:"nav",role:"navigation","aria-label":"main navigation",style:{paddingLeft:10,paddingRight:10}},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("a",{href:"/",className:"navbar-item"},r.a.createElement("div",{className:"title tooltip",style:{paddingRight:20}},"Reefbase")),r.a.createElement("a",{href:"/",role:"button",className:"navbar-burger burger ".concat(this.state.active?"is-active":""),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:function(t){t.preventDefault(),e.setState({active:!e.state.active})}},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:"navbar-menu ".concat(this.state.active?"is-active":""),style:{backgroundColor:"rgba(0,0,0,0)"}},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(h.b,{className:"navbar-item",onClick:this.closeMenu,to:"/about"},"About"),r.a.createElement(h.b,{className:"navbar-item",onClick:this.closeMenu,to:"/destinations"},"Destinations"),r.a.createElement(h.b,{className:"navbar-item",onClick:this.closeMenu,to:"/destinations/map"},"Map"))))}}]),t}(r.a.Component);E.contextType=y;var g=E,x=a(62),N=a(13);function w(e){return O.apply(this,arguments)}function O(){return(O=Object(v.a)(f.a.mark(function e(t){var a,n,r,c,i,s=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null==(a=s.length>1&&void 0!==s[1]?s[1]:{}).headers&&(a.headers={}),a.headers["Content-Type"]="application/json",e.next=5,fetch(t,a);case 5:if(!(n=e.sent).ok){e.next=11;break}return e.next=9,n.json();case 9:return r=e.sent,e.abrupt("return",r);case 11:return c="",e.prev=12,e.next=15,n.json();case 15:i=e.sent,c=i.error,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),c=n.statusText;case 22:throw new Error(c);case 23:case"end":return e.stop()}},e,null,[[12,19]])}))).apply(this,arguments)}function j(){return k.apply(this,arguments)}function k(){return(k=Object(v.a)(f.a.mark(function e(){var t,a,n=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{page_size:"200"},a=new URLSearchParams(t),e.abrupt("return",w("/api/countries?".concat(a.toString())));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(){return C.apply(this,arguments)}function C(){return(C=Object(v.a)(f.a.mark(function e(){var t,a,n,r=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{country_name:"Thailand",page_size:"10"},a=new URLSearchParams(t),e.next=4,w("/api/cities?".concat(a.toString()));case 4:return(n=e.sent).results=n.results.map(function(e){return e.country_name=t.country_name,e}),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e,t){return T.apply(this,arguments)}function T(){return(T=Object(v.a)(f.a.mark(function e(t,a){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams({country_name:t,city_name:a,include_divesites:"true"}),e.next=3,w("/api/cities?".concat(n.toString()));case 3:return(r=e.sent).results.length>0&&(r.results=r.results.map(function(e){return null==e.divesite_set?e:(e.divesite_set=e.divesite_set.map(function(e){return(e=M(e)).country_name=t,e.city_name=a,e}),e)})),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e){return e.min_temp_by_month=JSON.parse(e.min_temp_by_month),e.max_temp_by_month=JSON.parse(e.max_temp_by_month),e.meta=JSON.parse(e.meta),e}function L(e){return z.apply(this,arguments)}function z(){return(z=Object(v.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams(t),e.next=3,w("/api/divesites?"+a.toString());case 3:return(n=e.sent).results=n.results.map(M),e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(){return D.apply(this,arguments)}function D(){return(D=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w("/api/divelogs"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}function U(e){return R.apply(this,arguments)}function R(){return(R=Object(v.a)(f.a.mark(function e(t){var a,n,r,c,i,s,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I("csrftoken")||"",(n=new Headers).append("Content-Type","application/json"),n.append("X-CSRFToken",a),r={method:"POST",body:JSON.stringify(t),headers:n},e.next=7,fetch("/api/divelogs/",r);case 7:if(!(c=e.sent).ok){e.next=13;break}return e.next=11,c.json();case 11:return i=e.sent,e.abrupt("return",i);case 13:if(400!=c.status){e.next=20;break}return e.next=16,c.json();case 16:return s=e.sent,o={},Object.keys(s).forEach(function(e){o[e]=s[e][0]}),e.abrupt("return",{errors:o});case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}var P={updateNote:function(){var e=Object(v.a)(f.a.mark(function e(t){var a,n,r,c,i,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.diveSiteId,n=t.user,r=t.content,c={"Content-Type":"application/json",Authorization:"Bearer ".concat(n.access_token)},i=JSON.stringify({content:r}),e.next=5,w("/api/notes/divesites/".concat(a,"/users/").concat(n.id),{method:"POST",headers:c,body:i});case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getNote:function(){var e=Object(v.a)(f.a.mark(function e(t){var a,n,r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.diveSiteId,n=t.user,r={"Content-Type":"application/json",Authorization:"Bearer ".concat(n.access_token)},e.next=4,w("/api/notes/divesites/".concat(a,"/users/").concat(n.id),{headers:r,methods:"POST"});case 4:if(null!=(c=e.sent)){e.next=7;break}return e.abrupt("return","");case 7:return e.abrupt("return",c.content);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Z=a(360),F=a(362),J=a(357),G=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._textarea=void 0,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"syncNote",value:function(){var e=Object(v.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.site.id,e.next=3,P.getNote({diveSiteId:t,user:this.context.user});case 3:a=e.sent,this._textarea.value=a;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.context.user){e.next=2;break}return e.abrupt("return");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(v.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"onNoteSave",value:function(){var e=Object(v.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.site.id,e.next=3,P.updateNote({diveSiteId:a,user:this.context.user,content:this._textarea.value});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.site;if(console.log(t),null==t)return r.a.createElement("div",null,r.a.createElement("h2",{className:"title is-two"},"No Dive Site Selected!"));null!=this.context.user?r.a.createElement("div",{className:"full-height"},r.a.createElement("textarea",{autoFocus:!0,className:"textarea borderless",placeholder:"Take notes here.",ref:function(t){return e._textarea=t}}),r.a.createElement("button",{className:"button",onClick:this.onNoteSave.bind(this)},"submit")):r.a.createElement("div",null,r.a.createElement("textarea",{className:"textarea borderless",placeholder:"Notes coming soon!",ref:function(t){return e._textarea=t},disabled:!0}));var a=[],n=[],c=[];return null!=t.min_temp_by_month&&null!=t.max_temp_by_month&&t.min_temp_by_month.forEach(function(e,r){var i=t.max_temp_by_month[r];a.push({minTemp:e,maxTemp:i}),n.push({x:r,y:i}),c.push({x:r,y:e})}),console.log(n),r.a.createElement("div",null,r.a.createElement("h2",{className:"title is-two"},t.name),r.a.createElement("h3",{className:"subtitle is-four"},t.city_name,", ",t.country_name),r.a.createElement(Z.a,{height:200},r.a.createElement(F.a,{tickValues:[1,2,3,4,5,6,7,8,9,10,11,12],tickFormat:["Jan","","","Apr.","","","July","","","Oct","",""]}),r.a.createElement(F.a,{dependentAxis:!0,fixLabelOverlap:!0}),r.a.createElement(J.a,{data:n,x:"x",y:"y"}),r.a.createElement(J.a,{data:c,x:"x",y:"y"})))}}]),t}(r.a.Component);G.contextType=y;var B=G,H=a(199),K=a.n(H);var W=function(e){var t=e.site,a=e.zoom,n=e.color,c=e.diameter,i=e.text,s=e.children,o=e.clickHandler,l=void 0===o?function(){}:o;return null==n&&(n="red"),null==c&&(c=function(e){if(null==e)return 5;var t=10*e/10+1;return t>20&&(t=20),t}(a)),r.a.createElement("div",{className:"tooltip","data-tooltip":t.name,style:{height:c,width:c,backgroundColor:n,borderRadius:"50%",display:"flex",flexDirection:"column",alignContent:"center",cursor:"pointer",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",border:"1px solid white"},onClick:function(){return l(t)}},r.a.createElement("span",{style:{color:"white",textAlign:"center",width:"100%",flexGrow:1}},i),r.a.createElement("span",{style:{position:"relative",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",fontWeight:500,left:c+5}},s))},q=a(363),V=a(359),X=a(200),$=a(89),Q=a(82);function Y(e,t){return console.log(e,t),console.log(Math.cos(e*Math.PI/180)),console.log(Math.pow(2,t)),156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,t)}var ee,te=X,ae=10;var ne=Object(x.f)(function(e){var t=e.locations,a=e.centerCoord,c=(e.activeSite,e.setActiveLocation),i=(e.activeSiteCountry,e.activeSiteCity,e.onGoogleApiLoaded),s=e.defaultZoom,o=e.autoZoom,l=e.children,u=e.location,m=e.history,d=e.onClickUpdate,p=Object(n.useState)(.01),f=Object(N.a)(p,2),v=f[0],h=f[1];null==a&&(a={lat:0,lng:0}),!0===o&&t.length>0&&(a={lat:Object(q.a)(t,"lat"),lng:Object(q.a)(t,"lng")});var b=!1,y=$.parse(u.search),E=y.lat,g=y.lng,x=y.zoom;null!=E&&null!=g&&null!=x&&(a.lat=Number(E),a.lng=Number(g),b=!0);var w=t.map(function(e){return Q.point([e.lat,e.lng],e)}),O={features:t.map(function(e){return{properties:Object.assign({},e,{dbscan:"noise"})}})};v>0&&(O=Q.clustersDbscan(Q.featureCollection(w),v));var j=Object(V.a)(O.features,"properties.cluster");console.log({clusters:j});var k=O.features.filter(function(e){return null==e.properties.cluster});return r.a.createElement(r.a.Fragment,null,null!=d&&r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-fifths"}),r.a.createElement("div",{className:"column is-one-fifths"},r.a.createElement("div",{className:"tile box is-vertical",id:"main-content"},r.a.createElement("button",{className:"button",style:{zIndex:10,border:"none",background:"rgba(21,60,106,0.9)",color:"white"},onClick:function(){return d()}},"Redo Search Current Area"))),r.a.createElement("div",{className:"column is-two-fifths"}))),r.a.createElement("div",null,r.a.createElement("div",{style:{height:"100vh",width:"100%",position:"fixed",top:0}},null!=t&&r.a.createElement(K.a,{options:{styles:te},bootstrapURLKeys:{key:"AIzaSyCaxeoUHkl2GK3sKFaNvLfoRWMTm0EbzK0"},defaultCenter:a,defaultZoom:x&&Number(x)||s,hoverDistance:5,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var a=e.map,n=e.maps;if(!0===o&&!1===b){var r=new n.LatLngBounds;1==t.length?(a.setCenter(t[0]),a.setZoom(8)):(t.forEach(function(e){r.extend({lat:e.lat,lng:e.lng})}),a.fitBounds(r),a.getZoom()>12&&a.setZoom(8))}null!=i&&i({map:a,maps:n}),a.addListener("bounds_changed",function(){clearTimeout(ee),ee=setTimeout(function(){var e=a.getCenter(),t=e.lat,n=e.lng,r=a.getZoom(),c=$.stringify({zoom:r,lat:t(),lng:n()});m.replace(u.pathname+"?"+c);var i=10*Y(t(),r)/1e3;r>ae&&(i=0),h(i)},500)})}},Object.keys(j).filter(function(e){return"undefined"!=e}).map(function(e){var t=j[e],a=Q.featureCollection(t),n=Q.centerOfMass(a),c=t.map(function(e){return e.properties.name});c.length>5&&(c=c.slice(0,5)).push("...");var i={name:c.join(", "),lat:n.geometry.coordinates[0],lng:n.geometry.coordinates[1],id:-1};return r.a.createElement(W,{site:i,zoom:x,key:e,lat:i.lat,lng:i.lng,text:String(t.length),diameter:20})}),k.map(function(e){var t=e.properties,a="",n="red";return"noise"!=t.dbscan&&"edge"!=t.dbscan||(n="green"),null!=x&&x>ae&&(a=t.name),r.a.createElement(W,{zoom:x,key:t.id,lat:t.lat,lng:t.lng,color:n,site:t,clickHandler:function(){null!=c&&c(t)}},a)}),l))))}),re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={hasError:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component);var ce=function(e){var t=Object(n.useState)([]),a=Object(N.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(null),o=Object(N.a)(s,2),l=o[0],u=o[1],m=Object(n.useState)(null),d=Object(N.a)(m,2),p=d[0],b=d[1],y=e.match.params,E=y.country,g=y.city;Object(n.useEffect)(function(){Object(v.a)(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(E,g);case 2:t=e.sent,a=t.results[0],u(a),n=a.divesite_set||[],i(n),n.length>0&&window.innerWidth>768&&b(n[0]);case 8:case"end":return e.stop()}},e)}))()},[e.match.params.country,e.match.params.city]);var x=[{href:"/destinations",name:"Country"},{href:"/destinations/".concat(E),name:E},{href:"/destinations/".concat(E,"/").concat(g),name:g}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"level"},r.a.createElement("nav",{className:"breadcrumb","aria-label":"breadcrumbs"},r.a.createElement("ul",null,x.map(function(e,t){return r.a.createElement("li",{style:{zIndex:10},key:t,className:" ".concat(t===x.length-1?"is-active":"")},r.a.createElement(h.b,{to:e.href,className:"title is-5",style:{padding:"10px"}},e.name))})))),r.a.createElement("div",null,null!=l&&null!=c&&r.a.createElement(ne,{onClickUpdate:function(){var t=e.location.search;e.history.push("/destinations/map"+t)},locations:c,activeSite:p,centerCoord:{lat:l.lat,lng:l.lng},activeSiteCountry:"",activeSiteCity:"",setActiveLocation:function(e){console.log("setting active Site"),b(e)},autoZoom:!0,defaultZoom:8,onGoogleApiLoaded:function(e){var t=e.map;e.maps,t.addListener("click",function(){b(void 0)})}}),null!=p&&r.a.createElement("section",{className:"section",id:"content"},r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-three-quarters"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"tile box is-vertical",id:"main-content"},r.a.createElement("span",{className:"icon",style:{position:"absolute",right:15,cursor:"pointer",color:"#363636"},onClick:function(){return b(void 0)}},r.a.createElement("i",{className:"far fa-times-circle"})),r.a.createElement(re,null,r.a.createElement(B,{site:p})))))))))};var ie=function(e){e.breadcrumb,e.isLoading;var t=e.destinations,a=e.locationType,n=(e.hasMore,e.loadMoreHandler,e.history);return r.a.createElement("div",null,t.length>0&&r.a.createElement(ne,{locations:t,activeSite:void 0,activeSiteCountry:"",activeSiteCity:"",setActiveLocation:function(e){"countries"==a?n.push("/destinations/".concat(e.name)):n.push("/destinations/".concat(e.country_name,"/").concat(e.name))},autoZoom:!0,defaultZoom:8}))},se=function(e){var t=e.locationType,a=e.country,c=e.history,i=Object(n.useState)(!0),s=Object(N.a)(i,2),o=s[0],l=s[1],u=Object(n.useState)([]),m=Object(N.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)(null),b=Object(N.a)(h,2),y=b[0],E=b[1],g=[{name:"Countries",href:"/destinations"}];return null!=a&&g.push({name:a,href:"/destinations/".concat(a)}),Object(n.useEffect)(function(){Object(v.a)(f.a.mark(function a(){var n;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n=null,"countries"!==t){a.next=8;break}return a.next=5,j();case 5:n=a.sent,a.next=11;break;case 8:return a.next=10,S({country_name:String(e.country),page_size:"200"});case 10:n=a.sent;case 11:E(n.next),p(n.results),l(!1),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),alert(a.t0);case 19:case"end":return a.stop()}},a,null,[[0,16]])}))()},[t,e.country]),r.a.createElement(ie,{history:c,breadcrumb:g,isLoading:o,destinations:d,locationType:t,hasMore:null!=y,loadMoreHandler:Object(v.a)(f.a.mark(function e(){var t,n,r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=y){e.next=2;break}return e.abrupt("return");case 2:return t=new URL(y),n=t.href.replace(t.origin,""),e.next=6,w(n);case 6:(r=e.sent).results=r.results.map(function(e){return e.country_name=a,e}),c=d.concat(r.results),p(c),E(r.next);case 11:case"end":return e.stop()}},e)}))})},oe=function(){return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-half is-offset-one-quarter"},r.a.createElement("h2",{className:"title is-2"},"About"),r.a.createElement("p",null,"The goal of ",r.a.createElement("a",{href:"/",className:"has-text-weight-bold"},"Reefbase")," is to be a place where scuba divers can collect information about a dive site before, during, and after a diving trip."),r.a.createElement("br",null),r.a.createElement("p",null,"Currently, the application is in development mode, so things will change and data could get lost."),r.a.createElement("br",null),r.a.createElement("p",null,"The dive site geo GPS coordinate are from ",r.a.createElement("a",{href:"http://divesites.com",target:"_blank",rel:"noopener noreferrer"},"divesites.com")),r.a.createElement("br",null),r.a.createElement("p",null,"Created by ",r.a.createElement("a",{href:"https://harinsang.com",target:"_blank",rel:"noopener noreferrer"},"Harin Sanghirun"),".")))))};var le=function(e,t,a,n,r){if(e==a&&t==n)return 0;var c=Math.PI*e/180,i=Math.PI*a/180,s=t-n,o=Math.PI*s/180,l=Math.sin(c)*Math.sin(i)+Math.cos(c)*Math.cos(i)*Math.cos(o);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515,"K"==r&&(l*=1.609344),"N"==r&&(l*=.8684),l},ue=Object(x.f)(function(e){var t=e.location,a=$.parse(t.search),c=a.lat,i=a.lng,s=a.zoom,o=Number(c)||26.5293775,l=Number(s)||10,u=Object(n.useState)(null),m=Object(N.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)({lat:o,lng:Number(i||-82.8939276),radius:Y(o,l)}),b=Object(N.a)(h,2),y=b[0],E=b[1],g=Object(n.useState)([]),x=Object(N.a)(g,2),w=x[0],O=x[1];function j(e){var t=e.getCenter().toJSON(),a=e.getBounds().toJSON(),n=le(a.west,0,a.east,0,"K"),r=le(0,a.north,0,a.south,"K"),c=Math.min(n,r);t.radius=c,E(t)}function k(){return S.apply(this,arguments)}function S(){return(S=Object(v.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object.assign({},y)).page_size=100,t.include_location="true",e.next=5,L(t);case 5:a=e.sent,O(a.results);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(n.useEffect)(function(){Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:k();case 1:case"end":return e.stop()}},e)}))()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{locations:w,activeSite:d,centerCoord:{lat:y.lat,lng:y.lng},activeSiteCountry:"",activeSiteCity:"",setActiveLocation:function(e){return p(e)},onGoogleApiLoaded:function(e){var t=e.map;e.maps,j(t),t.addListener("dragend",function(){return j(t)}),t.addListener("zoom_changed",function(){return j(t)}),t.addListener("click",function(){return p(void 0)})},onClickUpdate:function(){return k()},defaultZoom:8}),null!=d&&r.a.createElement("section",{className:"section",id:"content"},r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-three-quarters"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"tile box is-vertical",id:"main-content"},r.a.createElement("span",{className:"icon",style:{position:"absolute",right:15,cursor:"pointer",color:"#363636"},onClick:function(){return p(void 0)}},r.a.createElement("i",{className:"far fa-times-circle"})),r.a.createElement(B,{site:d})))))))}),me=a(35),de=function(e){var t=e.handleChange,a=e.getDiveSites,c=e.name,i=Object(n.useState)([]),s=Object(N.a)(i,2),o=s[0],l=s[1],u=Object(n.useState)(!1),m=Object(N.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)(),b=Object(N.a)(h,2),y=b[0],E=b[1];return r.a.createElement("div",{className:"control has-icons left"},r.a.createElement("input",{type:"text",onChange:function(e){var t=e.target.value;clearTimeout(y);var n=setTimeout(Object(v.a)(f.a.mark(function e(){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.next=5,a({keyword:t});case 5:n=e.sent,p(!1),l(n.results);case 8:case"end":return e.stop()}},e)})),500);E(n)},placeholder:"Search Dive Site by Name"}),r.a.createElement("div",{className:"select"},r.a.createElement("select",{name:c,onChange:t},o.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("span",{className:"icon is-left"},r.a.createElement("i",{className:"fas fa-globe"})))},pe=function(e){var t=e.getDiveSites,a=e.onSubmitted,n=e.onCanceled;return r.a.createElement(me.d,{initialValues:{date:(new Date).toISOString().substring(0,10),divesite_id:1,meta:void 0,rating:void 0,notes:void 0},onSubmit:function(){var e=Object(v.a)(f.a.mark(function e(t,n){var r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setSubmitting,r=n.setErrors,e.next=3,U(t);case 3:(c=e.sent).errors?r(c.errors):null!=a&&a();case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},function(e){var a=e.errors,c=e.handleChange;return r.a.createElement(me.c,null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Date"),r.a.createElement("div",{className:"control"},r.a.createElement(me.b,{name:"date",type:"date","data-display-mode":"inline","data-is-range":"true","data-close-on-select":"false"})),r.a.createElement(me.a,{name:"date"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:""},"Time"),r.a.createElement("div",{className:"control"},r.a.createElement(me.b,{type:"time","data-display-mode":"inline","data-is-range":"true","data-close-on-select":"false"}),r.a.createElement(me.a,{name:"time"}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Dive Site"),r.a.createElement("div",{className:"control"},r.a.createElement(de,{name:"divesite_id",getDiveSites:t,handleChange:c}),r.a.createElement(me.a,{name:"divesite_id"}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Notes"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"notes"}),r.a.createElement(me.a,{name:"notes"}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Meta"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"meta"}),a.meta)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Rating"),r.a.createElement("div",{className:"control"},r.a.createElement(me.b,{type:"number",name:"rating"}),r.a.createElement(me.a,{name:"rating"}))),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary"},"Create")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-text",onClick:function(e){e.preventDefault(),null!=n&&n()}},"Cancel"))),r.a.createElement("pre",null,JSON.stringify(e,null,2)))})},fe=function(e){var t=e.diveLogs;return r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",{key:e.id,className:"card"},r.a.createElement("div",{className:"card-header-title"},r.a.createElement("div",{className:"columns",style:{flexGrow:"inherit"}},r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("div",{className:"title is-size-6"},e.divesite.name),r.a.createElement("div",{className:"subtitle is-size-7"},e.divesite.city.name,","," ",e.divesite.city.country.name)),r.a.createElement("div",{className:"column is-one-thirds is-size-7 has-text-right"},r.a.createElement("div",null,e.date)))))}))},ve=function(e){var t=e.children;return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-three-quarters"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"tile box is-vertical",id:"main-content"},t)))))},he=function(){var e=Object(n.useState)([]),t=Object(N.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),s=Object(N.a)(i,2),o=(s[0],s[1]),l=Object(n.useState)(!1),u=Object(N.a)(l,2),m=u[0],d=u[1];Object(n.useEffect)(function(){Object(v.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,A();case 3:t=e.sent,o(!1),c(t.results);case 6:case"end":return e.stop()}},e)}))()},[]);var p=0,h=0;return a.length>0&&(p=Object(q.a)(a,function(e){return e.divesite.lat}),h=Object(q.a)(a,function(e){return e.divesite.lng})),r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{locations:a.map(function(e){return e.divesite}),defaultZoom:8,centerCoord:{lat:p,lng:h},autoZoom:!0},r.a.createElement(ve,null,m?r.a.createElement(pe,{getDiveSites:L,onSubmitted:function(){return window.location.reload()},onCanceled:function(){return d(!1)}}):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button",onClick:function(){d(!m)}},"+ New Log"),r.a.createElement(fe,{diveLogs:a})))))},be=function(){return r.a.createElement("section",{className:"hero"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},"Something went wrong!")))};function ye(e){return r.a.createElement(ce,e)}function Ee(e){return"/destinations"===e.location.pathname?r.a.createElement(se,{locationType:"countries",history:e.history}):r.a.createElement(se,{locationType:"cities",country:e.match.params.country,history:e.history})}var ge=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state=b,a.updateUser=function(e){a.setState({user:e}),localStorage.setItem("user",JSON.stringify(e))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(r.a.Fragment,null,r.a.createElement(g,null),r.a.createElement(be,null)):r.a.createElement(y.Provider,{value:Object(s.a)({},this.state,{updateUser:this.updateUser})},r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(x.b,{exact:!0,path:"/",render:function(){return r.a.createElement(x.a,{to:"/destinations"})}}),r.a.createElement(x.b,{path:"/about/",component:oe}),r.a.createElement(x.b,{path:"/destinations/",exact:!0,component:Ee}),r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/destinations/map",exact:!0,component:ue}),r.a.createElement(x.b,{path:"/destinations/:country",exact:!0,component:Ee}),r.a.createElement(x.b,{path:"/destinations/:country/:city",exact:!0,component:ye}),r.a.createElement(x.b,{path:"/divelogs",component:he}),r.a.createElement(x.b,{path:"/divelogs/create",component:he})))))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ge,null),document.getElementById("page")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[205,1,2]]]);
//# sourceMappingURL=main.d8ca2c22.chunk.js.map