{"version":3,"sources":["diverflag.png","AppContext.tsx","api.ts","Navbar.tsx","DestinationCard.tsx","Destination.tsx","DestinationList.tsx","Login.js","About.tsx","components/DiveFlag.tsx","components/DiveMap.tsx","distance.js","MapPage.tsx","App.tsx","serviceWorker.js","index.js"],"names":["module","exports","DEFAULT_STATE","user","undefined","AppContext","React","createContext","loadJson","_x","_loadJson","apply","this","arguments","_callee7","path","options","resp","data","error","errorData","_args7","regenerator_default","a","wrap","_context7","prev","next","length","headers","fetch","sent","ok","json","abrupt","t0","statusText","Error","stop","loadAuthJson","_callee8","accessToken","_args8","_context8","concat","getCountries","_getCountries","_callee9","params","paramsObj","_args9","_context9","limit","URLSearchParams","toString","getCities","_getCities","_callee10","_args10","_context10","country_name","results","map","datum","getDestination","_x4","_x5","_getDestination","_callee11","city_name","_context11","include_divesites","getDiveSites","_x6","_getDiveSites","_callee12","query","queryObj","_context12","Note","updateNote","_updateNote","Object","asyncToGenerator","mark","_callee","_ref","diveSiteId","content","body","_context","Content-Type","Authorization","access_token","JSON","stringify","id","method","_x7","getNote","_getNote","_callee2","_ref2","_context2","methods","_x8","auth","register","_register","_callee3","_ref3","username","email","password","_context3","console","log","login","_x9","_login","_callee4","_context4","_x10","_x11","logout","_logout","_callee5","_context5","_x12","isTokenValid","_isTokenValid","_callee6","_ref4","valid","_context6","_x13","Navbar","_this","context","updateUser","react_default","createElement","className","role","aria-label","style","paddingLeft","paddingRight","href","aria-expanded","data-target","aria-hidden","react_router_dom","to","Component","contextType","DestinationCard","_textarea","props","site","value","prevProps","event","textarea","_this2","autoFocus","placeholder","ref","c","onClick","onNoteSave","bind","disabled","name","Flag","_ref$clickHandler","lat","lng","clickHandler","src","diveflag","alt","data-tooltip","boxShadow","cursor","Destination","_useState","useState","_useState2","slicedToArray","diveSites","setDiveSites","_useState3","_useState4","destination","setDestination","_useState5","_useState6","activeSite","setActiveSite","useEffect","result","match","country","city","divesite_set","height","width","position","top","lib_default","bootstrapURLKeys","key","defaultCenter","defaultZoom","zoom_level","Destination_Flag","src_DestinationCard","isLoggedIn","Level","children","Countries","dest","margin","background","color","verticalAlign","num_divesite","Cities","Dest","_ref5","locationType","DestinationList_Countries","DestinationList_Cities","DestinationList_","_ref6","breadcrumb","isLoading","destinations","hasMore","loadMoreHandler","DestinationList_Level","crumb","idx","padding","flexWrap","Array","fill","_","DestinationList_Dest","DestinationList","setIsLoading","setDestinations","setNext","push","String","alert","DestinationList_DestinationList_","urlObj","url","newList","URL","replace","origin","Login","setEmail","setPassword","setError","_submitHandler","e","preventDefault","history","message","onSubmit","type","onChange","target","class","withRouter","Consumer","Login_Login","assign","About","rel","DiveFlag","DiveMap","centerCoord","activeSiteCountry","activeSiteCity","onGoogleApiLoaded","yesIWantToUseGoogleMapApiInternals","components_DiveFlag","right","distance","lat1","lon1","lat2","lon2","unit","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","MapPage","radius","searchCircle","setSearchCircle","setSearchCircleFromMap","center","getCenter","toJSON","bound","getBounds","latDist","west","east","lngDist","north","south","min","updateDiveSites","_updateDiveSites","page_size","include_location","Fragment","zIndex","border","components_DiveMap","maps","addListener","DestinationPage","src_Destination","DestinationListPage","location","pathname","src_DestinationList","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","setState","localStorage","setItem","getItem","tempUser","parse","then","isValid","Provider","objectSpread","src_Navbar","react_router","exact","render","component","Boolean","window","hostname","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7886cb08.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEXSURBVHgBvZSBCYJAFIZ/j6goqDYoaoMGKGiRRgjawAYIWiBokIIGcAcdIDCCLAKtZxyked2d3fmBKMfzPT/f4znJC3xw3+0QrVaIfR+2iAGX5Q8b8zk6+316twkrPBwM0N5u04ueKyvMsWnPpAGW7NllNkMcBNJA0/bscTziPB7jttnIgw3ap786CUNcl0tUaZ/pcZX2X8NVlb1wqrl95LqQJilh75wYS1QSdw4HsH5fFpquWlq5tHqFMUUrU5QsHA6N2isZ5xOr2tO8kH1+WJWNMy9p2Du9Hlrr9ftDc/bahTlkEo5GSpNfm07R9Tw0F4v/CxNl7euTiX6PRej0HmV6LELHnjBWmKPae+OFCRV7K4U5v+yfW0isVFYNLj4AAAAASUVORK5CYII=\"","import React from 'react';\r\nimport { IUser } from './api'\r\n\r\nexport const DEFAULT_STATE = {\r\n    user: undefined\r\n}\r\nexport const AppContext = React.createContext<{ user?: IUser }>(DEFAULT_STATE)\r\n","// import { number } from \"prop-types\";\r\n\r\nexport interface IUser {\r\n  id: number;\r\n  username: string;\r\n  access_token: string;\r\n}\r\n\r\nexport interface ICity {\r\n  id: number;\r\n  lat: number;\r\n  lng: number;\r\n  divesite_set?: [IDiveSite];\r\n  zoom_level: number;\r\n  country_name?: string;\r\n}\r\n\r\nexport interface IDiveSite {\r\n  id: number;\r\n  lat: number;\r\n  lng: number;\r\n  name: string;\r\n  country_name?: string;\r\n  city_name?: string;\r\n}\r\n\r\nexport interface INote {\r\n  id: number;\r\n  content: string;\r\n}\r\n\r\nexport interface IUser {\r\n  id: number;\r\n  access_token: string;\r\n  username: string;\r\n}\r\n\r\nexport interface APIResults<T> {\r\n  count: number;\r\n  next: string | null;\r\n  previous: string | null;\r\n  results: T[];\r\n}\r\n\r\n\r\n// export enum LocationTypeEnum {\r\n//   cities = 'cities',\r\n//   countries = 'countries'\r\n// }\r\n\r\nexport async function loadJson(path: string, options:any = {}) {\r\n  \r\n  if (options.headers == null) {\r\n    options.headers = {}\r\n  }\r\n\r\n  options.headers['Content-Type'] = 'application/json'\r\n\r\n  const resp = await fetch(path, options)\r\n  if (resp.ok) {\r\n    const data = await resp.json()\r\n    return data\r\n  }\r\n\r\n  let error = ''\r\n  try {\r\n    const errorData = await resp.json() \r\n    error = errorData.error\r\n  } catch (e) {\r\n    error = resp.statusText\r\n  }\r\n  throw new Error(error)\r\n}\r\n\r\nasync function loadAuthJson(path:string , accessToken: string, options:any = {}) {\r\n  if (options.headers == null) {\r\n    options.headers = {}\r\n  }\r\n  options.headers['Authorization'] = `Bearer ${accessToken}` \r\n  return loadJson(path, options)\r\n}\r\n\r\nexport async function getCountries(params:{ limit: string } = { limit: '10' }): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams(params)\r\n  return loadJson(`/api/countries?${paramsObj.toString()}`)\r\n}\r\n\r\nexport async function getCities(params:{ country_name: string, limit: string } = { country_name: 'Thailand', limit: '10' }): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams(params)\r\n  const data = await loadJson(`/api/cities?${paramsObj.toString()}`)\r\n  data.results = data.results.map((datum: ICity) => {\r\n    datum.country_name = params.country_name\r\n    return datum\r\n  })\r\n  return data\r\n}\r\n\r\nexport async function getDestination(country_name:string, city_name:string): Promise<APIResults<ICity>> {\r\n  const paramsObj = new URLSearchParams({ country_name, city_name, include_divesites: 'true' })\r\n  const data = await loadJson(`/api/cities?${paramsObj.toString()}`)\r\n  return data\r\n}\r\n\r\nexport async function getDiveSites(query?:any) {\r\n  const queryObj = new URLSearchParams(query)\r\n  return loadJson('/api/divesites?' + queryObj.toString())\r\n}\r\n\r\nexport const Note = {\r\n  async updateNote({ diveSiteId, user, content }: { diveSiteId: number, user: IUser, content:string}): Promise<void> {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${user.access_token}`\r\n    }\r\n    const body = JSON.stringify({ content })\r\n    const data = await loadJson(`/api/notes/divesites/${diveSiteId}/users/${user.id}`, {\r\n      method: 'POST', \r\n      headers, \r\n      body\r\n    })\r\n    return data\r\n  },\r\n  async getNote({ diveSiteId, user }: { diveSiteId: number, user: IUser }): Promise<string> {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${user.access_token}`\r\n    }\r\n    const data = await loadJson(\r\n      `/api/notes/divesites/${diveSiteId}/users/${user.id}`, \r\n      { headers, methods: 'POST'}\r\n    )\r\n    if (data == null) {\r\n      return ''\r\n    }\r\n    return data.content\r\n  }\r\n}\r\n\r\nexport const auth = {\r\n  async register({ username, email, password }: { username: string, email: string, password: string}) {\r\n    const options = {\r\n      method: 'POST',\r\n      body: JSON.stringify({ username, email, password }),\r\n      headers: { 'Content-Type': 'application/json' }\r\n    }\r\n    const data = await loadJson('/auth/api-register', options)\r\n    console.log('data', data)\r\n    return this.login(email, password)\r\n  },\r\n  async login(email: string, password: string) {\r\n    const options = {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password }),\r\n      headers: { 'Content-Type': 'application/json' }\r\n    }\r\n    const data = await loadJson('/auth/api-login', options)\r\n    return data\r\n  },\r\n  async logout(accessToken: string) {\r\n    const options = {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${accessToken}`\r\n      }\r\n    }\r\n    const data = await loadJson('/auth/api-logout', options)\r\n    return data\r\n  },\r\n  async isTokenValid(accessToken: string): Promise<boolean> {\r\n    const { valid } = await loadAuthJson('/auth/check-token', accessToken)\r\n    return valid\r\n  }\r\n};","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { AppContext } from './AppContext'\r\nimport { auth } from './api'\r\n\r\nclass Navbar extends React.Component {\r\n    static contextType = AppContext\r\n\r\n    logout = async () => {\r\n        await auth.logout(this.context.user.access_token)\r\n        this.context.updateUser(null)\r\n    }\r\n\r\n    render() {\r\n        // const { user } = this.context\r\n\r\n        return (\r\n            <nav className=\"navbar is-dark\"\r\n                id=\"nav\"\r\n                role=\"navigation\"\r\n                aria-label=\"main navigation\"\r\n                style={{ paddingLeft: 10, paddingRight: 10 }}\r\n            >\r\n                <div className=\"navbar-brand\">\r\n                    <a href=\"/\" role=\"button\" className=\"navbar-burger burger\" aria-label=\"menu\" aria-expanded=\"false\"\r\n                        data-target=\"navbarBasicExample\">\r\n                        <span aria-hidden=\"true\"></span>\r\n                        <span aria-hidden=\"true\"></span>\r\n                        <span aria-hidden=\"true\"></span>\r\n                    </a>\r\n                </div>\r\n                <div id=\"navbarBasicExample\" className=\"navbar-menu\">\r\n                    <div className=\"navbar-start\">\r\n                        <a href=\"/\" className=\"navbar-item\">\r\n                            <div className=\"title\" style={{ paddingRight: 20 }}>Reefbase</div>\r\n                        </a>\r\n                        <Link className=\"navbar-item\" to=\"/about\">About</Link>\r\n                        <Link className=\"navbar-item\" to=\"/destinations\">Destinations</Link>\r\n                        <Link className=\"navbar-item\" to=\"/destinations/map\">Map</Link>\r\n                    </div>\r\n                    {/* {user != null ?\r\n                        <div className=\"navbar-end\">\r\n                            <a href=\"/\" className=\"navbar-item\">{user.username}</a>\r\n                            <a className=\"navbar-item\" onClick={this.logout}>Logout</a>\r\n                        </div>\r\n                        :\r\n                        <div className=\"navbar-end\">\r\n                            <Link className=\"navbar-item\" to=\"/login\">Login</Link>\r\n                        </div>\r\n                    } */}\r\n                </div>\r\n            </nav>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\nimport { IDiveSite, Note } from './api'\r\nimport { AppContext } from './AppContext'\r\n\r\ninterface IDestinationCardProps {\r\n    site: IDiveSite;\r\n    isLoggedIn: boolean;\r\n    country: string;\r\n    city: string;\r\n}\r\n\r\nclass DestinationCard extends React.Component<IDestinationCardProps, any> {\r\n    static contextType = AppContext\r\n    _textarea: any\r\n\r\n    async syncNote() {\r\n        const diveSiteId = this.props.site.id\r\n        const content = await Note.getNote({ diveSiteId, user: this.context.user })\r\n        this._textarea.value = content\r\n    }\r\n\r\n    async componentWillMount() {\r\n        if (this.context.user == null) return\r\n        // await this.syncNote()\r\n    }\r\n\r\n    async componentDidUpdate(prevProps: any) {\r\n        if (this.props.site.id !== prevProps.site.id) {\r\n            this._textarea.value = ''\r\n            // this.syncNote()\r\n        }\r\n    }\r\n\r\n    async onNoteSave(event: any) {\r\n        const diveSiteId = this.props.site.id\r\n        // TODO: check result and feedback UI\r\n        await Note.updateNote({ \r\n            diveSiteId, \r\n            user: this.context.user,\r\n            content: this._textarea.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {site} = this.props\r\n        if (site == null) {\r\n            return (\r\n                <div>\r\n                    <h2 className=\"title is-two\">No Dive Site Selected!</h2>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        let textarea\r\n        if (this.context.user != null) {\r\n            textarea = (\r\n                <div className='full-height'>\r\n                    <textarea \r\n                        autoFocus={true}\r\n                        className=\"textarea\" \r\n                        placeholder=\"Take notes here.\"\r\n                        ref={c => this._textarea = c}\r\n                    >\r\n                    </textarea>\r\n                    <button className='button' \r\n                        onClick={this.onNoteSave.bind(this)}>submit</button>\r\n                </div>\r\n            )\r\n        } else {\r\n            textarea = (\r\n                <div>\r\n                    <textarea \r\n                        className=\"textarea\" \r\n                        placeholder=\"Notes coming soon!\"\r\n                        // placeholder=\"Please login to take notes\" \r\n                        ref={c => this._textarea = c}\r\n                        disabled></textarea>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n        <div>\r\n            <h2 className=\"title is-two\">{site.name}</h2>\r\n            <h3 className=\"subtitle is-four\">{site.city_name}, {site.country_name}</h3>\r\n            { textarea }\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DestinationCard","import React, { useState, useEffect } from 'react';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport diveflag from './diverflag.png'\r\nimport DestinationCard from './DestinationCard';\r\nimport {getDestination, IDiveSite, ICity} from './api'\r\n\r\n\r\nconst Flag = ({ site, lat, lng, clickHandler=()=>{} }: { site:IDiveSite, lat:number, lng:number, clickHandler?: () => void})=> {\r\n\r\n    return (\r\n        <img \r\n            className=\"tooltip\"\r\n            onClick={clickHandler} \r\n            src={diveflag}\r\n            alt='Diver Down Flag'\r\n            data-tooltip={site.name}\r\n            style={{\r\n                boxShadow: '0px 4px 4px rgba(0, 0, 0, 0.25)',\r\n                cursor: 'pointer'\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nfunction Destination(props: any) {\r\n    const [diveSites, setDiveSites] = useState<IDiveSite[]>([])\r\n    const [destination, setDestination] = useState<ICity | null>(null)\r\n    const [activeSite, setActiveSite] = useState<any>(null)\r\n\r\n    useEffect(() => {\r\n        (async function() {\r\n            const data = await getDestination(props.match.params.country, props.match.params.city)\r\n            const result = data.results[0]\r\n            setDestination(result)\r\n            const diveSites = result.divesite_set || []\r\n            setDiveSites(diveSites)\r\n            if (diveSites.length > 0) setActiveSite(diveSites[0])\r\n        })()\r\n    }, [props.match.params.country, props.match.params.city])\r\n\r\n    return (\r\n        <div>\r\n           <div style={{ height: '100vh', width: '100%', position: 'fixed', top: 0 }}>\r\n           {destination != null ?\r\n                <GoogleMapReact\r\n                    bootstrapURLKeys={{ key: 'AIzaSyCaxeoUHkl2GK3sKFaNvLfoRWMTm0EbzK0' }}\r\n                    defaultCenter={destination}\r\n                    defaultZoom={destination.zoom_level}\r\n                >\r\n                {\r\n                    diveSites.map(site => <Flag \r\n                        key={site.id} \r\n                        lat={site.lat} \r\n                        lng={site.lng} \r\n                        site={site} \r\n                        clickHandler={() => {setActiveSite(site)}}/>\r\n                    )\r\n                }\r\n                </GoogleMapReact>\r\n           :false}\r\n            </div>\r\n            <div id=\"content\">\r\n            \r\n            {activeSite != null ?\r\n            <section className=\"section\">\r\n                <div className=\"container is-fluid\">\r\n                    <div className=\"columns\">\r\n                        <div className=\"column is-three-quarters\"></div>\r\n                        <div className=\"column\">\r\n                            <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                               <DestinationCard \r\n                                    country={props.match.params.country}\r\n                                    city={props.match.params.city}\r\n                                    site={activeSite} \r\n                                    isLoggedIn={true} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            :null}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Destination;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom'\r\nimport { getCountries, getCities, ICity, loadJson } from './api'\r\n\r\n\r\nconst Level = (props: any) => <div className=\"level\">{props.children}</div>\r\n\r\nfunction DestinationList(props: { locationType: string, country?: string }) {\r\n    const { locationType, country } = props\r\n    const [isLoading, setIsLoading] = useState(true)\r\n    const [destinations, setDestinations] = useState<ICity[]>([])\r\n    const [next, setNext] = useState(null as string | null)\r\n\r\n    let breadcrumb = [{ name: 'Countries', href: '/destinations' }]\r\n    if (country != null) {\r\n        breadcrumb.push({\r\n            name: country,\r\n            href: `/destinations/${country}`\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        (async function () {\r\n            try {\r\n                let data = null\r\n                if (locationType === 'countries') {\r\n\r\n                    data = await getCountries()\r\n                } else {\r\n                    data = await getCities({ country_name: String(props.country), limit: '10' })\r\n                }\r\n                setNext(data.next)\r\n                setDestinations(data.results)\r\n                setIsLoading(false)\r\n            } catch (error) {\r\n                alert(error)\r\n            }\r\n        })()\r\n    }, [locationType, props.country])\r\n\r\n    return (\r\n        <DestinationList_ \r\n            breadcrumb={breadcrumb}\r\n            isLoading={isLoading} \r\n            destinations={destinations} \r\n            locationType={locationType}\r\n            hasMore={next != null}\r\n            loadMoreHandler={async () => {\r\n                if (next == null) return\r\n                const urlObj = new URL(next)\r\n                // fix different host in development\r\n                const url = urlObj.href.replace(urlObj.origin, '')\r\n\r\n                const data = await loadJson(url)\r\n                data.results = data.results.map((datum: ICity) => {\r\n                    datum.country_name = country\r\n                    return datum\r\n                })\r\n\r\n                const newList = destinations.concat(data.results)\r\n                setDestinations(newList)\r\n                setNext(data.next)\r\n            }}\r\n        />\r\n    );\r\n}\r\n// TODO: better abstraction of list\r\n\r\nconst Countries = ({ dest }: { dest: any }) => (\r\n    <Link className=\"box\"\r\n        to={`/destinations/${dest.name}`}\r\n        style={{ margin: 10, height: 250, width: 250, background: '#102D54' }}\r\n    >\r\n        <div className=\"title is-4\"\r\n            style={{ color: 'white', height: '100%', verticalAlign: 'center' }}>\r\n            {dest.name} <span className=\"tag is-dark\">{dest.num_divesite} divesites</span>\r\n        </div>\r\n    </Link>\r\n)\r\n\r\nconst Cities = ({ dest }: { dest: any }) => (\r\n    <Link className=\"box\"\r\n        to={`/destinations/${dest.country_name}/${dest.name}`}\r\n        style={{ margin: 10, height: 250, width: 250, background: '#102D54' }}\r\n    >\r\n        <div className=\"title is-4\"\r\n            style={{ color: 'white', height: '100%', verticalAlign: 'center' }}>\r\n            {dest.name} <span className=\"tag is-dark\">{dest.num_divesite} divesites</span>\r\n\r\n        </div>\r\n    </Link>\r\n)\r\n\r\nconst Dest = ({ dest, locationType }: { dest: any, locationType: string }) => {\r\n    if (locationType === 'countries') return <Countries dest={dest} />\r\n    return <Cities dest={dest} />\r\n}\r\n\r\ninterface IBreadcrumb {\r\n    href: string;\r\n    name: string;\r\n}\r\n\r\nexport const DestinationList_ = ({ breadcrumb, isLoading, destinations, locationType, hasMore, loadMoreHandler } : \r\n    {\r\n        breadcrumb: IBreadcrumb[],\r\n        isLoading: boolean, \r\n        destinations: ICity[], \r\n        locationType: string,\r\n        hasMore: boolean,\r\n        loadMoreHandler: Function \r\n    }) => (\r\n    <div className=\"section\">\r\n        <div className=\"container\">\r\n            <Level>\r\n                <nav className=\"breadcrumb\" aria-label=\"breadcrumbs\">\r\n                    <ul>\r\n                    {\r\n                        breadcrumb.map((crumb, idx) =>\r\n                            <li key={idx} className={idx === (breadcrumb.length - 1) ? 'is-active': ''}>\r\n                                <Link to={crumb.href} className='title is-3' style={{ padding: '10px'}}>{ crumb.name }</Link>\r\n                            </li>\r\n                        )\r\n                    }\r\n                    </ul>\r\n                </nav>\r\n            </Level>\r\n            <Level>\r\n                <div className=\"tile is-parent\" style={{ flexWrap: 'wrap' }}>\r\n                    { isLoading ?\r\n                        Array(10).fill(null).map((_) =>\r\n                            <div className=\"box is-loading\"\r\n                                style={{ margin: 10, height: 250, width: 250, background: '#102D54' }}\r\n                            >\r\n                                <div className=\"title is-4\"\r\n                                    style={{ color: 'white', height: '100%', verticalAlign: 'center' }}>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                        :\r\n                        destinations.map(dest => <Dest dest={dest} key={dest.id} locationType={locationType}/>)\r\n                    }\r\n                    { hasMore ?\r\n                    <button className=\"box\"\r\n                            style={{ margin: 10, height: 250, width: 250, background: '#487fca', cursor: 'pointer' }}\r\n                            onClick={() =>  loadMoreHandler()}\r\n                        >\r\n                            <div className=\"title is-4\" style={{ color: 'white' }}>More</div>\r\n                        </button>\r\n                    : null\r\n                    }\r\n \r\n                </div>\r\n            </Level>\r\n        </div>\r\n    </div>\r\n)\r\n\r\n\r\n\r\nexport default DestinationList;\r\n","import React, { useState } from 'react';\r\nimport { auth } from './api.ts'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { AppContext } from './AppContext.tsx'\r\n\r\nconst Login = (props) => {\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [error, setError] = useState(null)\r\n\r\n    function handleEmailChange(event) {\r\n        setEmail(event.target.value)\r\n    }\r\n\r\n    function handlePasswordChange(event) { \r\n        setPassword(event.target.value)\r\n    }\r\n\r\n    async function submitHandler(e) {\r\n        e.preventDefault()\r\n        try {\r\n            const user = await auth.login(email, password)\r\n            props.context.updateUser(user)\r\n            props.history.push('/')\r\n        } catch (error) {\r\n            setError(error.message)\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={submitHandler}>\r\n            <h3 className=\"title has-text-grey\">Login</h3>\r\n            <div className=\"box\">\r\n                <div className=\"field\">\r\n                    <p className=\"control has-icons-left\">\r\n                        <input className=\"input\" type=\"email\" placeholder=\"Email\"\r\n                            value={email}\r\n                            onChange={handleEmailChange}\r\n                        />\r\n                        <span className=\"icon is-small is-left\">\r\n                            <i className=\"fas fa-envelope\"></i>\r\n                        </span>\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"field\">\r\n                    <div className=\"control has-icons-left\">\r\n                        <input className=\"input\" type=\"password\" \r\n                        placeholder=\"Password\" value={password} onChange={handlePasswordChange}/>\r\n                        <span className=\"icon is-small is-left\">\r\n                        <i className=\"fas fa-lock\"></i>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <button className=\"button is-block is-info is-fullwidth\" type='submit' >\r\n                    Login</button>\r\n                {error != null ?\r\n                <p class=\"help is-danger\">{error}</p>\r\n                :null}\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\n\r\n// const Register = (props) => {\r\n//     const [email, setEmail] = useState('')\r\n//     const [password, setPassword] = useState('')\r\n//     const [username, setUsername] = useState('')\r\n//     const [error, setError] = useState(null)\r\n\r\n//     function handleEmailChange(event) {\r\n//         setEmail(event.target.value)\r\n//     }\r\n\r\n//     function handlePasswordChange(event) { \r\n//         setPassword(event.target.value)\r\n//     }\r\n\r\n//     function handleUsernameChange(event) { \r\n//         setUsername(event.target.value)\r\n//     }\r\n//     async function submitHandler(e) {\r\n//         e.preventDefault()\r\n//         try {\r\n//             const user = await auth.register({ username, email, password })\r\n//             props.context.updateUser(user)\r\n//             props.history.push('/')\r\n//         } catch (error) {\r\n//             setError(error.message)\r\n//         }\r\n\r\n//         return false\r\n//     }\r\n\r\n\r\n//     return (\r\n//         <form onSubmit={submitHandler}>\r\n//             <h3 className=\"title has-text-grey\">Register</h3>\r\n//             <div className=\"box\">\r\n//                 <div className=\"field\">\r\n//                     <p className=\"control has-icons-left\">\r\n//                         <input className=\"input\" type=\"text\" placeholder=\"Username\"\r\n//                             value={username}\r\n//                             onChange={handleUsernameChange}\r\n//                         />\r\n//                         <span className=\"icon is-small is-left\">\r\n//                             <i className=\"fas fa-user\"></i>\r\n//                         </span>\r\n//                     </p>\r\n//                 </div>\r\n//                 <div className=\"field\">\r\n//                     <p className=\"control has-icons-left\">\r\n//                         <input className=\"input\" type=\"email\" placeholder=\"Email\"\r\n//                             value={email}\r\n//                             onChange={handleEmailChange}\r\n//                         />\r\n//                         <span className=\"icon is-small is-left\">\r\n//                             <i className=\"fas fa-envelope\"></i>\r\n//                         </span>\r\n//                     </p>\r\n//                 </div>\r\n\r\n//                 <div className=\"field\">\r\n//                     <div className=\"control has-icons-left\">\r\n//                         <input className=\"input\"\r\n//                             type=\"password\" \r\n//                             placeholder=\"Password\" \r\n//                             value={password} \r\n//                             onChange={handlePasswordChange}\r\n//                         />\r\n//                         <span className=\"icon is-small is-left\">\r\n//                         <i className=\"fas fa-lock\"></i>\r\n//                         </span>\r\n//                     </div>\r\n//                 </div>\r\n//                 <button \r\n//                     className=\"button is-block is-info is-fullwidth\" \r\n//                     submit='submit' \r\n//                     >Register</button>\r\n//             </div>\r\n//             {error != null ?\r\n//                 <p class=\"help is-danger\">{error}</p>\r\n//                 :null}\r\n//         </form>\r\n//     )\r\n// }\r\n\r\n            \r\nconst LoginPage = (props) => {\r\n    return (\r\n        <AppContext.Consumer>\r\n            {context => \r\n                <section className=\"hero is-fullheight\">\r\n                <div className=\"hero-body\">\r\n                    <div className=\"container has-text-centered\">\r\n                        <div className=\"column is-4 is-offset-4\">\r\n                            <Login {...props} context={context}/>\r\n                        </div>\r\n                        {/* <div className=\"column is-4 is-offset-4\">\r\n                            <Register {...props} context={context} />\r\n                        </div> */}\r\n                    </div>\r\n                </div>\r\n            </section>}\r\n        </AppContext.Consumer>\r\n\r\n    )\r\n}\r\n\r\nexport default withRouter(LoginPage)\r\n\r\n","import React from 'react'\r\n\r\nconst About = () =>\r\n    <div className=\"section\">\r\n        <div className=\"container\">\r\n            <div className=\"columns\">\r\n                <div className=\"column is-half is-offset-one-quarter\">\r\n                    <h2 className=\"title is-2\">About</h2>\r\n                    <p>The goal of <a href=\"/\" className=\"has-text-weight-bold\">Reefbase</a> is to be a place where scuba divers can collect information about a dive site before, during, and after a diving trip.</p><br />\r\n                    <p>Currently, the application is in development mode, so things will change and data could get lost.</p><br />\r\n                    <p>The dive site geo GPS coordinate are from <a href=\"http://divesites.com\" target=\"_blank\" rel=\"noopener noreferrer\">divesites.com</a></p><br />\r\n                    <p>Created by <a href=\"https://harinsang.com\" target=\"_blank\" rel=\"noopener noreferrer\">Harin Sanghirun</a>.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\nexport default About\r\n","import React from 'react';\r\nimport diveflag from '../diverflag.png'\r\nimport { IDiveSite } from '../api'\r\n\r\n\r\nconst DiveFlag = ({ site, lat, lng, clickHandler = () => { } }: { site: IDiveSite, lat: number, lng: number, clickHandler?: (site: IDiveSite) => void }) => {\r\n\r\n    return (\r\n        <img\r\n            className=\"tooltip\"\r\n            onClick={() => clickHandler(site)}\r\n            src={diveflag}\r\n            alt='Diver Down Flag'\r\n            data-tooltip={site.name}\r\n            style={{\r\n                boxShadow: '0px 4px 4px rgba(0, 0, 0, 0.25)',\r\n                cursor: 'pointer'\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nexport default DiveFlag","import React, { useState, useEffect } from 'react';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport DestinationCard from '../DestinationCard';\r\nimport {getDestination, IDiveSite, ICity} from '../api'\r\nimport DiveFlag from './DiveFlag'\r\n\r\n\r\n\r\nfunction DiveMap({ \r\n        diveSites, \r\n        centerCoord,\r\n        activeSite,\r\n        setActiveSite,\r\n        activeSiteCountry,\r\n        activeSiteCity,\r\n        onGoogleApiLoaded,\r\n        defaultZoom\r\n    } : \r\n    { \r\n        diveSites: IDiveSite[], \r\n        centerCoord: { lat: number, lng: number},\r\n        activeSite?: IDiveSite,\r\n        setActiveSite?: (site?: IDiveSite)=>void,\r\n        activeSiteCountry?: string,\r\n        activeSiteCity?: string,\r\n        onGoogleApiLoaded?: ({ map , maps }: { map: any, maps: any }) => void\r\n        defaultZoom: number\r\n    } ) {\r\n\r\n    return (\r\n        <div>\r\n           <div style={{ height: '100vh', width: '100%', position: 'fixed', top: 0 }}>\r\n           {diveSites != null ?\r\n                <GoogleMapReact\r\n                    bootstrapURLKeys={{ key: 'AIzaSyCaxeoUHkl2GK3sKFaNvLfoRWMTm0EbzK0' }}\r\n                    defaultCenter={centerCoord}\r\n                    defaultZoom={defaultZoom}\r\n                    yesIWantToUseGoogleMapApiInternals\r\n                    onGoogleApiLoaded={onGoogleApiLoaded}\r\n                >\r\n                {\r\n                    diveSites.map(site => <DiveFlag \r\n                        key={site.id} \r\n                        lat={site.lat} \r\n                        lng={site.lng} \r\n                        site={site} \r\n                        clickHandler={setActiveSite}/>\r\n                    )\r\n                }\r\n                </GoogleMapReact>\r\n           :false}\r\n            </div>\r\n            <div id=\"content\">\r\n            \r\n            {activeSite != null && activeSiteCountry != null && activeSiteCity != null &&\r\n            <section className=\"section\">\r\n                <div className=\"container is-fluid\">\r\n                    <div className=\"columns\">\r\n                        <div className=\"column is-three-quarters\"></div>\r\n                        <div className=\"column\">\r\n                            <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                                <span className=\"icon\"\r\n                                    style={{\r\n                                        position: 'absolute',\r\n                                        right: 15,\r\n                                        top: 25,\r\n                                        cursor: 'pointer',\r\n                                        color: '#363636'\r\n                                    }}\r\n                                    onClick={() => {\r\n                                        if (setActiveSite != null) setActiveSite(undefined)\r\n                                    }}\r\n                                >\r\n                                    <i className=\"far fa-times-circle\"></i>\r\n                                </span>\r\n                               <DestinationCard \r\n                                    country={activeSiteCountry}\r\n                                    city={activeSiteCity}\r\n                                    site={activeSite} \r\n                                    isLoggedIn={true} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DiveMap\r\n","//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n//:::                                                                         :::\r\n//:::  This routine calculates the distance between two points (given the     :::\r\n//:::  latitude/longitude of those points). It is being used to calculate     :::\r\n//:::  the distance between two locations using GeoDataSource (TM) prodducts  :::\r\n//:::                                                                         :::\r\n//:::  Definitions:                                                           :::\r\n//:::    South latitudes are negative, east longitudes are positive           :::\r\n//:::                                                                         :::\r\n//:::  Passed to function:                                                    :::\r\n//:::    lat1, lon1 = Latitude and Longitude of point 1 (in decimal degrees)  :::\r\n//:::    lat2, lon2 = Latitude and Longitude of point 2 (in decimal degrees)  :::\r\n//:::    unit = the unit you desire for results                               :::\r\n//:::           where: 'M' is statute miles (default)                         :::\r\n//:::                  'K' is kilometers                                      :::\r\n//:::                  'N' is nautical miles                                  :::\r\n//:::                                                                         :::\r\n//:::  Worldwide cities and other features databases with latitude longitude  :::\r\n//:::  are available at https://www.geodatasource.com                         :::\r\n//:::                                                                         :::\r\n//:::  For enquiries, please contact sales@geodatasource.com                  :::\r\n//:::                                                                         :::\r\n//:::  Official Web site: https://www.geodatasource.com                       :::\r\n//:::                                                                         :::\r\n//:::               GeoDataSource.com (C) All Rights Reserved 2018            :::\r\n//:::                                                                         :::\r\n//:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n\r\nfunction distance(lat1, lon1, lat2, lon2, unit) {\r\n\tif ((lat1 == lat2) && (lon1 == lon2)) {\r\n\t\treturn 0;\r\n\t}\r\n\telse {\r\n\t\tvar radlat1 = Math.PI * lat1/180;\r\n\t\tvar radlat2 = Math.PI * lat2/180;\r\n\t\tvar theta = lon1-lon2;\r\n\t\tvar radtheta = Math.PI * theta/180;\r\n\t\tvar dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\tif (dist > 1) {\r\n\t\t\tdist = 1;\r\n\t\t}\r\n\t\tdist = Math.acos(dist);\r\n\t\tdist = dist * 180/Math.PI;\r\n\t\tdist = dist * 60 * 1.1515;\r\n\t\tif (unit==\"K\") { dist = dist * 1.609344 }\r\n\t\tif (unit==\"N\") { dist = dist * 0.8684 }\r\n\t\treturn dist;\r\n\t}\r\n}\r\n\r\nexport default distance","import React, { useState, useEffect } from \"react\";\r\nimport DiveMap from \"./components/DiveMap\";\r\nimport distance from \"./distance\";\r\nimport { getDiveSites, IDiveSite } from \"./api\";\r\n\r\nconst MapPage = function(props: any) {\r\n  const [activeSite, setActiveSite] = useState(null as any)\r\n  const [searchCircle, setSearchCircle] = useState({\r\n    lat: 26.5293775, //florida\r\n    lng: -82.8939276,\r\n    radius: 240\r\n  });\r\n  const [diveSites, setDiveSites] = useState([] as IDiveSite[]);\r\n\r\n  function setSearchCircleFromMap(map: any) {\r\n    const center = map.getCenter().toJSON();\r\n    const bound = map.getBounds().toJSON();\r\n    const latDist = distance(bound.west, 0, bound.east, 0, \"K\");\r\n    const lngDist = distance(0, bound.north, 0, bound.south, \"K\");\r\n    const radius = Math.min(latDist, lngDist);\r\n    center.radius = radius;\r\n    // console.log('set circle to', center)\r\n    setSearchCircle(center);\r\n  }\r\n\r\n  function onLoad({ map, maps }: { map: any; maps: any }) {\r\n    setSearchCircleFromMap(map);\r\n\r\n    map.addListener(\"dragend\", () => setSearchCircleFromMap(map));\r\n    map.addListener(\"zoom_changed\", () => setSearchCircleFromMap(map));\r\n  }\r\n\r\n  async function updateDiveSites() {\r\n    const query = Object.assign({}, searchCircle) as any;\r\n    query.page_size = 100;\r\n    query.include_location = \"true\";\r\n\r\n    const data = await getDiveSites(query);\r\n    // console.log('new dive sites', data)\r\n\r\n    // const center: IDiveSite = {\r\n    //     id: 1,\r\n    //     lat: searchCircle.lat,\r\n    //     lng: searchCircle.lng,\r\n    //     name: 'center',\r\n    //     destination: '',\r\n    //     country: ''\r\n    // }\r\n\r\n    setDiveSites(data.results);\r\n    // setDiveSites([center])\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async function() {\r\n      updateDiveSites();\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n\r\n\r\n            <div className=\"container is-fluid\">\r\n                <div className=\"columns\">\r\n                    <div className=\"column is-two-fifths\"></div>\r\n                    <div className=\"column is-one-fifths\">\r\n                        <div className=\"tile box is-vertical\" id=\"main-content\">\r\n                        <button\r\n                            className=\"button\"\r\n                            style={{zIndex:10, border: 'none', background: 'rgba(21,60,106,0.9)', color: 'white'}}\r\n                            onClick={() => updateDiveSites()}\r\n                        >\r\n                            Redo Search Current Area\r\n                        </button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"column is-two-fifths\"></div>\r\n                </div>\r\n            </div>\r\n      <DiveMap\r\n        diveSites={diveSites}\r\n        activeSite={activeSite}\r\n        centerCoord={{ lat: searchCircle.lat, lng: searchCircle.lng }}\r\n        activeSiteCountry={\"\"}\r\n        activeSiteCity={\"\"}\r\n        setActiveSite={(activeSite: any) => setActiveSite(activeSite)}\r\n        onGoogleApiLoaded={onLoad}\r\n        defaultZoom={8}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MapPage;\r\n","import React from \"react\";\nimport \"./App.scss\";\nimport Navbar from \"./Navbar\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect,\n  Switch\n} from \"react-router-dom\";\nimport Destination from \"./Destination\";\nimport DestinationList from \"./DestinationList\";\nimport Login from \"./Login\";\nimport About from \"./About\";\nimport MapPage from \"./MapPage\";\nimport { AppContext, DEFAULT_STATE } from \"./AppContext\";\nimport { IUser, auth } from \"./api\";\n\nfunction DestinationPage(props: any) {\n  return <Destination {...props} />;\n}\n\nfunction DestinationListPage(props: any) {\n  const pathname = props.location.pathname;\n  if (pathname === \"/destinations\") {\n    return <DestinationList locationType=\"countries\" />;\n  }\n  return (\n    <DestinationList\n      locationType=\"cities\"\n      country={props.match.params.country}\n    />\n  );\n}\n\nclass App extends React.Component {\n  state = DEFAULT_STATE;\n  constructor(props: any) {\n    super(props);\n    let user = localStorage.getItem(\"user\");\n    if (user != null) {\n      let tempUser = JSON.parse(user) || {};\n      if (tempUser.access_token != null) {\n        this.state.user = tempUser;\n        auth.isTokenValid(tempUser.access_token).then(isValid => {\n          if (isValid === false) {\n            this.updateUser(null);\n          }\n        });\n      }\n    }\n  }\n\n  updateUser = (user: IUser | null) => {\n    this.setState({ user });\n    localStorage.setItem(\"user\", JSON.stringify(user));\n  };\n\n  render() {\n    return (\n      <AppContext.Provider\n        value={{\n          ...this.state,\n          updateUser: this.updateUser\n        }}\n      >\n        <Router>\n          <div>\n            <Navbar />\n            <Route\n              exact\n              path=\"/\"\n              render={() => <Redirect to=\"/destinations\" />}\n            />\n            <Route path=\"/login/\" component={Login} />\n            <Route path=\"/about/\" component={About} />\n            <Route\n              path=\"/destinations/\"\n              exact\n              component={DestinationListPage}\n            />\n            <Switch>\n              <Route path=\"/destinations/map\" exact component={MapPage} />\n              <Route\n                path=\"/destinations/:country\"\n                exact\n                component={DestinationListPage}\n              />\n              <Route\n                path=\"/destinations/:country/:city\"\n                exact\n                component={DestinationPage}\n              />\n            </Switch>\n          </div>\n        </Router>\n      </AppContext.Provider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('page'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}