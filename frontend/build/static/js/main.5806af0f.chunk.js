(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(63),i=a.n(c),s=a(79),o=a(20),l=a(21),u=a(25),m=a(22),d=a(27),p=(a(86),a(87),a(1)),v=a.n(p),f=a(2),h=a(28),b={user:void 0,hasError:!1},E=r.a.createContext(b),g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={active:!1},a.logout=Object(f.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.context.updateUser(null);case 1:case"end":return e.stop()}},e)})),a.closeMenu=function(){a.setState({active:!1})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar is-dark",id:"nav",role:"navigation","aria-label":"main navigation",style:{paddingLeft:10,paddingRight:10}},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("a",{href:"/",className:"navbar-item"},r.a.createElement("div",{className:"title tooltip",style:{paddingRight:20}},"Reefbase")),r.a.createElement("a",{href:"/",role:"button",className:"navbar-burger burger ".concat(this.state.active?"is-active":""),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:function(t){t.preventDefault(),e.setState({active:!e.state.active})}},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:"navbar-menu ".concat(this.state.active?"is-active":""),style:{backgroundColor:"rgba(0,0,0,0)"}},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(h.b,{className:"navbar-item",onClick:this.closeMenu,to:"/about"},"About"),r.a.createElement(h.b,{className:"navbar-item",onClick:this.closeMenu,to:"/destinations"},"Destinations"),r.a.createElement(h.b,{className:"navbar-item",onClick:this.closeMenu,to:"/destinations/map"},"Map"))))}}]),t}(r.a.Component);g.contextType=E;var y=g,N=a(31),x=a(5);function w(e){return j.apply(this,arguments)}function j(){return(j=Object(f.a)(v.a.mark(function e(t){var a,n,r,c,i,s=arguments;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null==(a=s.length>1&&void 0!==s[1]?s[1]:{}).headers&&(a.headers={}),a.headers["Content-Type"]="application/json",e.next=5,fetch(t,a);case 5:if(!(n=e.sent).ok){e.next=11;break}return e.next=9,n.json();case 9:return r=e.sent,e.abrupt("return",r);case 11:return c="",e.prev=12,e.next=15,n.json();case 15:i=e.sent,c=i.error,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),c=n.statusText;case 22:throw new Error(c);case 23:case"end":return e.stop()}},e,null,[[12,19]])}))).apply(this,arguments)}function O(){return k.apply(this,arguments)}function k(){return(k=Object(f.a)(v.a.mark(function e(){var t,a,n=arguments;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{page_size:"200"},a=new URLSearchParams(t),e.abrupt("return",w("/api/countries?".concat(a.toString())));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(){return A.apply(this,arguments)}function A(){return(A=Object(f.a)(v.a.mark(function e(){var t,a,n,r=arguments;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{country_name:"Thailand",page_size:"10"},a=new URLSearchParams(t),e.next=4,w("/api/cities?".concat(a.toString()));case 4:return(n=e.sent).results=n.results.map(function(e){return e.country_name=t.country_name,e}),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e,t){return _.apply(this,arguments)}function _(){return(_=Object(f.a)(v.a.mark(function e(t,a){var n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams({country_name:t,city_name:a,include_divesites:"true"}),e.next=3,w("/api/cities?".concat(n.toString()));case 3:return(r=e.sent).results.length>0&&(r.results=r.results.map(function(e){return null==e.divesite_set?e:(e.divesite_set=e.divesite_set.map(function(e){return e.country_name=t,e.city_name=a,e}),e)})),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e){return M.apply(this,arguments)}function M(){return(M=Object(f.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams(t),e.abrupt("return",w("/api/divesites?"+a.toString()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w("/api/divelogs"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}function U(e){return D.apply(this,arguments)}function D(){return(D=Object(f.a)(v.a.mark(function e(t){var a,n,r,c,i,s,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=R("csrftoken")||"",(n=new Headers).append("Content-Type","application/json"),n.append("X-CSRFToken",a),r={method:"POST",body:JSON.stringify(t),headers:n},e.next=7,fetch("/api/divelogs/",r);case 7:if(!(c=e.sent).ok){e.next=13;break}return e.next=11,c.json();case 11:return i=e.sent,e.abrupt("return",i);case 13:if(400!=c.status){e.next=20;break}return e.next=16,c.json();case 16:return s=e.sent,o={},Object.keys(s).forEach(function(e){o[e]=s[e][0]}),e.abrupt("return",{errors:o});case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}var B={updateNote:function(){var e=Object(f.a)(v.a.mark(function e(t){var a,n,r,c,i,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.diveSiteId,n=t.user,r=t.content,c={"Content-Type":"application/json",Authorization:"Bearer ".concat(n.access_token)},i=JSON.stringify({content:r}),e.next=5,w("/api/notes/divesites/".concat(a,"/users/").concat(n.id),{method:"POST",headers:c,body:i});case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getNote:function(){var e=Object(f.a)(v.a.mark(function e(t){var a,n,r,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.diveSiteId,n=t.user,r={"Content-Type":"application/json",Authorization:"Bearer ".concat(n.access_token)},e.next=4,w("/api/notes/divesites/".concat(a,"/users/").concat(n.id),{headers:r,methods:"POST"});case 4:if(null!=(c=e.sent)){e.next=7;break}return e.abrupt("return","");case 7:return e.abrupt("return",c.content);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},P=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._textarea=void 0,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"syncNote",value:function(){var e=Object(f.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.site.id,e.next=3,B.getNote({diveSiteId:t,user:this.context.user});case 3:a=e.sent,this._textarea.value=a;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(f.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.context.user){e.next=2;break}return e.abrupt("return");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(f.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.props.site&&null!=t.site&&this.props.site.id!==t.site.id&&(this._textarea.value="");case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onNoteSave",value:function(){var e=Object(f.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.site.id,e.next=3,B.updateNote({diveSiteId:a,user:this.context.user,content:this._textarea.value});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=this.props.site;return null==a?r.a.createElement("div",null,r.a.createElement("h2",{className:"title is-two"},"No Dive Site Selected!")):(e=null!=this.context.user?r.a.createElement("div",{className:"full-height"},r.a.createElement("textarea",{autoFocus:!0,className:"textarea borderless",placeholder:"Take notes here.",ref:function(e){return t._textarea=e}}),r.a.createElement("button",{className:"button",onClick:this.onNoteSave.bind(this)},"submit")):r.a.createElement("div",null,r.a.createElement("textarea",{className:"textarea borderless",placeholder:"Notes coming soon!",ref:function(e){return t._textarea=e},disabled:!0})),r.a.createElement("div",null,r.a.createElement("h2",{className:"title is-two"},a.name),r.a.createElement("h3",{className:"subtitle is-four"},a.city_name,", ",a.country_name),e))}}]),t}(r.a.Component);P.contextType=E;var z=P,F=a(75),H=a.n(F),W=a(76),Z=a.n(W),G=function(e){var t=e.site,a=(e.lat,e.lng,e.clickHandler),n=void 0===a?function(){}:a;return r.a.createElement("div",{className:"tooltip","data-tooltip":t.name},r.a.createElement("img",{onClick:function(){return n(t)},src:Z.a,alt:"Diver Down Flag",style:{boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",cursor:"pointer"}}))},K=a(117);var J=function(e){var t=e.locations,a=e.centerCoord,n=(e.activeSite,e.setActiveLocation),c=(e.activeSiteCountry,e.activeSiteCity,e.onGoogleApiLoaded),i=e.defaultZoom,s=e.autoZoom,o=e.children;return!0===s&&t.length>0&&(a={lat:Object(K.a)(t,"lat"),lng:Object(K.a)(t,"lng")}),r.a.createElement("div",null,r.a.createElement("div",{style:{height:"100vh",width:"100%",position:"fixed",top:0}},null!=t&&r.a.createElement(H.a,{bootstrapURLKeys:{key:"AIzaSyCaxeoUHkl2GK3sKFaNvLfoRWMTm0EbzK0"},defaultCenter:a,defaultZoom:i,hoverDistance:5,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var a=e.map,n=e.maps;if(!0===s){var r=new n.LatLngBounds;t.forEach(function(e){r.extend({lat:e.lat,lng:e.lng})}),a.fitBounds(r)}null!=c&&c({map:a,maps:n})}},t.map(function(e){return r.a.createElement(G,{key:e.id,lat:e.lat,lng:e.lng,site:e,clickHandler:n})}))),r.a.createElement("div",{id:"content"},o))},X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={hasError:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component);var Y=function(e){var t=Object(n.useState)([]),a=Object(x.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(null),o=Object(x.a)(s,2),l=o[0],u=o[1],m=Object(n.useState)(null),d=Object(x.a)(m,2),p=d[0],b=d[1],E=e.match.params,g=E.country,y=E.city;Object(n.useEffect)(function(){Object(f.a)(v.a.mark(function e(){var t,a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(g,y);case 2:t=e.sent,a=t.results[0],u(a),n=a.divesite_set||[],i(n),n.length>0&&window.innerWidth>768&&b(n[0]);case 8:case"end":return e.stop()}},e)}))()},[e.match.params.country,e.match.params.city]);var N=[{href:"/destinations",name:"Country"},{href:"/destinations/".concat(g),name:g},{href:"/destinations/".concat(g,"/").concat(y),name:y}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"level"},r.a.createElement("nav",{className:"breadcrumb","aria-label":"breadcrumbs"},r.a.createElement("ul",null,N.map(function(e,t){return r.a.createElement("li",{style:{zIndex:10},key:t,className:" ".concat(t===N.length-1?"is-active":"")},r.a.createElement(h.b,{to:e.href,className:"title is-5",style:{padding:"10px"}},e.name))})))),r.a.createElement("div",null,null!=l&&null!=c&&r.a.createElement(J,{locations:c,activeSite:p,centerCoord:{lat:l.lat,lng:l.lng},activeSiteCountry:"",activeSiteCity:"",setActiveLocation:function(e){return b(e)},autoZoom:!0,defaultZoom:8,onGoogleApiLoaded:function(e){var t=e.map;e.maps,t.addListener("click",function(){b(void 0)})}},null!=p&&r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-three-quarters"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"tile box is-vertical",id:"main-content"},r.a.createElement("span",{className:"icon",style:{position:"absolute",right:15,cursor:"pointer",color:"#363636"},onClick:function(){return b(void 0)}},r.a.createElement("i",{className:"far fa-times-circle"})),r.a.createElement(X,null,r.a.createElement(z,{country:g,city:y,site:p,isLoggedIn:!0}))))))))))};var q=function(e){e.breadcrumb,e.isLoading;var t=e.destinations,a=e.locationType,n=(e.hasMore,e.loadMoreHandler,e.history);return r.a.createElement("div",null,t.length>0&&r.a.createElement(J,{locations:t,activeSite:void 0,activeSiteCountry:"",activeSiteCity:"",setActiveLocation:function(e){"countries"==a?n.push("/destinations/".concat(e.name)):n.push("/destinations/".concat(e.country_name,"/").concat(e.name))},autoZoom:!0,defaultZoom:8}))},V=function(e){var t=e.locationType,a=e.country,c=e.history,i=Object(n.useState)(!0),s=Object(x.a)(i,2),o=s[0],l=s[1],u=Object(n.useState)([]),m=Object(x.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)(null),b=Object(x.a)(h,2),E=b[0],g=b[1],y=[{name:"Countries",href:"/destinations"}];return null!=a&&y.push({name:a,href:"/destinations/".concat(a)}),Object(n.useEffect)(function(){Object(f.a)(v.a.mark(function a(){var n;return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n=null,"countries"!==t){a.next=8;break}return a.next=5,O();case 5:n=a.sent,a.next=11;break;case 8:return a.next=10,S({country_name:String(e.country),page_size:"200"});case 10:n=a.sent;case 11:g(n.next),p(n.results),l(!1),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),alert(a.t0);case 19:case"end":return a.stop()}},a,null,[[0,16]])}))()},[t,e.country]),r.a.createElement(q,{history:c,breadcrumb:y,isLoading:o,destinations:d,locationType:t,hasMore:null!=E,loadMoreHandler:Object(f.a)(v.a.mark(function e(){var t,n,r,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=E){e.next=2;break}return e.abrupt("return");case 2:return t=new URL(E),n=t.href.replace(t.origin,""),e.next=6,w(n);case 6:(r=e.sent).results=r.results.map(function(e){return e.country_name=a,e}),c=d.concat(r.results),p(c),g(r.next);case 11:case"end":return e.stop()}},e)}))})},Q=function(){return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-half is-offset-one-quarter"},r.a.createElement("h2",{className:"title is-2"},"About"),r.a.createElement("p",null,"The goal of ",r.a.createElement("a",{href:"/",className:"has-text-weight-bold"},"Reefbase")," is to be a place where scuba divers can collect information about a dive site before, during, and after a diving trip."),r.a.createElement("br",null),r.a.createElement("p",null,"Currently, the application is in development mode, so things will change and data could get lost."),r.a.createElement("br",null),r.a.createElement("p",null,"The dive site geo GPS coordinate are from ",r.a.createElement("a",{href:"http://divesites.com",target:"_blank",rel:"noopener noreferrer"},"divesites.com")),r.a.createElement("br",null),r.a.createElement("p",null,"Created by ",r.a.createElement("a",{href:"https://harinsang.com",target:"_blank",rel:"noopener noreferrer"},"Harin Sanghirun"),".")))))};var $=function(e,t,a,n,r){if(e==a&&t==n)return 0;var c=Math.PI*e/180,i=Math.PI*a/180,s=t-n,o=Math.PI*s/180,l=Math.sin(c)*Math.sin(i)+Math.cos(c)*Math.cos(i)*Math.cos(o);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515,"K"==r&&(l*=1.609344),"N"==r&&(l*=.8684),l},ee=function(e){var t=Object(n.useState)(null),a=Object(x.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)({lat:26.5293775,lng:-82.8939276,radius:240}),o=Object(x.a)(s,2),l=o[0],u=o[1],m=Object(n.useState)([]),d=Object(x.a)(m,2),p=d[0],h=d[1];function b(e){var t=e.getCenter().toJSON(),a=e.getBounds().toJSON(),n=$(a.west,0,a.east,0,"K"),r=$(0,a.north,0,a.south,"K"),c=Math.min(n,r);t.radius=c,u(t)}function E(){return g.apply(this,arguments)}function g(){return(g=Object(f.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object.assign({},l)).page_size=100,t.include_location="true",e.next=5,L(t);case 5:a=e.sent,h(a.results);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(n.useEffect)(function(){Object(f.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E();case 1:case"end":return e.stop()}},e)}))()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-fifths"}),r.a.createElement("div",{className:"column is-one-fifths"},r.a.createElement("div",{className:"tile box is-vertical",id:"main-content"},r.a.createElement("button",{className:"button",style:{zIndex:10,border:"none",background:"rgba(21,60,106,0.9)",color:"white"},onClick:function(){return E()}},"Redo Search Current Area"))),r.a.createElement("div",{className:"column is-two-fifths"}))),r.a.createElement(J,{locations:p,activeSite:c,centerCoord:{lat:l.lat,lng:l.lng},activeSiteCountry:"",activeSiteCity:"",setActiveLocation:function(e){return i(e)},onGoogleApiLoaded:function(e){var t=e.map;e.maps,b(t),t.addListener("dragend",function(){return b(t)}),t.addListener("zoom_changed",function(){return b(t)})},defaultZoom:8}))},te=a(15),ae=function(e){var t=e.handleChange,a=e.getDiveSites,c=e.name,i=Object(n.useState)([]),s=Object(x.a)(i,2),o=s[0],l=s[1],u=Object(n.useState)(!1),m=Object(x.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)(),b=Object(x.a)(h,2),E=b[0],g=b[1];return r.a.createElement("div",{className:"control has-icons left"},r.a.createElement("input",{type:"text",onChange:function(e){var t=e.target.value;clearTimeout(E);var n=setTimeout(Object(f.a)(v.a.mark(function e(){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.next=5,a({keyword:t});case 5:n=e.sent,p(!1),l(n.results);case 8:case"end":return e.stop()}},e)})),500);g(n)},placeholder:"Search Dive Site by Name"}),r.a.createElement("div",{className:"select"},r.a.createElement("select",{name:c,onChange:t},o.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("span",{className:"icon is-left"},r.a.createElement("i",{className:"fas fa-globe"})))},ne=function(e){var t=e.getDiveSites,a=e.onSubmitted,n=e.onCanceled;return r.a.createElement(te.d,{initialValues:{date:(new Date).toISOString().substring(0,10),divesite_id:1,meta:void 0,rating:void 0,notes:void 0},onSubmit:function(){var e=Object(f.a)(v.a.mark(function e(t,n){var r,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setSubmitting,r=n.setErrors,e.next=3,U(t);case 3:(c=e.sent).errors?r(c.errors):null!=a&&a();case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},function(e){var a=e.errors,c=e.handleChange;return r.a.createElement(te.c,null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Date"),r.a.createElement("div",{className:"control"},r.a.createElement(te.b,{name:"date",type:"date","data-display-mode":"inline","data-is-range":"true","data-close-on-select":"false"})),r.a.createElement(te.a,{name:"date"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:""},"Time"),r.a.createElement("div",{className:"control"},r.a.createElement(te.b,{type:"time","data-display-mode":"inline","data-is-range":"true","data-close-on-select":"false"}),r.a.createElement(te.a,{name:"time"}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Dive Site"),r.a.createElement("div",{className:"control"},r.a.createElement(ae,{name:"divesite_id",getDiveSites:t,handleChange:c}),r.a.createElement(te.a,{name:"divesite_id"}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Notes"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"notes"}),r.a.createElement(te.a,{name:"notes"}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Meta"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",name:"meta"}),a.meta)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Rating"),r.a.createElement("div",{className:"control"},r.a.createElement(te.b,{type:"number",name:"rating"}),r.a.createElement(te.a,{name:"rating"}))),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary"},"Create")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-text",onClick:function(e){e.preventDefault(),null!=n&&n()}},"Cancel"))),r.a.createElement("pre",null,JSON.stringify(e,null,2)))})},re=function(e){var t=e.diveLogs;return r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",{key:e.id,className:"card"},r.a.createElement("div",{className:"card-header-title"},r.a.createElement("div",{className:"columns",style:{flexGrow:"inherit"}},r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("div",{className:"title is-size-6"},e.divesite.name),r.a.createElement("div",{className:"subtitle is-size-7"},e.divesite.city.name,","," ",e.divesite.city.country.name)),r.a.createElement("div",{className:"column is-one-thirds is-size-7 has-text-right"},r.a.createElement("div",null,e.date)))))}))},ce=function(e){var t=e.children;return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-three-quarters"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"tile box is-vertical",id:"main-content"},t)))))},ie=function(){var e=Object(n.useState)([]),t=Object(x.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),s=Object(x.a)(i,2),o=(s[0],s[1]),l=Object(n.useState)(!1),u=Object(x.a)(l,2),m=u[0],d=u[1];Object(n.useEffect)(function(){Object(f.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,T();case 3:t=e.sent,o(!1),c(t.results);case 6:case"end":return e.stop()}},e)}))()},[]);var p=0,h=0;return a.length>0&&(p=Object(K.a)(a,function(e){return e.divesite.lat}),h=Object(K.a)(a,function(e){return e.divesite.lng})),r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{locations:a.map(function(e){return e.divesite}),defaultZoom:8,centerCoord:{lat:p,lng:h},autoZoom:!0},r.a.createElement(ce,null,m?r.a.createElement(ne,{getDiveSites:L,onSubmitted:function(){return window.location.reload()},onCanceled:function(){return d(!1)}}):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button",onClick:function(){d(!m)}},"+ New Log"),r.a.createElement(re,{diveLogs:a})))))},se=function(){return r.a.createElement("section",{className:"hero"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},"Something went wrong!")))};function oe(e){return r.a.createElement(Y,e)}function le(e){return"/destinations"===e.location.pathname?r.a.createElement(V,{locationType:"countries",history:e.history}):r.a.createElement(V,{locationType:"cities",country:e.match.params.country,history:e.history})}var ue=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state=b,a.updateUser=function(e){a.setState({user:e}),localStorage.setItem("user",JSON.stringify(e))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(r.a.Fragment,null,r.a.createElement(y,null),r.a.createElement(se,null)):r.a.createElement(E.Provider,{value:Object(s.a)({},this.state,{updateUser:this.updateUser})},r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement(N.b,{exact:!0,path:"/",render:function(){return r.a.createElement(N.a,{to:"/destinations"})}}),r.a.createElement(N.b,{path:"/about/",component:Q}),r.a.createElement(N.b,{path:"/destinations/",exact:!0,component:le}),r.a.createElement(N.d,null,r.a.createElement(N.b,{path:"/destinations/map",exact:!0,component:ee}),r.a.createElement(N.b,{path:"/destinations/:country",exact:!0,component:le}),r.a.createElement(N.b,{path:"/destinations/:country/:city",exact:!0,component:oe}),r.a.createElement(N.b,{path:"/divelogs",component:ie}),r.a.createElement(N.b,{path:"/divelogs/create",component:ie})))))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ue,null),document.getElementById("page")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEXSURBVHgBvZSBCYJAFIZ/j6goqDYoaoMGKGiRRgjawAYIWiBokIIGcAcdIDCCLAKtZxyked2d3fmBKMfzPT/f4znJC3xw3+0QrVaIfR+2iAGX5Q8b8zk6+316twkrPBwM0N5u04ueKyvMsWnPpAGW7NllNkMcBNJA0/bscTziPB7jttnIgw3ap786CUNcl0tUaZ/pcZX2X8NVlb1wqrl95LqQJilh75wYS1QSdw4HsH5fFpquWlq5tHqFMUUrU5QsHA6N2isZ5xOr2tO8kH1+WJWNMy9p2Du9Hlrr9ftDc/bahTlkEo5GSpNfm07R9Tw0F4v/CxNl7euTiX6PRej0HmV6LELHnjBWmKPae+OFCRV7K4U5v+yfW0isVFYNLj4AAAAASUVORK5CYII="},81:function(e,t,a){e.exports=a(116)},86:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.5806af0f.chunk.js.map