<!DOCTYPE html>
<html>

<head>
    <style>
        /* Set the size of the div element that contains the map */
        #map {
            height: 1000px;
            /* The height is 400 pixels */
            width: 100%;
            /* The width is the width of the web page */
        }
    </style>
</head>

<body>
    <h3>Reef Explorer</h3>
    <!--The div element for the map -->
    <div id="map"></div>
    <script>

        var sites = { "request": { "str": null, "timestamp": 1557505821, "loc": { "lat": "20.423250", "lng": "-86.924084" }, "mode": "sites", "dist": "25", "api": 1 }, 
        "sites": [
            { 
                "currents": null, 
                "distance": "4.93", 
                "hazards": null, 
                "lat": "20.4668", 
                "name": "Marine Sanctuary", 
                "water": null, 
                "marinelife": null, 
                "description": null, 
                "maxdepth": null, 
                "mindepth": null, 
                "predive": null, 
                "id": "23119", 
                "equipment": null, 
                "lng": "-86.9844" }, { "currents": null, "distance": "5.10", "hazards": null, "lat": "20.4801", "name": "El Cid, La Ceiba Reef (DC3 Airplane Wreck)", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "24534", "equipment": null, "lng": "-86.9742" }, { "currents": null, "distance": "5.24", "hazards": null, "lat": "20.4855", "name": "Cozumel Shore Dive", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "24418", "equipment": null, "lng": "-86.9703" }, { "currents": null, "distance": "5.28", "hazards": null, "lat": "20.4822", "name": "Airplane Wreck", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "15646", "equipment": null, "lng": "-86.9759" }, { "currents": null, "distance": "5.35", "hazards": null, "lat": "20.4408", "name": "Tormentos Reef, Cozumel", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "24297", "equipment": null, "lng": "-87.0046" }, { "currents": null, "distance": "5.40", "hazards": null, "lat": "20.4841", "name": "Paradise Reef", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23710", "equipment": null, "lng": "-86.9765" }, { "currents": null, "distance": "6.00", "hazards": null, "lat": "20.5042", "name": "Blue Angel Resort", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23872", "equipment": null, "lng": "-86.9575" }, { "currents": null, "distance": "6.12", "hazards": null, "lat": "20.5063", "name": "Scuba Club Cozumel", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "24216", "equipment": null, "lng": "-86.9570" }, { "currents": null, "distance": "6.21", "hazards": null, "lat": "20.5101", "name": "Cozumel", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23600", "equipment": null, "lng": "-86.9489" }, { "currents": null, "distance": "6.86", "hazards": null, "lat": "20.3915", "name": "Punta Tunich Wall", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22896", "equipment": null, "lng": "-87.0244" }, { "currents": null, "distance": "7.64", "hazards": null, "lat": "20.3701", "name": "Yucab Reef", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22905", "equipment": null, "lng": "-87.0274" }, { "currents": null, "distance": "7.68", "hazards": null, "lat": "20.3722", "name": "Santa Rosa Wall", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22853", "equipment": null, "lng": "-87.0295" }, { "currents": null, "distance": "7.70", "hazards": null, "lat": "20.3702", "name": "Palancar Wall", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "24511", "equipment": null, "lng": "-87.0286" }, { "currents": null, "distance": "7.84", "hazards": null, "lat": "20.3707", "name": "San Francisco Wall", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23945", "equipment": null, "lng": "-87.0314" }, { "currents": null, "distance": "8.26", "hazards": null, "lat": "20.3553", "name": "Paso del Cedral Reef", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22898", "equipment": null, "lng": "-87.0291" }, { "currents": null, "distance": "8.45", "hazards": null, "lat": "20.3448", "name": "Dalila", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22892", "equipment": null, "lng": "-87.0242" }, { "currents": null, "distance": "9.04", "hazards": null, "lat": "20.3331", "name": "Palancar Reef", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22168", "equipment": null, "lng": "-87.0252" }, { "currents": null, "distance": "9.31", "hazards": null, "lat": "20.5580", "name": "San Juan Reef", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23859", "equipment": null, "lng": "-86.9263" }, { "currents": null, "distance": "9.40", "hazards": null, "lat": "20.3260", "name": "Palancar Gardens", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22778", "equipment": null, "lng": "-87.0255" }, { "currents": null, "distance": "9.51", "hazards": null, "lat": "20.3332", "name": "Palancar Horseshoe", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "24505", "equipment": null, "lng": "-87.0352" }, { "currents": null, "distance": "9.60", "hazards": null, "lat": "20.3190", "name": "Palancar Caves", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23579", "equipment": null, "lng": "-87.0221" }, { "currents": null, "distance": "10.13", "hazards": null, "lat": "20.5692", "name": "Baracuda Reef", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22900", "equipment": null, "lng": "-86.9089" }, { "currents": null, "distance": "10.22", "hazards": null, "lat": "20.3052", "name": "Columbia Reef (Deep and Shallow)", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22893", "equipment": null, "lng": "-87.0190" }, { "currents": null, "distance": "11.33", "hazards": null, "lat": "20.2622", "name": "C-53 Wreck", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23558", "equipment": null, "lng": "-86.9568" }, { "currents": null, "distance": "11.70", "hazards": null, "lat": "20.2712", "name": "Punta Sur", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22474", "equipment": null, "lng": "-87.0035" }, { "currents": null, "distance": "12.00", "hazards": null, "lat": "20.5762", "name": "Playa Del Carmen", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22108", "equipment": null, "lng": "-87.0117" }, { "currents": null, "distance": "12.31", "hazards": null, "lat": "20.3459", "name": "San Clemente Reef", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23149", "equipment": null, "lng": "-87.0953" }, { "currents": null, "distance": "12.33", "hazards": null, "lat": "20.2944", "name": "Tormentos", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23871", "equipment": null, "lng": "-87.0557" }, { "currents": null, "distance": "16.04", "hazards": null, "lat": "20.5939", "name": "Tortugas", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "24181", "equipment": null, "lng": "-87.0920" }, { "currents": null, "distance": "16.58", "hazards": null, "lat": "20.6252", "name": "Jardines", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23167", "equipment": null, "lng": "-87.0624" }, { "currents": null, "distance": "16.74", "hazards": null, "lat": "20.6223", "name": "Jardines Reef", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22966", "equipment": null, "lng": "-87.0715" }, { "currents": null, "distance": "16.86", "hazards": null, "lat": "20.6263", "name": "Barracuda", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "16096", "equipment": null, "lng": "-87.0685" }, { "currents": null, "distance": "18.30", "hazards": null, "lat": "20.5179", "name": "Paamul Deep", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22956", "equipment": null, "lng": "-87.1882" }, { "currents": null, "distance": "18.48", "hazards": null, "lat": "20.5210", "name": "Paamul", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22955", "equipment": null, "lng": "-87.1897" }, { "currents": null, "distance": "18.74", "hazards": null, "lat": "20.5500", "name": "Chikin Ha Cenote", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "22972", "equipment": null, "lng": "-87.1800" }, { "currents": null, "distance": "20.90", "hazards": null, "lat": "20.5032", "name": "Choc Mool Cenote", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "24298", "equipment": null, "lng": "-87.2355" }, { "currents": null, "distance": "21.79", "hazards": null, "lat": "20.5131", "name": "Cenote Chac Mool", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23042", "equipment": null, "lng": "-87.2468" }, { "currents": null, "distance": "21.81", "hazards": null, "lat": "20.5131", "name": "Cenote Kukulcan", "water": null, "marinelife": null, "description": null, "maxdepth": null, "mindepth": null, "predive": null, "id": "23860", "equipment": null, "lng": "-87.2470" }], "version": 1, "loc": { "lat": "20.423250", "lng": "-86.924084" }, "result": true }


        // Initialize and add the map
        function initMap() {
            // The location of Uluru
            var cozumel = { lat: 20.423250, lng: -86.924084 };
            var uluru = { lat: -25.344, lng: 131.036 };
            // The map, centered at Uluru
            var map = new google.maps.Map(
                document.getElementById('map'), { zoom: 11, center: cozumel });
            // The marker, positioned at Uluru

            markers = sites.sites.map((site) => {
                const position = {
                    lat: Number(site.lat),
                    lng: Number(site.lng)
                }
                var marker = new google.maps.Marker({
                    title: site.name,
                    position, 
                    map
                });

                var infowindow = new google.maps.InfoWindow({
                    content: site.name
                });

                marker.addListener('click', function() {
                    infowindow.open(map, marker);
                });

                return marker
            })
        }
    </script>
    <!--Load the API from the specified URL
    * The async attribute allows the browser to render the page while the API loads
    * The key parameter will contain your own API key (which is not needed for this tutorial)
    * The callback parameter executes the initMap() function
    -->
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaxeoUHkl2GK3sKFaNvLfoRWMTm0EbzK0&callback=initMap">
        </script>
</body>

</html>